var Pn=e=>{throw TypeError(e)};var _i=(e,t,s)=>t.has(e)||Pn("Cannot "+s);var I=(e,t,s)=>(_i(e,t,"read from private field"),s?s.call(e):t.get(e)),fe=(e,t,s)=>t.has(e)?Pn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),oe=(e,t,s,r)=>(_i(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),Se=(e,t,s)=>(_i(e,t,"access private method"),s);var Rr=(e,t,s,r)=>({set _(c){oe(e,t,c,s)},get _(){return I(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const _ of c)if(_.type==="childList")for(const v of _.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&r(v)}).observe(document,{childList:!0,subtree:!0});function s(c){const _={};return c.integrity&&(_.integrity=c.integrity),c.referrerPolicy&&(_.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?_.credentials="include":c.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function r(c){if(c.ep)return;c.ep=!0;const _=s(c);fetch(c.href,_)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function hn(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const ke={},Es=[],Ct=()=>{},Ul=()=>!1,Qr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),un=e=>e.startsWith("onUpdate:"),Xe=Object.assign,fn=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},$l=Object.prototype.hasOwnProperty,Ee=(e,t)=>$l.call(e,t),de=Array.isArray,xs=e=>Gr(e)==="[object Map]",qo=e=>Gr(e)==="[object Set]",pe=e=>typeof e=="function",Pe=e=>typeof e=="string",es=e=>typeof e=="symbol",Oe=e=>e!==null&&typeof e=="object",Ko=e=>(Oe(e)||pe(e))&&pe(e.then)&&pe(e.catch),zo=Object.prototype.toString,Gr=e=>zo.call(e),Wl=e=>Gr(e).slice(8,-1),Vo=e=>Gr(e)==="[object Object]",dn=e=>Pe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Gs=hn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Jr=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},jl=/-(\w)/g,Xt=Jr(e=>e.replace(jl,(t,s)=>s?s.toUpperCase():"")),ql=/\B([A-Z])/g,ts=Jr(e=>e.replace(ql,"-$1").toLowerCase()),Qo=Jr(e=>e.charAt(0).toUpperCase()+e.slice(1)),pi=Jr(e=>e?`on${Qo(e)}`:""),Qt=(e,t)=>!Object.is(e,t),Or=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Oi=(e,t,s,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:s})},Ti=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let In;const Xr=()=>In||(In=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Gt(e){if(de(e)){const t={};for(let s=0;s<e.length;s++){const r=e[s],c=Pe(r)?Ql(r):Gt(r);if(c)for(const _ in c)t[_]=c[_]}return t}else if(Pe(e)||Oe(e))return e}const Kl=/;(?![^(]*\))/g,zl=/:([^]+)/,Vl=/\/\*[^]*?\*\//g;function Ql(e){const t={};return e.replace(Vl,"").split(Kl).forEach(s=>{if(s){const r=s.split(zl);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function $s(e){let t="";if(Pe(e))t=e;else if(de(e))for(let s=0;s<e.length;s++){const r=$s(e[s]);r&&(t+=r+" ")}else if(Oe(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const Gl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Jl=hn(Gl);function Go(e){return!!e||e===""}const Jo=e=>!!(e&&e.__v_isRef===!0),Be=e=>Pe(e)?e:e==null?"":de(e)||Oe(e)&&(e.toString===zo||!pe(e.toString))?Jo(e)?Be(e.value):JSON.stringify(e,Xo,2):String(e),Xo=(e,t)=>Jo(t)?Xo(e,t.value):xs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[r,c],_)=>(s[gi(r,_)+" =>"]=c,s),{})}:qo(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>gi(s))}:es(t)?gi(t):Oe(t)&&!de(t)&&!Vo(t)?String(t):t,gi=(e,t="")=>{var s;return es(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let We;class Xl{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=We,!t&&We&&(this.index=(We.scopes||(We.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=We;try{return We=this,t()}finally{We=s}}}on(){++this._on===1&&(this.prevScope=We,We=this)}off(){this._on>0&&--this._on===0&&(We=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const c=this.parent.scopes.pop();c&&c!==this&&(this.parent.scopes[this.index]=c,c.index=this.index)}this.parent=void 0}}}function Yl(){return We}function Zl(e,t=!1){We&&We.cleanups.push(e)}let De;const vi=new WeakSet;class Yo{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,We&&We.active&&We.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,vi.has(this)&&(vi.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ea(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Fn(this),ta(this);const t=De,s=ft;De=this,ft=!0;try{return this.fn()}finally{sa(this),De=t,ft=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)gn(t);this.deps=this.depsTail=void 0,Fn(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?vi.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Mi(this)&&this.run()}get dirty(){return Mi(this)}}let Zo=0,Js,Xs;function ea(e,t=!1){if(e.flags|=8,t){e.next=Xs,Xs=e;return}e.next=Js,Js=e}function _n(){Zo++}function pn(){if(--Zo>0)return;if(Xs){let t=Xs;for(Xs=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Js;){let t=Js;for(Js=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=s}}if(e)throw e}function ta(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function sa(e){let t,s=e.depsTail,r=s;for(;r;){const c=r.prevDep;r.version===-1?(r===s&&(s=c),gn(r),ec(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=c}e.deps=t,e.depsTail=s}function Mi(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ra(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function ra(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ir)||(e.globalVersion=ir,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Mi(e))))return;e.flags|=2;const t=e.dep,s=De,r=ft;De=e,ft=!0;try{ta(e);const c=e.fn(e._value);(t.version===0||Qt(c,e._value))&&(e.flags|=128,e._value=c,t.version++)}catch(c){throw t.version++,c}finally{De=s,ft=r,sa(e),e.flags&=-3}}function gn(e,t=!1){const{dep:s,prevSub:r,nextSub:c}=e;if(r&&(r.nextSub=c,e.prevSub=void 0),c&&(c.prevSub=r,e.nextSub=void 0),s.subs===e&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let _=s.computed.deps;_;_=_.nextDep)gn(_,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function ec(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let ft=!0;const ia=[];function Ot(){ia.push(ft),ft=!1}function Tt(){const e=ia.pop();ft=e===void 0?!0:e}function Fn(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=De;De=void 0;try{t()}finally{De=s}}}let ir=0;class tc{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class vn{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!De||!ft||De===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==De)s=this.activeLink=new tc(De,this),De.deps?(s.prevDep=De.depsTail,De.depsTail.nextDep=s,De.depsTail=s):De.deps=De.depsTail=s,na(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=De.depsTail,s.nextDep=void 0,De.depsTail.nextDep=s,De.depsTail=s,De.deps===s&&(De.deps=r)}return s}trigger(t){this.version++,ir++,this.notify(t)}notify(t){_n();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{pn()}}}function na(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)na(r)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Fr=new WeakMap,gs=Symbol(""),Bi=Symbol(""),nr=Symbol("");function je(e,t,s){if(ft&&De){let r=Fr.get(e);r||Fr.set(e,r=new Map);let c=r.get(s);c||(r.set(s,c=new vn),c.map=r,c.key=s),c.track()}}function At(e,t,s,r,c,_){const v=Fr.get(e);if(!v){ir++;return}const i=o=>{o&&o.trigger()};if(_n(),t==="clear")v.forEach(i);else{const o=de(e),f=o&&dn(s);if(o&&s==="length"){const d=Number(r);v.forEach((u,m)=>{(m==="length"||m===nr||!es(m)&&m>=d)&&i(u)})}else switch((s!==void 0||v.has(void 0))&&i(v.get(s)),f&&i(v.get(nr)),t){case"add":o?f&&i(v.get("length")):(i(v.get(gs)),xs(e)&&i(v.get(Bi)));break;case"delete":o||(i(v.get(gs)),xs(e)&&i(v.get(Bi)));break;case"set":xs(e)&&i(v.get(gs));break}}pn()}function sc(e,t){const s=Fr.get(e);return s&&s.get(t)}function bs(e){const t=Ce(e);return t===e?t:(je(t,"iterate",nr),lt(e)?t:t.map(Ne))}function Yr(e){return je(e=Ce(e),"iterate",nr),e}const rc={__proto__:null,[Symbol.iterator](){return mi(this,Symbol.iterator,Ne)},concat(...e){return bs(this).concat(...e.map(t=>de(t)?bs(t):t))},entries(){return mi(this,"entries",e=>(e[1]=Ne(e[1]),e))},every(e,t){return xt(this,"every",e,t,void 0,arguments)},filter(e,t){return xt(this,"filter",e,t,s=>s.map(Ne),arguments)},find(e,t){return xt(this,"find",e,t,Ne,arguments)},findIndex(e,t){return xt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return xt(this,"findLast",e,t,Ne,arguments)},findLastIndex(e,t){return xt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return xt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Si(this,"includes",e)},indexOf(...e){return Si(this,"indexOf",e)},join(e){return bs(this).join(e)},lastIndexOf(...e){return Si(this,"lastIndexOf",e)},map(e,t){return xt(this,"map",e,t,void 0,arguments)},pop(){return qs(this,"pop")},push(...e){return qs(this,"push",e)},reduce(e,...t){return Hn(this,"reduce",e,t)},reduceRight(e,...t){return Hn(this,"reduceRight",e,t)},shift(){return qs(this,"shift")},some(e,t){return xt(this,"some",e,t,void 0,arguments)},splice(...e){return qs(this,"splice",e)},toReversed(){return bs(this).toReversed()},toSorted(e){return bs(this).toSorted(e)},toSpliced(...e){return bs(this).toSpliced(...e)},unshift(...e){return qs(this,"unshift",e)},values(){return mi(this,"values",Ne)}};function mi(e,t,s){const r=Yr(e),c=r[t]();return r!==e&&!lt(e)&&(c._next=c.next,c.next=()=>{const _=c._next();return _.value&&(_.value=s(_.value)),_}),c}const ic=Array.prototype;function xt(e,t,s,r,c,_){const v=Yr(e),i=v!==e&&!lt(e),o=v[t];if(o!==ic[t]){const u=o.apply(e,_);return i?Ne(u):u}let f=s;v!==e&&(i?f=function(u,m){return s.call(this,Ne(u),m,e)}:s.length>2&&(f=function(u,m){return s.call(this,u,m,e)}));const d=o.call(v,f,r);return i&&c?c(d):d}function Hn(e,t,s,r){const c=Yr(e);let _=s;return c!==e&&(lt(e)?s.length>3&&(_=function(v,i,o){return s.call(this,v,i,o,e)}):_=function(v,i,o){return s.call(this,v,Ne(i),o,e)}),c[t](_,...r)}function Si(e,t,s){const r=Ce(e);je(r,"iterate",nr);const c=r[t](...s);return(c===-1||c===!1)&&Sn(s[0])?(s[0]=Ce(s[0]),r[t](...s)):c}function qs(e,t,s=[]){Ot(),_n();const r=Ce(e)[t].apply(e,s);return pn(),Tt(),r}const nc=hn("__proto__,__v_isRef,__isVue"),oa=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(es));function oc(e){es(e)||(e=String(e));const t=Ce(this);return je(t,"has",e),t.hasOwnProperty(e)}class aa{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,r){if(s==="__v_skip")return t.__v_skip;const c=this._isReadonly,_=this._isShallow;if(s==="__v_isReactive")return!c;if(s==="__v_isReadonly")return c;if(s==="__v_isShallow")return _;if(s==="__v_raw")return r===(c?_?da:fa:_?ua:ha).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const v=de(t);if(!c){let o;if(v&&(o=rc[s]))return o;if(s==="hasOwnProperty")return oc}const i=Reflect.get(t,s,He(t)?t:r);return(es(s)?oa.has(s):nc(s))||(c||je(t,"get",s),_)?i:He(i)?v&&dn(s)?i:i.value:Oe(i)?c?mn(i):ei(i):i}}class la extends aa{constructor(t=!1){super(!1,t)}set(t,s,r,c){let _=t[s];if(!this._isShallow){const o=Yt(_);if(!lt(r)&&!Yt(r)&&(_=Ce(_),r=Ce(r)),!de(t)&&He(_)&&!He(r))return o?!1:(_.value=r,!0)}const v=de(t)&&dn(s)?Number(s)<t.length:Ee(t,s),i=Reflect.set(t,s,r,He(t)?t:c);return t===Ce(c)&&(v?Qt(r,_)&&At(t,"set",s,r):At(t,"add",s,r)),i}deleteProperty(t,s){const r=Ee(t,s);t[s];const c=Reflect.deleteProperty(t,s);return c&&r&&At(t,"delete",s,void 0),c}has(t,s){const r=Reflect.has(t,s);return(!es(s)||!oa.has(s))&&je(t,"has",s),r}ownKeys(t){return je(t,"iterate",de(t)?"length":gs),Reflect.ownKeys(t)}}class ca extends aa{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const ac=new la,lc=new ca,cc=new la(!0),hc=new ca(!0),Pi=e=>e,kr=e=>Reflect.getPrototypeOf(e);function uc(e,t,s){return function(...r){const c=this.__v_raw,_=Ce(c),v=xs(_),i=e==="entries"||e===Symbol.iterator&&v,o=e==="keys"&&v,f=c[e](...r),d=s?Pi:t?Hr:Ne;return!t&&je(_,"iterate",o?Bi:gs),{next(){const{value:u,done:m}=f.next();return m?{value:u,done:m}:{value:i?[d(u[0]),d(u[1])]:d(u),done:m}},[Symbol.iterator](){return this}}}}function Dr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function fc(e,t){const s={get(c){const _=this.__v_raw,v=Ce(_),i=Ce(c);e||(Qt(c,i)&&je(v,"get",c),je(v,"get",i));const{has:o}=kr(v),f=t?Pi:e?Hr:Ne;if(o.call(v,c))return f(_.get(c));if(o.call(v,i))return f(_.get(i));_!==v&&_.get(c)},get size(){const c=this.__v_raw;return!e&&je(Ce(c),"iterate",gs),Reflect.get(c,"size",c)},has(c){const _=this.__v_raw,v=Ce(_),i=Ce(c);return e||(Qt(c,i)&&je(v,"has",c),je(v,"has",i)),c===i?_.has(c):_.has(c)||_.has(i)},forEach(c,_){const v=this,i=v.__v_raw,o=Ce(i),f=t?Pi:e?Hr:Ne;return!e&&je(o,"iterate",gs),i.forEach((d,u)=>c.call(_,f(d),f(u),v))}};return Xe(s,e?{add:Dr("add"),set:Dr("set"),delete:Dr("delete"),clear:Dr("clear")}:{add(c){!t&&!lt(c)&&!Yt(c)&&(c=Ce(c));const _=Ce(this);return kr(_).has.call(_,c)||(_.add(c),At(_,"add",c,c)),this},set(c,_){!t&&!lt(_)&&!Yt(_)&&(_=Ce(_));const v=Ce(this),{has:i,get:o}=kr(v);let f=i.call(v,c);f||(c=Ce(c),f=i.call(v,c));const d=o.call(v,c);return v.set(c,_),f?Qt(_,d)&&At(v,"set",c,_):At(v,"add",c,_),this},delete(c){const _=Ce(this),{has:v,get:i}=kr(_);let o=v.call(_,c);o||(c=Ce(c),o=v.call(_,c)),i&&i.call(_,c);const f=_.delete(c);return o&&At(_,"delete",c,void 0),f},clear(){const c=Ce(this),_=c.size!==0,v=c.clear();return _&&At(c,"clear",void 0,void 0),v}}),["keys","values","entries",Symbol.iterator].forEach(c=>{s[c]=uc(c,e,t)}),s}function Zr(e,t){const s=fc(e,t);return(r,c,_)=>c==="__v_isReactive"?!e:c==="__v_isReadonly"?e:c==="__v_raw"?r:Reflect.get(Ee(s,c)&&c in r?s:r,c,_)}const dc={get:Zr(!1,!1)},_c={get:Zr(!1,!0)},pc={get:Zr(!0,!1)},gc={get:Zr(!0,!0)},ha=new WeakMap,ua=new WeakMap,fa=new WeakMap,da=new WeakMap;function vc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mc(e){return e.__v_skip||!Object.isExtensible(e)?0:vc(Wl(e))}function ei(e){return Yt(e)?e:ti(e,!1,ac,dc,ha)}function _a(e){return ti(e,!1,cc,_c,ua)}function mn(e){return ti(e,!0,lc,pc,fa)}function Sc(e){return ti(e,!0,hc,gc,da)}function ti(e,t,s,r,c){if(!Oe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const _=mc(e);if(_===0)return e;const v=c.get(e);if(v)return v;const i=new Proxy(e,_===2?r:s);return c.set(e,i),i}function Rs(e){return Yt(e)?Rs(e.__v_raw):!!(e&&e.__v_isReactive)}function Yt(e){return!!(e&&e.__v_isReadonly)}function lt(e){return!!(e&&e.__v_isShallow)}function Sn(e){return e?!!e.__v_raw:!1}function Ce(e){const t=e&&e.__v_raw;return t?Ce(t):e}function yc(e){return!Ee(e,"__v_skip")&&Object.isExtensible(e)&&Oi(e,"__v_skip",!0),e}const Ne=e=>Oe(e)?ei(e):e,Hr=e=>Oe(e)?mn(e):e;function He(e){return e?e.__v_isRef===!0:!1}function Fe(e){return bc(e,!1)}function bc(e,t){return He(e)?e:new Cc(e,t)}class Cc{constructor(t,s){this.dep=new vn,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:Ce(t),this._value=s?t:Ne(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,r=this.__v_isShallow||lt(t)||Yt(t);t=r?t:Ce(t),Qt(t,s)&&(this._rawValue=t,this._value=r?t:Ne(t),this.dep.trigger())}}function Ys(e){return He(e)?e.value:e}const wc={get:(e,t,s)=>t==="__v_raw"?e:Ys(Reflect.get(e,t,s)),set:(e,t,s,r)=>{const c=e[t];return He(c)&&!He(s)?(c.value=s,!0):Reflect.set(e,t,s,r)}};function pa(e){return Rs(e)?e:new Proxy(e,wc)}function Ec(e){const t=de(e)?new Array(e.length):{};for(const s in e)t[s]=Rc(e,s);return t}class xc{constructor(t,s,r){this._object=t,this._key=s,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return sc(Ce(this._object),this._key)}}function Rc(e,t,s){const r=e[t];return He(r)?r:new xc(e,t,s)}class kc{constructor(t,s,r){this.fn=t,this.setter=s,this._value=void 0,this.dep=new vn(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ir-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&De!==this)return ea(this,!0),!0}get value(){const t=this.dep.track();return ra(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Dc(e,t,s=!1){let r,c;return pe(e)?r=e:(r=e.get,c=e.set),new kc(r,c,s)}const Ar={},Nr=new WeakMap;let ns;function Ac(e,t=!1,s=ns){if(s){let r=Nr.get(s);r||Nr.set(s,r=[]),r.push(e)}}function Lc(e,t,s=ke){const{immediate:r,deep:c,once:_,scheduler:v,augmentJob:i,call:o}=s,f=p=>c?p:lt(p)||c===!1||c===0?Lt(p,1):Lt(p);let d,u,m,S,b=!1,g=!1;if(He(e)?(u=()=>e.value,b=lt(e)):Rs(e)?(u=()=>f(e),b=!0):de(e)?(g=!0,b=e.some(p=>Rs(p)||lt(p)),u=()=>e.map(p=>{if(He(p))return p.value;if(Rs(p))return f(p);if(pe(p))return o?o(p,2):p()})):pe(e)?t?u=o?()=>o(e,2):e:u=()=>{if(m){Ot();try{m()}finally{Tt()}}const p=ns;ns=d;try{return o?o(e,3,[S]):e(S)}finally{ns=p}}:u=Ct,t&&c){const p=u,C=c===!0?1/0:c;u=()=>Lt(p(),C)}const l=Yl(),h=()=>{d.stop(),l&&l.active&&fn(l.effects,d)};if(_&&t){const p=t;t=(...C)=>{p(...C),h()}}let n=g?new Array(e.length).fill(Ar):Ar;const a=p=>{if(!(!(d.flags&1)||!d.dirty&&!p))if(t){const C=d.run();if(c||b||(g?C.some((w,E)=>Qt(w,n[E])):Qt(C,n))){m&&m();const w=ns;ns=d;try{const E=[C,n===Ar?void 0:g&&n[0]===Ar?[]:n,S];n=C,o?o(t,3,E):t(...E)}finally{ns=w}}}else d.run()};return i&&i(a),d=new Yo(u),d.scheduler=v?()=>v(a,!1):a,S=p=>Ac(p,!1,d),m=d.onStop=()=>{const p=Nr.get(d);if(p){if(o)o(p,4);else for(const C of p)C();Nr.delete(d)}},t?r?a(!0):n=d.run():v?v(a.bind(null,!0),!0):d.run(),h.pause=d.pause.bind(d),h.resume=d.resume.bind(d),h.stop=h,h}function Lt(e,t=1/0,s){if(t<=0||!Oe(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,He(e))Lt(e.value,t,s);else if(de(e))for(let r=0;r<e.length;r++)Lt(e[r],t,s);else if(qo(e)||xs(e))e.forEach(r=>{Lt(r,t,s)});else if(Vo(e)){for(const r in e)Lt(e[r],t,s);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Lt(e[r],t,s)}return e}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function vr(e,t,s,r){try{return r?e(...r):e()}catch(c){si(c,t,s)}}function Et(e,t,s,r){if(pe(e)){const c=vr(e,t,s,r);return c&&Ko(c)&&c.catch(_=>{si(_,t,s)}),c}if(de(e)){const c=[];for(let _=0;_<e.length;_++)c.push(Et(e[_],t,s,r));return c}}function si(e,t,s,r=!0){const c=t?t.vnode:null,{errorHandler:_,throwUnhandledErrorInProduction:v}=t&&t.appContext.config||ke;if(t){let i=t.parent;const o=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${s}`;for(;i;){const d=i.ec;if(d){for(let u=0;u<d.length;u++)if(d[u](e,o,f)===!1)return}i=i.parent}if(_){Ot(),vr(_,null,10,[e,o,f]),Tt();return}}Oc(e,s,c,r,v)}function Oc(e,t,s,r=!0,c=!1){if(c)throw e;console.error(e)}const Ge=[];let vt=-1;const ks=[];let It=null,Cs=0;const ga=Promise.resolve();let Ur=null;function or(e){const t=Ur||ga;return e?t.then(this?e.bind(this):e):t}function Tc(e){let t=vt+1,s=Ge.length;for(;t<s;){const r=t+s>>>1,c=Ge[r],_=ar(c);_<e||_===e&&c.flags&2?t=r+1:s=r}return t}function yn(e){if(!(e.flags&1)){const t=ar(e),s=Ge[Ge.length-1];!s||!(e.flags&2)&&t>=ar(s)?Ge.push(e):Ge.splice(Tc(t),0,e),e.flags|=1,va()}}function va(){Ur||(Ur=ga.then(Sa))}function Mc(e){de(e)?ks.push(...e):It&&e.id===-1?It.splice(Cs+1,0,e):e.flags&1||(ks.push(e),e.flags|=1),va()}function Nn(e,t,s=vt+1){for(;s<Ge.length;s++){const r=Ge[s];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Ge.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function ma(e){if(ks.length){const t=[...new Set(ks)].sort((s,r)=>ar(s)-ar(r));if(ks.length=0,It){It.push(...t);return}for(It=t,Cs=0;Cs<It.length;Cs++){const s=It[Cs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}It=null,Cs=0}}const ar=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Sa(e){try{for(vt=0;vt<Ge.length;vt++){const t=Ge[vt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),vr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;vt<Ge.length;vt++){const t=Ge[vt];t&&(t.flags&=-2)}vt=-1,Ge.length=0,ma(),Ur=null,(Ge.length||ks.length)&&Sa()}}let at=null,ya=null;function $r(e){const t=at;return at=e,ya=e&&e.type.__scopeId||null,t}function Bc(e,t=at,s){if(!t||e._n)return e;const r=(...c)=>{r._d&&Qn(-1);const _=$r(t);let v;try{v=e(...c)}finally{$r(_),r._d&&Qn(1)}return v};return r._n=!0,r._c=!0,r._d=!0,r}function ba(e,t){if(at===null)return e;const s=ai(at),r=e.dirs||(e.dirs=[]);for(let c=0;c<t.length;c++){let[_,v,i,o=ke]=t[c];_&&(pe(_)&&(_={mounted:_,updated:_}),_.deep&&Lt(v),r.push({dir:_,instance:s,value:v,oldValue:void 0,arg:i,modifiers:o}))}return e}function rs(e,t,s,r){const c=e.dirs,_=t&&t.dirs;for(let v=0;v<c.length;v++){const i=c[v];_&&(i.oldValue=_[v].value);let o=i.dir[r];o&&(Ot(),Et(o,s,8,[e.el,i,e,t]),Tt())}}const Pc=Symbol("_vte"),Ic=e=>e.__isTeleport;function bn(e,t){e.shapeFlag&6&&e.component?(e.transition=t,bn(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ca(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Zs(e,t,s,r,c=!1){if(de(e)){e.forEach((b,g)=>Zs(b,t&&(de(t)?t[g]:t),s,r,c));return}if(er(r)&&!c){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Zs(e,t,s,r.component.subTree);return}const _=r.shapeFlag&4?ai(r.component):r.el,v=c?null:_,{i,r:o}=e,f=t&&t.r,d=i.refs===ke?i.refs={}:i.refs,u=i.setupState,m=Ce(u),S=u===ke?()=>!1:b=>Ee(m,b);if(f!=null&&f!==o&&(Pe(f)?(d[f]=null,S(f)&&(u[f]=null)):He(f)&&(f.value=null)),pe(o))vr(o,i,12,[v,d]);else{const b=Pe(o),g=He(o);if(b||g){const l=()=>{if(e.f){const h=b?S(o)?u[o]:d[o]:o.value;c?de(h)&&fn(h,_):de(h)?h.includes(_)||h.push(_):b?(d[o]=[_],S(o)&&(u[o]=d[o])):(o.value=[_],e.k&&(d[e.k]=o.value))}else b?(d[o]=v,S(o)&&(u[o]=v)):g&&(o.value=v,e.k&&(d[e.k]=v))};v?(l.id=-1,st(l,s)):l()}}}Xr().requestIdleCallback;Xr().cancelIdleCallback;const er=e=>!!e.type.__asyncLoader,wa=e=>e.type.__isKeepAlive;function Fc(e,t){Ea(e,"a",t)}function Hc(e,t){Ea(e,"da",t)}function Ea(e,t,s=Je){const r=e.__wdc||(e.__wdc=()=>{let c=s;for(;c;){if(c.isDeactivated)return;c=c.parent}return e()});if(ri(t,r,s),s){let c=s.parent;for(;c&&c.parent;)wa(c.parent.vnode)&&Nc(r,t,s,c),c=c.parent}}function Nc(e,t,s,r){const c=ri(t,e,r,!0);Sr(()=>{fn(r[t],c)},s)}function ri(e,t,s=Je,r=!1){if(s){const c=s[e]||(s[e]=[]),_=t.__weh||(t.__weh=(...v)=>{Ot();const i=yr(s),o=Et(t,s,e,v);return i(),Tt(),o});return r?c.unshift(_):c.push(_),_}}const Mt=e=>(t,s=Je)=>{(!cr||e==="sp")&&ri(e,(...r)=>t(...r),s)},Uc=Mt("bm"),mr=Mt("m"),$c=Mt("bu"),Wc=Mt("u"),jc=Mt("bum"),Sr=Mt("um"),qc=Mt("sp"),Kc=Mt("rtg"),zc=Mt("rtc");function Vc(e,t=Je){ri("ec",e,t)}const Qc=Symbol.for("v-ndc");function xa(e,t,s,r){let c;const _=s,v=de(e);if(v||Pe(e)){const i=v&&Rs(e);let o=!1,f=!1;i&&(o=!lt(e),f=Yt(e),e=Yr(e)),c=new Array(e.length);for(let d=0,u=e.length;d<u;d++)c[d]=t(o?f?Hr(Ne(e[d])):Ne(e[d]):e[d],d,void 0,_)}else if(typeof e=="number"){c=new Array(e);for(let i=0;i<e;i++)c[i]=t(i+1,i,void 0,_)}else if(Oe(e))if(e[Symbol.iterator])c=Array.from(e,(i,o)=>t(i,o,void 0,_));else{const i=Object.keys(e);c=new Array(i.length);for(let o=0,f=i.length;o<f;o++){const d=i[o];c[o]=t(e[d],d,o,_)}}else c=[];return c}const Ii=e=>e?Va(e)?ai(e):Ii(e.parent):null,tr=Xe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ii(e.parent),$root:e=>Ii(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ka(e),$forceUpdate:e=>e.f||(e.f=()=>{yn(e.update)}),$nextTick:e=>e.n||(e.n=or.bind(e.proxy)),$watch:e=>vh.bind(e)}),yi=(e,t)=>e!==ke&&!e.__isScriptSetup&&Ee(e,t),Gc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:r,data:c,props:_,accessCache:v,type:i,appContext:o}=e;let f;if(t[0]!=="$"){const S=v[t];if(S!==void 0)switch(S){case 1:return r[t];case 2:return c[t];case 4:return s[t];case 3:return _[t]}else{if(yi(r,t))return v[t]=1,r[t];if(c!==ke&&Ee(c,t))return v[t]=2,c[t];if((f=e.propsOptions[0])&&Ee(f,t))return v[t]=3,_[t];if(s!==ke&&Ee(s,t))return v[t]=4,s[t];Fi&&(v[t]=0)}}const d=tr[t];let u,m;if(d)return t==="$attrs"&&je(e.attrs,"get",""),d(e);if((u=i.__cssModules)&&(u=u[t]))return u;if(s!==ke&&Ee(s,t))return v[t]=4,s[t];if(m=o.config.globalProperties,Ee(m,t))return m[t]},set({_:e},t,s){const{data:r,setupState:c,ctx:_}=e;return yi(c,t)?(c[t]=s,!0):r!==ke&&Ee(r,t)?(r[t]=s,!0):Ee(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(_[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:r,appContext:c,propsOptions:_}},v){let i;return!!s[v]||e!==ke&&Ee(e,v)||yi(t,v)||(i=_[0])&&Ee(i,v)||Ee(r,v)||Ee(tr,v)||Ee(c.config.globalProperties,v)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:Ee(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Un(e){return de(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Fi=!0;function Jc(e){const t=ka(e),s=e.proxy,r=e.ctx;Fi=!1,t.beforeCreate&&$n(t.beforeCreate,e,"bc");const{data:c,computed:_,methods:v,watch:i,provide:o,inject:f,created:d,beforeMount:u,mounted:m,beforeUpdate:S,updated:b,activated:g,deactivated:l,beforeDestroy:h,beforeUnmount:n,destroyed:a,unmounted:p,render:C,renderTracked:w,renderTriggered:E,errorCaptured:y,serverPrefetch:x,expose:A,inheritAttrs:B,components:P,directives:L,filters:W}=t;if(f&&Xc(f,r,null),v)for(const Y in v){const V=v[Y];pe(V)&&(r[Y]=V.bind(s))}if(c){const Y=c.call(s,s);Oe(Y)&&(e.data=ei(Y))}if(Fi=!0,_)for(const Y in _){const V=_[Y],R=pe(V)?V.bind(s,s):pe(V.get)?V.get.bind(s,s):Ct,O=!pe(V)&&pe(V.set)?V.set.bind(s):Ct,M=Ga({get:R,set:O});Object.defineProperty(r,Y,{enumerable:!0,configurable:!0,get:()=>M.value,set:F=>M.value=F})}if(i)for(const Y in i)Ra(i[Y],r,s,Y);if(o){const Y=pe(o)?o.call(s):o;Reflect.ownKeys(Y).forEach(V=>{rh(V,Y[V])})}d&&$n(d,e,"c");function J(Y,V){de(V)?V.forEach(R=>Y(R.bind(s))):V&&Y(V.bind(s))}if(J(Uc,u),J(mr,m),J($c,S),J(Wc,b),J(Fc,g),J(Hc,l),J(Vc,y),J(zc,w),J(Kc,E),J(jc,n),J(Sr,p),J(qc,x),de(A))if(A.length){const Y=e.exposed||(e.exposed={});A.forEach(V=>{Object.defineProperty(Y,V,{get:()=>s[V],set:R=>s[V]=R,enumerable:!0})})}else e.exposed||(e.exposed={});C&&e.render===Ct&&(e.render=C),B!=null&&(e.inheritAttrs=B),P&&(e.components=P),L&&(e.directives=L),x&&Ca(e)}function Xc(e,t,s=Ct){de(e)&&(e=Hi(e));for(const r in e){const c=e[r];let _;Oe(c)?"default"in c?_=sr(c.from||r,c.default,!0):_=sr(c.from||r):_=sr(c),He(_)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>_.value,set:v=>_.value=v}):t[r]=_}}function $n(e,t,s){Et(de(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,s)}function Ra(e,t,s,r){let c=r.includes(".")?Ua(s,r):()=>s[r];if(Pe(e)){const _=t[e];pe(_)&&zt(c,_)}else if(pe(e))zt(c,e.bind(s));else if(Oe(e))if(de(e))e.forEach(_=>Ra(_,t,s,r));else{const _=pe(e.handler)?e.handler.bind(s):t[e.handler];pe(_)&&zt(c,_,e)}}function ka(e){const t=e.type,{mixins:s,extends:r}=t,{mixins:c,optionsCache:_,config:{optionMergeStrategies:v}}=e.appContext,i=_.get(t);let o;return i?o=i:!c.length&&!s&&!r?o=t:(o={},c.length&&c.forEach(f=>Wr(o,f,v,!0)),Wr(o,t,v)),Oe(t)&&_.set(t,o),o}function Wr(e,t,s,r=!1){const{mixins:c,extends:_}=t;_&&Wr(e,_,s,!0),c&&c.forEach(v=>Wr(e,v,s,!0));for(const v in t)if(!(r&&v==="expose")){const i=Yc[v]||s&&s[v];e[v]=i?i(e[v],t[v]):t[v]}return e}const Yc={data:Wn,props:jn,emits:jn,methods:Vs,computed:Vs,beforeCreate:ze,created:ze,beforeMount:ze,mounted:ze,beforeUpdate:ze,updated:ze,beforeDestroy:ze,beforeUnmount:ze,destroyed:ze,unmounted:ze,activated:ze,deactivated:ze,errorCaptured:ze,serverPrefetch:ze,components:Vs,directives:Vs,watch:eh,provide:Wn,inject:Zc};function Wn(e,t){return t?e?function(){return Xe(pe(e)?e.call(this,this):e,pe(t)?t.call(this,this):t)}:t:e}function Zc(e,t){return Vs(Hi(e),Hi(t))}function Hi(e){if(de(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function ze(e,t){return e?[...new Set([].concat(e,t))]:t}function Vs(e,t){return e?Xe(Object.create(null),e,t):t}function jn(e,t){return e?de(e)&&de(t)?[...new Set([...e,...t])]:Xe(Object.create(null),Un(e),Un(t??{})):t}function eh(e,t){if(!e)return t;if(!t)return e;const s=Xe(Object.create(null),e);for(const r in t)s[r]=ze(e[r],t[r]);return s}function Da(){return{app:null,config:{isNativeTag:Ul,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let th=0;function sh(e,t){return function(r,c=null){pe(r)||(r=Xe({},r)),c!=null&&!Oe(c)&&(c=null);const _=Da(),v=new WeakSet,i=[];let o=!1;const f=_.app={_uid:th++,_component:r,_props:c,_container:null,_context:_,_instance:null,version:Hh,get config(){return _.config},set config(d){},use(d,...u){return v.has(d)||(d&&pe(d.install)?(v.add(d),d.install(f,...u)):pe(d)&&(v.add(d),d(f,...u))),f},mixin(d){return _.mixins.includes(d)||_.mixins.push(d),f},component(d,u){return u?(_.components[d]=u,f):_.components[d]},directive(d,u){return u?(_.directives[d]=u,f):_.directives[d]},mount(d,u,m){if(!o){const S=f._ceVNode||wt(r,c);return S.appContext=_,m===!0?m="svg":m===!1&&(m=void 0),e(S,d,m),o=!0,f._container=d,d.__vue_app__=f,ai(S.component)}},onUnmount(d){i.push(d)},unmount(){o&&(Et(i,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,u){return _.provides[d]=u,f},runWithContext(d){const u=vs;vs=f;try{return d()}finally{vs=u}}};return f}}let vs=null;function rh(e,t){if(Je){let s=Je.provides;const r=Je.parent&&Je.parent.provides;r===s&&(s=Je.provides=Object.create(r)),s[e]=t}}function sr(e,t,s=!1){const r=za();if(r||vs){let c=vs?vs._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(c&&e in c)return c[e];if(arguments.length>1)return s&&pe(t)?t.call(r&&r.proxy):t}}function ih(){return!!(za()||vs)}const Aa={},La=()=>Object.create(Aa),Oa=e=>Object.getPrototypeOf(e)===Aa;function nh(e,t,s,r=!1){const c={},_=La();e.propsDefaults=Object.create(null),Ta(e,t,c,_);for(const v in e.propsOptions[0])v in c||(c[v]=void 0);s?e.props=r?c:_a(c):e.type.props?e.props=c:e.props=_,e.attrs=_}function oh(e,t,s,r){const{props:c,attrs:_,vnode:{patchFlag:v}}=e,i=Ce(c),[o]=e.propsOptions;let f=!1;if((r||v>0)&&!(v&16)){if(v&8){const d=e.vnode.dynamicProps;for(let u=0;u<d.length;u++){let m=d[u];if(ii(e.emitsOptions,m))continue;const S=t[m];if(o)if(Ee(_,m))S!==_[m]&&(_[m]=S,f=!0);else{const b=Xt(m);c[b]=Ni(o,i,b,S,e,!1)}else S!==_[m]&&(_[m]=S,f=!0)}}}else{Ta(e,t,c,_)&&(f=!0);let d;for(const u in i)(!t||!Ee(t,u)&&((d=ts(u))===u||!Ee(t,d)))&&(o?s&&(s[u]!==void 0||s[d]!==void 0)&&(c[u]=Ni(o,i,u,void 0,e,!0)):delete c[u]);if(_!==i)for(const u in _)(!t||!Ee(t,u))&&(delete _[u],f=!0)}f&&At(e.attrs,"set","")}function Ta(e,t,s,r){const[c,_]=e.propsOptions;let v=!1,i;if(t)for(let o in t){if(Gs(o))continue;const f=t[o];let d;c&&Ee(c,d=Xt(o))?!_||!_.includes(d)?s[d]=f:(i||(i={}))[d]=f:ii(e.emitsOptions,o)||(!(o in r)||f!==r[o])&&(r[o]=f,v=!0)}if(_){const o=Ce(s),f=i||ke;for(let d=0;d<_.length;d++){const u=_[d];s[u]=Ni(c,o,u,f[u],e,!Ee(f,u))}}return v}function Ni(e,t,s,r,c,_){const v=e[s];if(v!=null){const i=Ee(v,"default");if(i&&r===void 0){const o=v.default;if(v.type!==Function&&!v.skipFactory&&pe(o)){const{propsDefaults:f}=c;if(s in f)r=f[s];else{const d=yr(c);r=f[s]=o.call(null,t),d()}}else r=o;c.ce&&c.ce._setProp(s,r)}v[0]&&(_&&!i?r=!1:v[1]&&(r===""||r===ts(s))&&(r=!0))}return r}const ah=new WeakMap;function Ma(e,t,s=!1){const r=s?ah:t.propsCache,c=r.get(e);if(c)return c;const _=e.props,v={},i=[];let o=!1;if(!pe(e)){const d=u=>{o=!0;const[m,S]=Ma(u,t,!0);Xe(v,m),S&&i.push(...S)};!s&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!_&&!o)return Oe(e)&&r.set(e,Es),Es;if(de(_))for(let d=0;d<_.length;d++){const u=Xt(_[d]);qn(u)&&(v[u]=ke)}else if(_)for(const d in _){const u=Xt(d);if(qn(u)){const m=_[d],S=v[u]=de(m)||pe(m)?{type:m}:Xe({},m),b=S.type;let g=!1,l=!0;if(de(b))for(let h=0;h<b.length;++h){const n=b[h],a=pe(n)&&n.name;if(a==="Boolean"){g=!0;break}else a==="String"&&(l=!1)}else g=pe(b)&&b.name==="Boolean";S[0]=g,S[1]=l,(g||Ee(S,"default"))&&i.push(u)}}const f=[v,i];return Oe(e)&&r.set(e,f),f}function qn(e){return e[0]!=="$"&&!Gs(e)}const Cn=e=>e==="_"||e==="__"||e==="_ctx"||e==="$stable",wn=e=>de(e)?e.map(bt):[bt(e)],lh=(e,t,s)=>{if(t._n)return t;const r=Bc((...c)=>wn(t(...c)),s);return r._c=!1,r},Ba=(e,t,s)=>{const r=e._ctx;for(const c in e){if(Cn(c))continue;const _=e[c];if(pe(_))t[c]=lh(c,_,r);else if(_!=null){const v=wn(_);t[c]=()=>v}}},Pa=(e,t)=>{const s=wn(t);e.slots.default=()=>s},Ia=(e,t,s)=>{for(const r in t)(s||!Cn(r))&&(e[r]=t[r])},ch=(e,t,s)=>{const r=e.slots=La();if(e.vnode.shapeFlag&32){const c=t.__;c&&Oi(r,"__",c,!0);const _=t._;_?(Ia(r,t,s),s&&Oi(r,"_",_,!0)):Ba(t,r)}else t&&Pa(e,t)},hh=(e,t,s)=>{const{vnode:r,slots:c}=e;let _=!0,v=ke;if(r.shapeFlag&32){const i=t._;i?s&&i===1?_=!1:Ia(c,t,s):(_=!t.$stable,Ba(t,c)),v=t}else t&&(Pa(e,t),v={default:1});if(_)for(const i in c)!Cn(i)&&v[i]==null&&delete c[i]},st=Eh;function uh(e){return fh(e)}function fh(e,t){const s=Xr();s.__VUE__=!0;const{insert:r,remove:c,patchProp:_,createElement:v,createText:i,createComment:o,setText:f,setElementText:d,parentNode:u,nextSibling:m,setScopeId:S=Ct,insertStaticContent:b}=e,g=(D,T,N,q=null,K=null,U=null,se=void 0,te=null,Z=!!T.dynamicChildren)=>{if(D===T)return;D&&!Ks(D,T)&&(q=H(D),F(D,K,U,!0),D=null),T.patchFlag===-2&&(Z=!1,T.dynamicChildren=null);const{type:X,ref:le,shapeFlag:ee}=T;switch(X){case ni:l(D,T,N,q);break;case Zt:h(D,T,N,q);break;case Ci:D==null&&n(T,N,q,se);break;case ut:P(D,T,N,q,K,U,se,te,Z);break;default:ee&1?C(D,T,N,q,K,U,se,te,Z):ee&6?L(D,T,N,q,K,U,se,te,Z):(ee&64||ee&128)&&X.process(D,T,N,q,K,U,se,te,Z,j)}le!=null&&K?Zs(le,D&&D.ref,U,T||D,!T):le==null&&D&&D.ref!=null&&Zs(D.ref,null,U,D,!0)},l=(D,T,N,q)=>{if(D==null)r(T.el=i(T.children),N,q);else{const K=T.el=D.el;T.children!==D.children&&f(K,T.children)}},h=(D,T,N,q)=>{D==null?r(T.el=o(T.children||""),N,q):T.el=D.el},n=(D,T,N,q)=>{[D.el,D.anchor]=b(D.children,T,N,q,D.el,D.anchor)},a=({el:D,anchor:T},N,q)=>{let K;for(;D&&D!==T;)K=m(D),r(D,N,q),D=K;r(T,N,q)},p=({el:D,anchor:T})=>{let N;for(;D&&D!==T;)N=m(D),c(D),D=N;c(T)},C=(D,T,N,q,K,U,se,te,Z)=>{T.type==="svg"?se="svg":T.type==="math"&&(se="mathml"),D==null?w(T,N,q,K,U,se,te,Z):x(D,T,K,U,se,te,Z)},w=(D,T,N,q,K,U,se,te)=>{let Z,X;const{props:le,shapeFlag:ee,transition:ae,dirs:ce}=D;if(Z=D.el=v(D.type,U,le&&le.is,le),ee&8?d(Z,D.children):ee&16&&y(D.children,Z,null,q,K,bi(D,U),se,te),ce&&rs(D,null,q,"created"),E(Z,D,D.scopeId,se,q),le){for(const we in le)we!=="value"&&!Gs(we)&&_(Z,we,null,le[we],U,q);"value"in le&&_(Z,"value",null,le.value,U),(X=le.onVnodeBeforeMount)&&pt(X,q,D)}ce&&rs(D,null,q,"beforeMount");const ge=dh(K,ae);ge&&ae.beforeEnter(Z),r(Z,T,N),((X=le&&le.onVnodeMounted)||ge||ce)&&st(()=>{X&&pt(X,q,D),ge&&ae.enter(Z),ce&&rs(D,null,q,"mounted")},K)},E=(D,T,N,q,K)=>{if(N&&S(D,N),q)for(let U=0;U<q.length;U++)S(D,q[U]);if(K){let U=K.subTree;if(T===U||Wa(U.type)&&(U.ssContent===T||U.ssFallback===T)){const se=K.vnode;E(D,se,se.scopeId,se.slotScopeIds,K.parent)}}},y=(D,T,N,q,K,U,se,te,Z=0)=>{for(let X=Z;X<D.length;X++){const le=D[X]=te?Ft(D[X]):bt(D[X]);g(null,le,T,N,q,K,U,se,te)}},x=(D,T,N,q,K,U,se)=>{const te=T.el=D.el;let{patchFlag:Z,dynamicChildren:X,dirs:le}=T;Z|=D.patchFlag&16;const ee=D.props||ke,ae=T.props||ke;let ce;if(N&&is(N,!1),(ce=ae.onVnodeBeforeUpdate)&&pt(ce,N,T,D),le&&rs(T,D,N,"beforeUpdate"),N&&is(N,!0),(ee.innerHTML&&ae.innerHTML==null||ee.textContent&&ae.textContent==null)&&d(te,""),X?A(D.dynamicChildren,X,te,N,q,bi(T,K),U):se||V(D,T,te,null,N,q,bi(T,K),U,!1),Z>0){if(Z&16)B(te,ee,ae,N,K);else if(Z&2&&ee.class!==ae.class&&_(te,"class",null,ae.class,K),Z&4&&_(te,"style",ee.style,ae.style,K),Z&8){const ge=T.dynamicProps;for(let we=0;we<ge.length;we++){const ve=ge[we],Ie=ee[ve],Le=ae[ve];(Le!==Ie||ve==="value")&&_(te,ve,Ie,Le,K,N)}}Z&1&&D.children!==T.children&&d(te,T.children)}else!se&&X==null&&B(te,ee,ae,N,K);((ce=ae.onVnodeUpdated)||le)&&st(()=>{ce&&pt(ce,N,T,D),le&&rs(T,D,N,"updated")},q)},A=(D,T,N,q,K,U,se)=>{for(let te=0;te<T.length;te++){const Z=D[te],X=T[te],le=Z.el&&(Z.type===ut||!Ks(Z,X)||Z.shapeFlag&198)?u(Z.el):N;g(Z,X,le,null,q,K,U,se,!0)}},B=(D,T,N,q,K)=>{if(T!==N){if(T!==ke)for(const U in T)!Gs(U)&&!(U in N)&&_(D,U,T[U],null,K,q);for(const U in N){if(Gs(U))continue;const se=N[U],te=T[U];se!==te&&U!=="value"&&_(D,U,te,se,K,q)}"value"in N&&_(D,"value",T.value,N.value,K)}},P=(D,T,N,q,K,U,se,te,Z)=>{const X=T.el=D?D.el:i(""),le=T.anchor=D?D.anchor:i("");let{patchFlag:ee,dynamicChildren:ae,slotScopeIds:ce}=T;ce&&(te=te?te.concat(ce):ce),D==null?(r(X,N,q),r(le,N,q),y(T.children||[],N,le,K,U,se,te,Z)):ee>0&&ee&64&&ae&&D.dynamicChildren?(A(D.dynamicChildren,ae,N,K,U,se,te),(T.key!=null||K&&T===K.subTree)&&Fa(D,T,!0)):V(D,T,N,le,K,U,se,te,Z)},L=(D,T,N,q,K,U,se,te,Z)=>{T.slotScopeIds=te,D==null?T.shapeFlag&512?K.ctx.activate(T,N,q,se,Z):W(T,N,q,K,U,se,Z):z(D,T,Z)},W=(D,T,N,q,K,U,se)=>{const te=D.component=Th(D,q,K);if(wa(D)&&(te.ctx.renderer=j),Mh(te,!1,se),te.asyncDep){if(K&&K.registerDep(te,J,se),!D.el){const Z=te.subTree=wt(Zt);h(null,Z,T,N),D.placeholder=Z.el}}else J(te,D,T,N,K,U,se)},z=(D,T,N)=>{const q=T.component=D.component;if(Ch(D,T,N))if(q.asyncDep&&!q.asyncResolved){Y(q,T,N);return}else q.next=T,q.update();else T.el=D.el,q.vnode=T},J=(D,T,N,q,K,U,se)=>{const te=()=>{if(D.isMounted){let{next:ee,bu:ae,u:ce,parent:ge,vnode:we}=D;{const be=Ha(D);if(be){ee&&(ee.el=we.el,Y(D,ee,se)),be.asyncDep.then(()=>{D.isUnmounted||te()});return}}let ve=ee,Ie;is(D,!1),ee?(ee.el=we.el,Y(D,ee,se)):ee=we,ae&&Or(ae),(Ie=ee.props&&ee.props.onVnodeBeforeUpdate)&&pt(Ie,ge,ee,we),is(D,!0);const Le=zn(D),Ue=D.subTree;D.subTree=Le,g(Ue,Le,u(Ue.el),H(Ue),D,K,U),ee.el=Le.el,ve===null&&wh(D,Le.el),ce&&st(ce,K),(Ie=ee.props&&ee.props.onVnodeUpdated)&&st(()=>pt(Ie,ge,ee,we),K)}else{let ee;const{el:ae,props:ce}=T,{bm:ge,m:we,parent:ve,root:Ie,type:Le}=D,Ue=er(T);is(D,!1),ge&&Or(ge),!Ue&&(ee=ce&&ce.onVnodeBeforeMount)&&pt(ee,ve,T),is(D,!0);{Ie.ce&&Ie.ce._def.shadowRoot!==!1&&Ie.ce._injectChildStyle(Le);const be=D.subTree=zn(D);g(null,be,N,q,D,K,U),T.el=be.el}if(we&&st(we,K),!Ue&&(ee=ce&&ce.onVnodeMounted)){const be=T;st(()=>pt(ee,ve,be),K)}(T.shapeFlag&256||ve&&er(ve.vnode)&&ve.vnode.shapeFlag&256)&&D.a&&st(D.a,K),D.isMounted=!0,T=N=q=null}};D.scope.on();const Z=D.effect=new Yo(te);D.scope.off();const X=D.update=Z.run.bind(Z),le=D.job=Z.runIfDirty.bind(Z);le.i=D,le.id=D.uid,Z.scheduler=()=>yn(le),is(D,!0),X()},Y=(D,T,N)=>{T.component=D;const q=D.vnode.props;D.vnode=T,D.next=null,oh(D,T.props,q,N),hh(D,T.children,N),Ot(),Nn(D),Tt()},V=(D,T,N,q,K,U,se,te,Z=!1)=>{const X=D&&D.children,le=D?D.shapeFlag:0,ee=T.children,{patchFlag:ae,shapeFlag:ce}=T;if(ae>0){if(ae&128){O(X,ee,N,q,K,U,se,te,Z);return}else if(ae&256){R(X,ee,N,q,K,U,se,te,Z);return}}ce&8?(le&16&&ue(X,K,U),ee!==X&&d(N,ee)):le&16?ce&16?O(X,ee,N,q,K,U,se,te,Z):ue(X,K,U,!0):(le&8&&d(N,""),ce&16&&y(ee,N,q,K,U,se,te,Z))},R=(D,T,N,q,K,U,se,te,Z)=>{D=D||Es,T=T||Es;const X=D.length,le=T.length,ee=Math.min(X,le);let ae;for(ae=0;ae<ee;ae++){const ce=T[ae]=Z?Ft(T[ae]):bt(T[ae]);g(D[ae],ce,N,null,K,U,se,te,Z)}X>le?ue(D,K,U,!0,!1,ee):y(T,N,q,K,U,se,te,Z,ee)},O=(D,T,N,q,K,U,se,te,Z)=>{let X=0;const le=T.length;let ee=D.length-1,ae=le-1;for(;X<=ee&&X<=ae;){const ce=D[X],ge=T[X]=Z?Ft(T[X]):bt(T[X]);if(Ks(ce,ge))g(ce,ge,N,null,K,U,se,te,Z);else break;X++}for(;X<=ee&&X<=ae;){const ce=D[ee],ge=T[ae]=Z?Ft(T[ae]):bt(T[ae]);if(Ks(ce,ge))g(ce,ge,N,null,K,U,se,te,Z);else break;ee--,ae--}if(X>ee){if(X<=ae){const ce=ae+1,ge=ce<le?T[ce].el:q;for(;X<=ae;)g(null,T[X]=Z?Ft(T[X]):bt(T[X]),N,ge,K,U,se,te,Z),X++}}else if(X>ae)for(;X<=ee;)F(D[X],K,U,!0),X++;else{const ce=X,ge=X,we=new Map;for(X=ge;X<=ae;X++){const tt=T[X]=Z?Ft(T[X]):bt(T[X]);tt.key!=null&&we.set(tt.key,X)}let ve,Ie=0;const Le=ae-ge+1;let Ue=!1,be=0;const ss=new Array(Le);for(X=0;X<Le;X++)ss[X]=0;for(X=ce;X<=ee;X++){const tt=D[X];if(Ie>=Le){F(tt,K,U,!0);continue}let _t;if(tt.key!=null)_t=we.get(tt.key);else for(ve=ge;ve<=ae;ve++)if(ss[ve-ge]===0&&Ks(tt,T[ve])){_t=ve;break}_t===void 0?F(tt,K,U,!0):(ss[_t-ge]=X+1,_t>=be?be=_t:Ue=!0,g(tt,T[_t],N,null,K,U,se,te,Z),Ie++)}const Tn=Ue?_h(ss):Es;for(ve=Tn.length-1,X=Le-1;X>=0;X--){const tt=ge+X,_t=T[tt],Mn=T[tt+1],Bn=tt+1<le?Mn.el||Mn.placeholder:q;ss[X]===0?g(null,_t,N,Bn,K,U,se,te,Z):Ue&&(ve<0||X!==Tn[ve]?M(_t,N,Bn,2):ve--)}}},M=(D,T,N,q,K=null)=>{const{el:U,type:se,transition:te,children:Z,shapeFlag:X}=D;if(X&6){M(D.component.subTree,T,N,q);return}if(X&128){D.suspense.move(T,N,q);return}if(X&64){se.move(D,T,N,j);return}if(se===ut){r(U,T,N);for(let ee=0;ee<Z.length;ee++)M(Z[ee],T,N,q);r(D.anchor,T,N);return}if(se===Ci){a(D,T,N);return}if(q!==2&&X&1&&te)if(q===0)te.beforeEnter(U),r(U,T,N),st(()=>te.enter(U),K);else{const{leave:ee,delayLeave:ae,afterLeave:ce}=te,ge=()=>{D.ctx.isUnmounted?c(U):r(U,T,N)},we=()=>{ee(U,()=>{ge(),ce&&ce()})};ae?ae(U,ge,we):we()}else r(U,T,N)},F=(D,T,N,q=!1,K=!1)=>{const{type:U,props:se,ref:te,children:Z,dynamicChildren:X,shapeFlag:le,patchFlag:ee,dirs:ae,cacheIndex:ce}=D;if(ee===-2&&(K=!1),te!=null&&(Ot(),Zs(te,null,N,D,!0),Tt()),ce!=null&&(T.renderCache[ce]=void 0),le&256){T.ctx.deactivate(D);return}const ge=le&1&&ae,we=!er(D);let ve;if(we&&(ve=se&&se.onVnodeBeforeUnmount)&&pt(ve,T,D),le&6)he(D.component,N,q);else{if(le&128){D.suspense.unmount(N,q);return}ge&&rs(D,null,T,"beforeUnmount"),le&64?D.type.remove(D,T,N,j,q):X&&!X.hasOnce&&(U!==ut||ee>0&&ee&64)?ue(X,T,N,!1,!0):(U===ut&&ee&384||!K&&le&16)&&ue(Z,T,N),q&&Q(D)}(we&&(ve=se&&se.onVnodeUnmounted)||ge)&&st(()=>{ve&&pt(ve,T,D),ge&&rs(D,null,T,"unmounted")},N)},Q=D=>{const{type:T,el:N,anchor:q,transition:K}=D;if(T===ut){re(N,q);return}if(T===Ci){p(D);return}const U=()=>{c(N),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(D.shapeFlag&1&&K&&!K.persisted){const{leave:se,delayLeave:te}=K,Z=()=>se(N,U);te?te(D.el,U,Z):Z()}else U()},re=(D,T)=>{let N;for(;D!==T;)N=m(D),c(D),D=N;c(T)},he=(D,T,N)=>{const{bum:q,scope:K,job:U,subTree:se,um:te,m:Z,a:X,parent:le,slots:{__:ee}}=D;Kn(Z),Kn(X),q&&Or(q),le&&de(ee)&&ee.forEach(ae=>{le.renderCache[ae]=void 0}),K.stop(),U&&(U.flags|=8,F(se,D,T,N)),te&&st(te,T),st(()=>{D.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},ue=(D,T,N,q=!1,K=!1,U=0)=>{for(let se=U;se<D.length;se++)F(D[se],T,N,q,K)},H=D=>{if(D.shapeFlag&6)return H(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const T=m(D.anchor||D.el),N=T&&T[Pc];return N?m(N):T};let k=!1;const G=(D,T,N)=>{D==null?T._vnode&&F(T._vnode,null,null,!0):g(T._vnode||null,D,T,null,null,null,N),T._vnode=D,k||(k=!0,Nn(),ma(),k=!1)},j={p:g,um:F,m:M,r:Q,mt:W,mc:y,pc:V,pbc:A,n:H,o:e};return{render:G,hydrate:void 0,createApp:sh(G)}}function bi({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function is({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function dh(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Fa(e,t,s=!1){const r=e.children,c=t.children;if(de(r)&&de(c))for(let _=0;_<r.length;_++){const v=r[_];let i=c[_];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=c[_]=Ft(c[_]),i.el=v.el),!s&&i.patchFlag!==-2&&Fa(v,i)),i.type===ni&&(i.el=v.el),i.type===Zt&&!i.el&&(i.el=v.el)}}function _h(e){const t=e.slice(),s=[0];let r,c,_,v,i;const o=e.length;for(r=0;r<o;r++){const f=e[r];if(f!==0){if(c=s[s.length-1],e[c]<f){t[r]=c,s.push(r);continue}for(_=0,v=s.length-1;_<v;)i=_+v>>1,e[s[i]]<f?_=i+1:v=i;f<e[s[_]]&&(_>0&&(t[r]=s[_-1]),s[_]=r)}}for(_=s.length,v=s[_-1];_-- >0;)s[_]=v,v=t[v];return s}function Ha(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ha(t)}function Kn(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const ph=Symbol.for("v-scx"),gh=()=>sr(ph);function zt(e,t,s){return Na(e,t,s)}function Na(e,t,s=ke){const{immediate:r,deep:c,flush:_,once:v}=s,i=Xe({},s),o=t&&r||!t&&_!=="post";let f;if(cr){if(_==="sync"){const S=gh();f=S.__watcherHandles||(S.__watcherHandles=[])}else if(!o){const S=()=>{};return S.stop=Ct,S.resume=Ct,S.pause=Ct,S}}const d=Je;i.call=(S,b,g)=>Et(S,d,b,g);let u=!1;_==="post"?i.scheduler=S=>{st(S,d&&d.suspense)}:_!=="sync"&&(u=!0,i.scheduler=(S,b)=>{b?S():yn(S)}),i.augmentJob=S=>{t&&(S.flags|=4),u&&(S.flags|=2,d&&(S.id=d.uid,S.i=d))};const m=Lc(e,t,i);return cr&&(f?f.push(m):o&&m()),m}function vh(e,t,s){const r=this.proxy,c=Pe(e)?e.includes(".")?Ua(r,e):()=>r[e]:e.bind(r,r);let _;pe(t)?_=t:(_=t.handler,s=t);const v=yr(this),i=Na(c,_.bind(r),s);return v(),i}function Ua(e,t){const s=t.split(".");return()=>{let r=e;for(let c=0;c<s.length&&r;c++)r=r[s[c]];return r}}const mh=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Xt(t)}Modifiers`]||e[`${ts(t)}Modifiers`];function Sh(e,t,...s){if(e.isUnmounted)return;const r=e.vnode.props||ke;let c=s;const _=t.startsWith("update:"),v=_&&mh(r,t.slice(7));v&&(v.trim&&(c=s.map(d=>Pe(d)?d.trim():d)),v.number&&(c=s.map(Ti)));let i,o=r[i=pi(t)]||r[i=pi(Xt(t))];!o&&_&&(o=r[i=pi(ts(t))]),o&&Et(o,e,6,c);const f=r[i+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Et(f,e,6,c)}}function $a(e,t,s=!1){const r=t.emitsCache,c=r.get(e);if(c!==void 0)return c;const _=e.emits;let v={},i=!1;if(!pe(e)){const o=f=>{const d=$a(f,t,!0);d&&(i=!0,Xe(v,d))};!s&&t.mixins.length&&t.mixins.forEach(o),e.extends&&o(e.extends),e.mixins&&e.mixins.forEach(o)}return!_&&!i?(Oe(e)&&r.set(e,null),null):(de(_)?_.forEach(o=>v[o]=null):Xe(v,_),Oe(e)&&r.set(e,v),v)}function ii(e,t){return!e||!Qr(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ee(e,t[0].toLowerCase()+t.slice(1))||Ee(e,ts(t))||Ee(e,t))}function zn(e){const{type:t,vnode:s,proxy:r,withProxy:c,propsOptions:[_],slots:v,attrs:i,emit:o,render:f,renderCache:d,props:u,data:m,setupState:S,ctx:b,inheritAttrs:g}=e,l=$r(e);let h,n;try{if(s.shapeFlag&4){const p=c||r,C=p;h=bt(f.call(C,p,d,u,S,m,b)),n=i}else{const p=t;h=bt(p.length>1?p(u,{attrs:i,slots:v,emit:o}):p(u,null)),n=t.props?i:yh(i)}}catch(p){rr.length=0,si(p,e,1),h=wt(Zt)}let a=h;if(n&&g!==!1){const p=Object.keys(n),{shapeFlag:C}=a;p.length&&C&7&&(_&&p.some(un)&&(n=bh(n,_)),a=Us(a,n,!1,!0))}return s.dirs&&(a=Us(a,null,!1,!0),a.dirs=a.dirs?a.dirs.concat(s.dirs):s.dirs),s.transition&&bn(a,s.transition),h=a,$r(l),h}const yh=e=>{let t;for(const s in e)(s==="class"||s==="style"||Qr(s))&&((t||(t={}))[s]=e[s]);return t},bh=(e,t)=>{const s={};for(const r in e)(!un(r)||!(r.slice(9)in t))&&(s[r]=e[r]);return s};function Ch(e,t,s){const{props:r,children:c,component:_}=e,{props:v,children:i,patchFlag:o}=t,f=_.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&o>=0){if(o&1024)return!0;if(o&16)return r?Vn(r,v,f):!!v;if(o&8){const d=t.dynamicProps;for(let u=0;u<d.length;u++){const m=d[u];if(v[m]!==r[m]&&!ii(f,m))return!0}}}else return(c||i)&&(!i||!i.$stable)?!0:r===v?!1:r?v?Vn(r,v,f):!0:!!v;return!1}function Vn(e,t,s){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let c=0;c<r.length;c++){const _=r[c];if(t[_]!==e[_]&&!ii(s,_))return!0}return!1}function wh({vnode:e,parent:t},s){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=s,t=t.parent;else break}}const Wa=e=>e.__isSuspense;function Eh(e,t){t&&t.pendingBranch?de(e)?t.effects.push(...e):t.effects.push(e):Mc(e)}const ut=Symbol.for("v-fgt"),ni=Symbol.for("v-txt"),Zt=Symbol.for("v-cmt"),Ci=Symbol.for("v-stc"),rr=[];let rt=null;function Ae(e=!1){rr.push(rt=e?null:[])}function xh(){rr.pop(),rt=rr[rr.length-1]||null}let lr=1;function Qn(e,t=!1){lr+=e,e<0&&rt&&t&&(rt.hasOnce=!0)}function ja(e){return e.dynamicChildren=lr>0?rt||Es:null,xh(),lr>0&&rt&&rt.push(e),e}function Me(e,t,s,r,c,_){return ja(ie(e,t,s,r,c,_,!0))}function oi(e,t,s,r,c){return ja(wt(e,t,s,r,c,!0))}function qa(e){return e?e.__v_isVNode===!0:!1}function Ks(e,t){return e.type===t.type&&e.key===t.key}const Ka=({key:e})=>e??null,Tr=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Pe(e)||He(e)||pe(e)?{i:at,r:e,k:t,f:!!s}:e:null);function ie(e,t=null,s=null,r=0,c=null,_=e===ut?0:1,v=!1,i=!1){const o={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ka(t),ref:t&&Tr(t),scopeId:ya,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:_,patchFlag:r,dynamicProps:c,dynamicChildren:null,appContext:null,ctx:at};return i?(En(o,s),_&128&&e.normalize(o)):s&&(o.shapeFlag|=Pe(s)?8:16),lr>0&&!v&&rt&&(o.patchFlag>0||_&6)&&o.patchFlag!==32&&rt.push(o),o}const wt=Rh;function Rh(e,t=null,s=null,r=0,c=null,_=!1){if((!e||e===Qc)&&(e=Zt),qa(e)){const i=Us(e,t,!0);return s&&En(i,s),lr>0&&!_&&rt&&(i.shapeFlag&6?rt[rt.indexOf(e)]=i:rt.push(i)),i.patchFlag=-2,i}if(Fh(e)&&(e=e.__vccOpts),t){t=kh(t);let{class:i,style:o}=t;i&&!Pe(i)&&(t.class=$s(i)),Oe(o)&&(Sn(o)&&!de(o)&&(o=Xe({},o)),t.style=Gt(o))}const v=Pe(e)?1:Wa(e)?128:Ic(e)?64:Oe(e)?4:pe(e)?2:0;return ie(e,t,s,r,c,v,_,!0)}function kh(e){return e?Sn(e)||Oa(e)?Xe({},e):e:null}function Us(e,t,s=!1,r=!1){const{props:c,ref:_,patchFlag:v,children:i,transition:o}=e,f=t?Ah(c||{},t):c,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Ka(f),ref:t&&t.ref?s&&_?de(_)?_.concat(Tr(t)):[_,Tr(t)]:Tr(t):_,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ut?v===-1?16:v|16:v,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:o,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Us(e.ssContent),ssFallback:e.ssFallback&&Us(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return o&&r&&bn(d,o.clone(d)),d}function Dh(e=" ",t=0){return wt(ni,null,e,t)}function wi(e="",t=!1){return t?(Ae(),oi(Zt,null,e)):wt(Zt,null,e)}function bt(e){return e==null||typeof e=="boolean"?wt(Zt):de(e)?wt(ut,null,e.slice()):qa(e)?Ft(e):wt(ni,null,String(e))}function Ft(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Us(e)}function En(e,t){let s=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(de(t))s=16;else if(typeof t=="object")if(r&65){const c=t.default;c&&(c._c&&(c._d=!1),En(e,c()),c._c&&(c._d=!0));return}else{s=32;const c=t._;!c&&!Oa(t)?t._ctx=at:c===3&&at&&(at.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else pe(t)?(t={default:t,_ctx:at},s=32):(t=String(t),r&64?(s=16,t=[Dh(t)]):s=8);e.children=t,e.shapeFlag|=s}function Ah(...e){const t={};for(let s=0;s<e.length;s++){const r=e[s];for(const c in r)if(c==="class")t.class!==r.class&&(t.class=$s([t.class,r.class]));else if(c==="style")t.style=Gt([t.style,r.style]);else if(Qr(c)){const _=t[c],v=r[c];v&&_!==v&&!(de(_)&&_.includes(v))&&(t[c]=_?[].concat(_,v):v)}else c!==""&&(t[c]=r[c])}return t}function pt(e,t,s,r=null){Et(e,t,7,[s,r])}const Lh=Da();let Oh=0;function Th(e,t,s){const r=e.type,c=(t?t.appContext:e.appContext)||Lh,_={uid:Oh++,vnode:e,type:r,parent:t,appContext:c,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Xl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(c.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ma(r,c),emitsOptions:$a(r,c),emit:null,emitted:null,propsDefaults:ke,inheritAttrs:r.inheritAttrs,ctx:ke,data:ke,props:ke,attrs:ke,slots:ke,refs:ke,setupState:ke,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return _.ctx={_},_.root=t?t.root:_,_.emit=Sh.bind(null,_),e.ce&&e.ce(_),_}let Je=null;const za=()=>Je||at;let jr,Ui;{const e=Xr(),t=(s,r)=>{let c;return(c=e[s])||(c=e[s]=[]),c.push(r),_=>{c.length>1?c.forEach(v=>v(_)):c[0](_)}};jr=t("__VUE_INSTANCE_SETTERS__",s=>Je=s),Ui=t("__VUE_SSR_SETTERS__",s=>cr=s)}const yr=e=>{const t=Je;return jr(e),e.scope.on(),()=>{e.scope.off(),jr(t)}},Gn=()=>{Je&&Je.scope.off(),jr(null)};function Va(e){return e.vnode.shapeFlag&4}let cr=!1;function Mh(e,t=!1,s=!1){t&&Ui(t);const{props:r,children:c}=e.vnode,_=Va(e);nh(e,r,_,t),ch(e,c,s||t);const v=_?Bh(e,t):void 0;return t&&Ui(!1),v}function Bh(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Gc);const{setup:r}=s;if(r){Ot();const c=e.setupContext=r.length>1?Ih(e):null,_=yr(e),v=vr(r,e,0,[e.props,c]),i=Ko(v);if(Tt(),_(),(i||e.sp)&&!er(e)&&Ca(e),i){if(v.then(Gn,Gn),t)return v.then(o=>{Jn(e,o)}).catch(o=>{si(o,e,0)});e.asyncDep=v}else Jn(e,v)}else Qa(e)}function Jn(e,t,s){pe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Oe(t)&&(e.setupState=pa(t)),Qa(e)}function Qa(e,t,s){const r=e.type;e.render||(e.render=r.render||Ct);{const c=yr(e);Ot();try{Jc(e)}finally{Tt(),c()}}}const Ph={get(e,t){return je(e,"get",""),e[t]}};function Ih(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Ph),slots:e.slots,emit:e.emit,expose:t}}function ai(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(pa(yc(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in tr)return tr[s](e)},has(t,s){return s in t||s in tr}})):e.proxy}function Fh(e){return pe(e)&&"__vccOpts"in e}const Ga=(e,t)=>Dc(e,t,cr),Hh="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $i;const Xn=typeof window<"u"&&window.trustedTypes;if(Xn)try{$i=Xn.createPolicy("vue",{createHTML:e=>e})}catch{}const Ja=$i?e=>$i.createHTML(e):e=>e,Nh="http://www.w3.org/2000/svg",Uh="http://www.w3.org/1998/Math/MathML",kt=typeof document<"u"?document:null,Yn=kt&&kt.createElement("template"),$h={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,r)=>{const c=t==="svg"?kt.createElementNS(Nh,e):t==="mathml"?kt.createElementNS(Uh,e):s?kt.createElement(e,{is:s}):kt.createElement(e);return e==="select"&&r&&r.multiple!=null&&c.setAttribute("multiple",r.multiple),c},createText:e=>kt.createTextNode(e),createComment:e=>kt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>kt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,r,c,_){const v=s?s.previousSibling:t.lastChild;if(c&&(c===_||c.nextSibling))for(;t.insertBefore(c.cloneNode(!0),s),!(c===_||!(c=c.nextSibling)););else{Yn.innerHTML=Ja(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const i=Yn.content;if(r==="svg"||r==="mathml"){const o=i.firstChild;for(;o.firstChild;)i.appendChild(o.firstChild);i.removeChild(o)}t.insertBefore(i,s)}return[v?v.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Wh=Symbol("_vtc");function jh(e,t,s){const r=e[Wh];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Zn=Symbol("_vod"),qh=Symbol("_vsh"),Kh=Symbol(""),zh=/(^|;)\s*display\s*:/;function Vh(e,t,s){const r=e.style,c=Pe(s);let _=!1;if(s&&!c){if(t)if(Pe(t))for(const v of t.split(";")){const i=v.slice(0,v.indexOf(":")).trim();s[i]==null&&Mr(r,i,"")}else for(const v in t)s[v]==null&&Mr(r,v,"");for(const v in s)v==="display"&&(_=!0),Mr(r,v,s[v])}else if(c){if(t!==s){const v=r[Kh];v&&(s+=";"+v),r.cssText=s,_=zh.test(s)}}else t&&e.removeAttribute("style");Zn in e&&(e[Zn]=_?r.display:"",e[qh]&&(r.display="none"))}const eo=/\s*!important$/;function Mr(e,t,s){if(de(s))s.forEach(r=>Mr(e,t,r));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const r=Qh(e,t);eo.test(s)?e.setProperty(ts(r),s.replace(eo,""),"important"):e[r]=s}}const to=["Webkit","Moz","ms"],Ei={};function Qh(e,t){const s=Ei[t];if(s)return s;let r=Xt(t);if(r!=="filter"&&r in e)return Ei[t]=r;r=Qo(r);for(let c=0;c<to.length;c++){const _=to[c]+r;if(_ in e)return Ei[t]=_}return t}const so="http://www.w3.org/1999/xlink";function ro(e,t,s,r,c,_=Jl(t)){r&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(so,t.slice(6,t.length)):e.setAttributeNS(so,t,s):s==null||_&&!Go(s)?e.removeAttribute(t):e.setAttribute(t,_?"":es(s)?String(s):s)}function io(e,t,s,r,c){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Ja(s):s);return}const _=e.tagName;if(t==="value"&&_!=="PROGRESS"&&!_.includes("-")){const i=_==="OPTION"?e.getAttribute("value")||"":e.value,o=s==null?e.type==="checkbox"?"on":"":String(s);(i!==o||!("_value"in e))&&(e.value=o),s==null&&e.removeAttribute(t),e._value=s;return}let v=!1;if(s===""||s==null){const i=typeof e[t];i==="boolean"?s=Go(s):s==null&&i==="string"?(s="",v=!0):i==="number"&&(s=0,v=!0)}try{e[t]=s}catch{}v&&e.removeAttribute(c||t)}function ws(e,t,s,r){e.addEventListener(t,s,r)}function Gh(e,t,s,r){e.removeEventListener(t,s,r)}const no=Symbol("_vei");function Jh(e,t,s,r,c=null){const _=e[no]||(e[no]={}),v=_[t];if(r&&v)v.value=r;else{const[i,o]=Xh(t);if(r){const f=_[t]=eu(r,c);ws(e,i,f,o)}else v&&(Gh(e,i,v,o),_[t]=void 0)}}const oo=/(?:Once|Passive|Capture)$/;function Xh(e){let t;if(oo.test(e)){t={};let r;for(;r=e.match(oo);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ts(e.slice(2)),t]}let xi=0;const Yh=Promise.resolve(),Zh=()=>xi||(Yh.then(()=>xi=0),xi=Date.now());function eu(e,t){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;Et(tu(r,s.value),t,5,[r])};return s.value=e,s.attached=Zh(),s}function tu(e,t){if(de(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(r=>c=>!c._stopped&&r&&r(c))}else return t}const ao=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,su=(e,t,s,r,c,_)=>{const v=c==="svg";t==="class"?jh(e,r,v):t==="style"?Vh(e,s,r):Qr(t)?un(t)||Jh(e,t,s,r,_):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ru(e,t,r,v))?(io(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ro(e,t,r,v,_,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Pe(r))?io(e,Xt(t),r,_,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),ro(e,t,r,v))};function ru(e,t,s,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&ao(t)&&pe(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const c=e.tagName;if(c==="IMG"||c==="VIDEO"||c==="CANVAS"||c==="SOURCE")return!1}return ao(t)&&Pe(s)?!1:t in e}const lo=e=>{const t=e.props["onUpdate:modelValue"]||!1;return de(t)?s=>Or(t,s):t};function iu(e){e.target.composing=!0}function co(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ri=Symbol("_assign"),Xa={created(e,{modifiers:{lazy:t,trim:s,number:r}},c){e[Ri]=lo(c);const _=r||c.props&&c.props.type==="number";ws(e,t?"change":"input",v=>{if(v.target.composing)return;let i=e.value;s&&(i=i.trim()),_&&(i=Ti(i)),e[Ri](i)}),s&&ws(e,"change",()=>{e.value=e.value.trim()}),t||(ws(e,"compositionstart",iu),ws(e,"compositionend",co),ws(e,"change",co))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:r,trim:c,number:_}},v){if(e[Ri]=lo(v),e.composing)return;const i=(_||e.type==="number")&&!/^0\d/.test(e.value)?Ti(e.value):e.value,o=t??"";i!==o&&(document.activeElement===e&&e.type!=="range"&&(r&&t===s||c&&e.value.trim()===o)||(e.value=o))}},nu=["ctrl","shift","alt","meta"],ou={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>nu.some(s=>e[`${s}Key`]&&!t.includes(s))},Wi=(e,t)=>{const s=e._withMods||(e._withMods={}),r=t.join(".");return s[r]||(s[r]=(c,..._)=>{for(let v=0;v<t.length;v++){const i=ou[t[v]];if(i&&i(c,t))return}return e(c,..._)})},au={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},qr=(e,t)=>{const s=e._withKeys||(e._withKeys={}),r=t.join(".");return s[r]||(s[r]=c=>{if(!("key"in c))return;const _=ts(c.key);if(t.some(v=>v===_||au[v]===_))return e(c)})},lu=Xe({patchProp:su},$h);let ho;function cu(){return ho||(ho=uh(lu))}const hu=(...e)=>{const t=cu().createApp(...e),{mount:s}=t;return t.mount=r=>{const c=fu(r);if(!c)return;const _=t._component;!pe(_)&&!_.render&&!_.template&&(_.template=c.innerHTML),c.nodeType===1&&(c.textContent="");const v=s(c,!1,uu(c));return c instanceof Element&&(c.removeAttribute("v-cloak"),c.setAttribute("data-v-app","")),v},t};function uu(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function fu(e){return Pe(e)?document.querySelector(e):e}var br=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ss=typeof window>"u"||"Deno"in globalThis;function nt(){}function du(e,t){return typeof e=="function"?e(t):e}function ji(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ya(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Jt(e,t){return typeof e=="function"?e(t):e}function ot(e,t){return typeof e=="function"?e(t):e}function uo(e,t){const{type:s="all",exact:r,fetchStatus:c,predicate:_,queryKey:v,stale:i}=e;if(v){if(r){if(t.queryHash!==xn(v,t.options))return!1}else if(!ur(t.queryKey,v))return!1}if(s!=="all"){const o=t.isActive();if(s==="active"&&!o||s==="inactive"&&o)return!1}return!(typeof i=="boolean"&&t.isStale()!==i||c&&c!==t.state.fetchStatus||_&&!_(t))}function fo(e,t){const{exact:s,status:r,predicate:c,mutationKey:_}=e;if(_){if(!t.options.mutationKey)return!1;if(s){if(hr(t.options.mutationKey)!==hr(_))return!1}else if(!ur(t.options.mutationKey,_))return!1}return!(r&&t.state.status!==r||c&&!c(t))}function xn(e,t){return((t==null?void 0:t.queryKeyHashFn)||hr)(e)}function hr(e){return JSON.stringify(e,(t,s)=>Ki(s)?Object.keys(s).sort().reduce((r,c)=>(r[c]=s[c],r),{}):s)}function ur(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>ur(e[s],t[s])):!1}function Za(e,t){if(e===t)return e;const s=_o(e)&&_o(t);if(s||Ki(e)&&Ki(t)){const r=s?e:Object.keys(e),c=r.length,_=s?t:Object.keys(t),v=_.length,i=s?[]:{},o=new Set(r);let f=0;for(let d=0;d<v;d++){const u=s?d:_[d];(!s&&o.has(u)||s)&&e[u]===void 0&&t[u]===void 0?(i[u]=void 0,f++):(i[u]=Za(e[u],t[u]),i[u]===e[u]&&e[u]!==void 0&&f++)}return c===v&&f===c?e:i}return t}function qi(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function _o(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ki(e){if(!po(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!po(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function po(e){return Object.prototype.toString.call(e)==="[object Object]"}function _u(e){return new Promise(t=>{setTimeout(t,e)})}function zi(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?Za(e,t):t}function pu(e,t,s=0){const r=[...e,t];return s&&r.length>s?r.slice(1):r}function gu(e,t,s=0){const r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}var Rn=Symbol();function el(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Rn?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function go(e,t){return typeof e=="function"?e(...t):!!e}var as,Ht,Ds,Po,vu=(Po=class extends br{constructor(){super();fe(this,as);fe(this,Ht);fe(this,Ds);oe(this,Ds,t=>{if(!Ss&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){I(this,Ht)||this.setEventListener(I(this,Ds))}onUnsubscribe(){var t;this.hasListeners()||((t=I(this,Ht))==null||t.call(this),oe(this,Ht,void 0))}setEventListener(t){var s;oe(this,Ds,t),(s=I(this,Ht))==null||s.call(this),oe(this,Ht,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){I(this,as)!==t&&(oe(this,as,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){var t;return typeof I(this,as)=="boolean"?I(this,as):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},as=new WeakMap,Ht=new WeakMap,Ds=new WeakMap,Po),kn=new vu,As,Nt,Ls,Io,mu=(Io=class extends br{constructor(){super();fe(this,As,!0);fe(this,Nt);fe(this,Ls);oe(this,Ls,t=>{if(!Ss&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){I(this,Nt)||this.setEventListener(I(this,Ls))}onUnsubscribe(){var t;this.hasListeners()||((t=I(this,Nt))==null||t.call(this),oe(this,Nt,void 0))}setEventListener(t){var s;oe(this,Ls,t),(s=I(this,Nt))==null||s.call(this),oe(this,Nt,t(this.setOnline.bind(this)))}setOnline(t){I(this,As)!==t&&(oe(this,As,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return I(this,As)}},As=new WeakMap,Nt=new WeakMap,Ls=new WeakMap,Io),Kr=new mu;function Vi(){let e,t;const s=new Promise((c,_)=>{e=c,t=_});s.status="pending",s.catch(()=>{});function r(c){Object.assign(s,c),delete s.resolve,delete s.reject}return s.resolve=c=>{r({status:"fulfilled",value:c}),e(c)},s.reject=c=>{r({status:"rejected",reason:c}),t(c)},s}function Su(e){return Math.min(1e3*2**e,3e4)}function tl(e){return(e??"online")==="online"?Kr.isOnline():!0}var sl=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function ki(e){return e instanceof sl}function rl(e){let t=!1,s=0,r=!1,c;const _=Vi(),v=g=>{var l;r||(m(new sl(g)),(l=e.abort)==null||l.call(e))},i=()=>{t=!0},o=()=>{t=!1},f=()=>kn.isFocused()&&(e.networkMode==="always"||Kr.isOnline())&&e.canRun(),d=()=>tl(e.networkMode)&&e.canRun(),u=g=>{var l;r||(r=!0,(l=e.onSuccess)==null||l.call(e,g),c==null||c(),_.resolve(g))},m=g=>{var l;r||(r=!0,(l=e.onError)==null||l.call(e,g),c==null||c(),_.reject(g))},S=()=>new Promise(g=>{var l;c=h=>{(r||f())&&g(h)},(l=e.onPause)==null||l.call(e)}).then(()=>{var g;c=void 0,r||(g=e.onContinue)==null||g.call(e)}),b=()=>{if(r)return;let g;const l=s===0?e.initialPromise:void 0;try{g=l??e.fn()}catch(h){g=Promise.reject(h)}Promise.resolve(g).then(u).catch(h=>{var w;if(r)return;const n=e.retry??(Ss?0:3),a=e.retryDelay??Su,p=typeof a=="function"?a(s,h):a,C=n===!0||typeof n=="number"&&s<n||typeof n=="function"&&n(s,h);if(t||!C){m(h);return}s++,(w=e.onFail)==null||w.call(e,s,h),_u(p).then(()=>f()?void 0:S()).then(()=>{t?m(h):b()})})};return{promise:_,cancel:v,continue:()=>(c==null||c(),_),cancelRetry:i,continueRetry:o,canStart:d,start:()=>(d()?b():S().then(b),_)}}var yu=e=>setTimeout(e,0);function bu(){let e=[],t=0,s=i=>{i()},r=i=>{i()},c=yu;const _=i=>{t?e.push(i):c(()=>{s(i)})},v=()=>{const i=e;e=[],i.length&&c(()=>{r(()=>{i.forEach(o=>{s(o)})})})};return{batch:i=>{let o;t++;try{o=i()}finally{t--,t||v()}return o},batchCalls:i=>(...o)=>{_(()=>{i(...o)})},schedule:_,setNotifyFunction:i=>{s=i},setBatchNotifyFunction:i=>{r=i},setScheduler:i=>{c=i}}}var qe=bu(),ls,Fo,il=(Fo=class{constructor(){fe(this,ls)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ji(this.gcTime)&&oe(this,ls,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ss?1/0:5*60*1e3))}clearGcTimeout(){I(this,ls)&&(clearTimeout(I(this,ls)),oe(this,ls,void 0))}},ls=new WeakMap,Fo),Os,cs,it,hs,$e,dr,us,ct,Rt,Ho,Cu=(Ho=class extends il{constructor(t){super();fe(this,ct);fe(this,Os);fe(this,cs);fe(this,it);fe(this,hs);fe(this,$e);fe(this,dr);fe(this,us);oe(this,us,!1),oe(this,dr,t.defaultOptions),this.setOptions(t.options),this.observers=[],oe(this,hs,t.client),oe(this,it,I(this,hs).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,oe(this,Os,wu(this.options)),this.state=t.state??I(this,Os),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=I(this,$e))==null?void 0:t.promise}setOptions(t){this.options={...I(this,dr),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&I(this,it).remove(this)}setData(t,s){const r=zi(this.state.data,t,this.options);return Se(this,ct,Rt).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(t,s){Se(this,ct,Rt).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var r,c;const s=(r=I(this,$e))==null?void 0:r.promise;return(c=I(this,$e))==null||c.cancel(t),s?s.then(nt).catch(nt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(I(this,Os))}isActive(){return this.observers.some(t=>ot(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Rn||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Jt(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Ya(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=I(this,$e))==null||s.continue()}onOnline(){var s;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=I(this,$e))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),I(this,it).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(I(this,$e)&&(I(this,us)?I(this,$e).cancel({revert:!0}):I(this,$e).cancelRetry()),this.scheduleGc()),I(this,it).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Se(this,ct,Rt).call(this,{type:"invalidate"})}fetch(t,s){var f,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(I(this,$e))return I(this,$e).continueRetry(),I(this,$e).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(S=>S.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,c=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(oe(this,us,!0),r.signal)})},_=()=>{const m=el(this.options,s),b=(()=>{const g={client:I(this,hs),queryKey:this.queryKey,meta:this.meta};return c(g),g})();return oe(this,us,!1),this.options.persister?this.options.persister(m,b,this):m(b)},i=(()=>{const m={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:I(this,hs),state:this.state,fetchFn:_};return c(m),m})();(f=this.options.behavior)==null||f.onFetch(i,this),oe(this,cs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=i.fetchOptions)==null?void 0:d.meta))&&Se(this,ct,Rt).call(this,{type:"fetch",meta:(u=i.fetchOptions)==null?void 0:u.meta});const o=m=>{var S,b,g,l;ki(m)&&m.silent||Se(this,ct,Rt).call(this,{type:"error",error:m}),ki(m)||((b=(S=I(this,it).config).onError)==null||b.call(S,m,this),(l=(g=I(this,it).config).onSettled)==null||l.call(g,this.state.data,m,this)),this.scheduleGc()};return oe(this,$e,rl({initialPromise:s==null?void 0:s.initialPromise,fn:i.fetchFn,abort:r.abort.bind(r),onSuccess:m=>{var S,b,g,l;if(m===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(h){o(h);return}(b=(S=I(this,it).config).onSuccess)==null||b.call(S,m,this),(l=(g=I(this,it).config).onSettled)==null||l.call(g,m,this.state.error,this),this.scheduleGc()},onError:o,onFail:(m,S)=>{Se(this,ct,Rt).call(this,{type:"failed",failureCount:m,error:S})},onPause:()=>{Se(this,ct,Rt).call(this,{type:"pause"})},onContinue:()=>{Se(this,ct,Rt).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),I(this,$e).start()}},Os=new WeakMap,cs=new WeakMap,it=new WeakMap,hs=new WeakMap,$e=new WeakMap,dr=new WeakMap,us=new WeakMap,ct=new WeakSet,Rt=function(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...nl(r.data,this.options),fetchMeta:t.meta??null};case"success":return oe(this,cs,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const c=t.error;return ki(c)&&c.revert&&I(this,cs)?{...I(this,cs),fetchStatus:"idle"}:{...r,error:c,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),qe.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),I(this,it).notify({query:this,type:"updated",action:t})})},Ho);function nl(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:tl(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function wu(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,r=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var mt,No,ol=(No=class extends br{constructor(s={}){super();fe(this,mt);this.config=s,oe(this,mt,new Map)}build(s,r,c){const _=r.queryKey,v=r.queryHash??xn(_,r);let i=this.get(v);return i||(i=new Cu({client:s,queryKey:_,queryHash:v,options:s.defaultQueryOptions(r),state:c,defaultOptions:s.getQueryDefaults(_)}),this.add(i)),i}add(s){I(this,mt).has(s.queryHash)||(I(this,mt).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const r=I(this,mt).get(s.queryHash);r&&(s.destroy(),r===s&&I(this,mt).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){qe.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return I(this,mt).get(s)}getAll(){return[...I(this,mt).values()]}find(s){const r={exact:!0,...s};return this.getAll().find(c=>uo(r,c))}findAll(s={}){const r=this.getAll();return Object.keys(s).length>0?r.filter(c=>uo(s,c)):r}notify(s){qe.batch(()=>{this.listeners.forEach(r=>{r(s)})})}onFocus(){qe.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){qe.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},mt=new WeakMap,No),St,Ve,fs,yt,Pt,Uo,Eu=(Uo=class extends il{constructor(t){super();fe(this,yt);fe(this,St);fe(this,Ve);fe(this,fs);this.mutationId=t.mutationId,oe(this,Ve,t.mutationCache),oe(this,St,[]),this.state=t.state||xu(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){I(this,St).includes(t)||(I(this,St).push(t),this.clearGcTimeout(),I(this,Ve).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){oe(this,St,I(this,St).filter(s=>s!==t)),this.scheduleGc(),I(this,Ve).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){I(this,St).length||(this.state.status==="pending"?this.scheduleGc():I(this,Ve).remove(this))}continue(){var t;return((t=I(this,fs))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var _,v,i,o,f,d,u,m,S,b,g,l,h,n,a,p,C,w,E,y;const s=()=>{Se(this,yt,Pt).call(this,{type:"continue"})};oe(this,fs,rl({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(x,A)=>{Se(this,yt,Pt).call(this,{type:"failed",failureCount:x,error:A})},onPause:()=>{Se(this,yt,Pt).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>I(this,Ve).canRun(this)}));const r=this.state.status==="pending",c=!I(this,fs).canStart();try{if(r)s();else{Se(this,yt,Pt).call(this,{type:"pending",variables:t,isPaused:c}),await((v=(_=I(this,Ve).config).onMutate)==null?void 0:v.call(_,t,this));const A=await((o=(i=this.options).onMutate)==null?void 0:o.call(i,t));A!==this.state.context&&Se(this,yt,Pt).call(this,{type:"pending",context:A,variables:t,isPaused:c})}const x=await I(this,fs).start();return await((d=(f=I(this,Ve).config).onSuccess)==null?void 0:d.call(f,x,t,this.state.context,this)),await((m=(u=this.options).onSuccess)==null?void 0:m.call(u,x,t,this.state.context)),await((b=(S=I(this,Ve).config).onSettled)==null?void 0:b.call(S,x,null,this.state.variables,this.state.context,this)),await((l=(g=this.options).onSettled)==null?void 0:l.call(g,x,null,t,this.state.context)),Se(this,yt,Pt).call(this,{type:"success",data:x}),x}catch(x){try{throw await((n=(h=I(this,Ve).config).onError)==null?void 0:n.call(h,x,t,this.state.context,this)),await((p=(a=this.options).onError)==null?void 0:p.call(a,x,t,this.state.context)),await((w=(C=I(this,Ve).config).onSettled)==null?void 0:w.call(C,void 0,x,this.state.variables,this.state.context,this)),await((y=(E=this.options).onSettled)==null?void 0:y.call(E,void 0,x,t,this.state.context)),x}finally{Se(this,yt,Pt).call(this,{type:"error",error:x})}}finally{I(this,Ve).runNext(this)}}},St=new WeakMap,Ve=new WeakMap,fs=new WeakMap,yt=new WeakSet,Pt=function(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),qe.batch(()=>{I(this,St).forEach(r=>{r.onMutationUpdate(t)}),I(this,Ve).notify({mutation:this,type:"updated",action:t})})},Uo);function xu(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Dt,ht,_r,$o,al=($o=class extends br{constructor(s={}){super();fe(this,Dt);fe(this,ht);fe(this,_r);this.config=s,oe(this,Dt,new Set),oe(this,ht,new Map),oe(this,_r,0)}build(s,r,c){const _=new Eu({mutationCache:this,mutationId:++Rr(this,_r)._,options:s.defaultMutationOptions(r),state:c});return this.add(_),_}add(s){I(this,Dt).add(s);const r=Lr(s);if(typeof r=="string"){const c=I(this,ht).get(r);c?c.push(s):I(this,ht).set(r,[s])}this.notify({type:"added",mutation:s})}remove(s){if(I(this,Dt).delete(s)){const r=Lr(s);if(typeof r=="string"){const c=I(this,ht).get(r);if(c)if(c.length>1){const _=c.indexOf(s);_!==-1&&c.splice(_,1)}else c[0]===s&&I(this,ht).delete(r)}}this.notify({type:"removed",mutation:s})}canRun(s){const r=Lr(s);if(typeof r=="string"){const c=I(this,ht).get(r),_=c==null?void 0:c.find(v=>v.state.status==="pending");return!_||_===s}else return!0}runNext(s){var c;const r=Lr(s);if(typeof r=="string"){const _=(c=I(this,ht).get(r))==null?void 0:c.find(v=>v!==s&&v.state.isPaused);return(_==null?void 0:_.continue())??Promise.resolve()}else return Promise.resolve()}clear(){qe.batch(()=>{I(this,Dt).forEach(s=>{this.notify({type:"removed",mutation:s})}),I(this,Dt).clear(),I(this,ht).clear()})}getAll(){return Array.from(I(this,Dt))}find(s){const r={exact:!0,...s};return this.getAll().find(c=>fo(r,c))}findAll(s={}){return this.getAll().filter(r=>fo(s,r))}notify(s){qe.batch(()=>{this.listeners.forEach(r=>{r(s)})})}resumePausedMutations(){const s=this.getAll().filter(r=>r.state.isPaused);return qe.batch(()=>Promise.all(s.map(r=>r.continue().catch(nt))))}},Dt=new WeakMap,ht=new WeakMap,_r=new WeakMap,$o);function Lr(e){var t;return(t=e.options.scope)==null?void 0:t.id}function vo(e){return{onFetch:(t,s)=>{var d,u,m,S,b;const r=t.options,c=(m=(u=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:u.fetchMore)==null?void 0:m.direction,_=((S=t.state.data)==null?void 0:S.pages)||[],v=((b=t.state.data)==null?void 0:b.pageParams)||[];let i={pages:[],pageParams:[]},o=0;const f=async()=>{let g=!1;const l=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},h=el(t.options,t.fetchOptions),n=async(a,p,C)=>{if(g)return Promise.reject();if(p==null&&a.pages.length)return Promise.resolve(a);const E=(()=>{const B={client:t.client,queryKey:t.queryKey,pageParam:p,direction:C?"backward":"forward",meta:t.options.meta};return l(B),B})(),y=await h(E),{maxPages:x}=t.options,A=C?gu:pu;return{pages:A(a.pages,y,x),pageParams:A(a.pageParams,p,x)}};if(c&&_.length){const a=c==="backward",p=a?Ru:mo,C={pages:_,pageParams:v},w=p(r,C);i=await n(C,w,a)}else{const a=e??_.length;do{const p=o===0?v[0]??r.initialPageParam:mo(r,i);if(o>0&&p==null)break;i=await n(i,p),o++}while(o<a)}return i};t.options.persister?t.fetchFn=()=>{var g,l;return(l=(g=t.options).persister)==null?void 0:l.call(g,f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=f}}}function mo(e,{pages:t,pageParams:s}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,s[r],s):void 0}function Ru(e,{pages:t,pageParams:s}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,s[0],s):void 0}var Te,Ut,$t,Ts,Ms,Wt,Bs,Ps,Wo,ku=(Wo=class{constructor(t={}){fe(this,Te);fe(this,Ut);fe(this,$t);fe(this,Ts);fe(this,Ms);fe(this,Wt);fe(this,Bs);fe(this,Ps);oe(this,Te,t.queryCache||new ol),oe(this,Ut,t.mutationCache||new al),oe(this,$t,t.defaultOptions||{}),oe(this,Ts,new Map),oe(this,Ms,new Map),oe(this,Wt,0)}mount(){Rr(this,Wt)._++,I(this,Wt)===1&&(oe(this,Bs,kn.subscribe(async t=>{t&&(await this.resumePausedMutations(),I(this,Te).onFocus())})),oe(this,Ps,Kr.subscribe(async t=>{t&&(await this.resumePausedMutations(),I(this,Te).onOnline())})))}unmount(){var t,s;Rr(this,Wt)._--,I(this,Wt)===0&&((t=I(this,Bs))==null||t.call(this),oe(this,Bs,void 0),(s=I(this,Ps))==null||s.call(this),oe(this,Ps,void 0))}isFetching(t){return I(this,Te).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return I(this,Ut).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const s=this.defaultQueryOptions({queryKey:t});return(r=I(this,Te).get(s.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),r=I(this,Te).build(this,s),c=r.state.data;return c===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Jt(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(c))}getQueriesData(t){return I(this,Te).findAll(t).map(({queryKey:s,state:r})=>{const c=r.data;return[s,c]})}setQueryData(t,s,r){const c=this.defaultQueryOptions({queryKey:t}),_=I(this,Te).get(c.queryHash),v=_==null?void 0:_.state.data,i=du(s,v);if(i!==void 0)return I(this,Te).build(this,c).setData(i,{...r,manual:!0})}setQueriesData(t,s,r){return qe.batch(()=>I(this,Te).findAll(t).map(({queryKey:c})=>[c,this.setQueryData(c,s,r)]))}getQueryState(t){var r;const s=this.defaultQueryOptions({queryKey:t});return(r=I(this,Te).get(s.queryHash))==null?void 0:r.state}removeQueries(t){const s=I(this,Te);qe.batch(()=>{s.findAll(t).forEach(r=>{s.remove(r)})})}resetQueries(t,s){const r=I(this,Te);return qe.batch(()=>(r.findAll(t).forEach(c=>{c.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const r={revert:!0,...s},c=qe.batch(()=>I(this,Te).findAll(t).map(_=>_.cancel(r)));return Promise.all(c).then(nt).catch(nt)}invalidateQueries(t,s={}){return qe.batch(()=>(I(this,Te).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},s)))}refetchQueries(t,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},c=qe.batch(()=>I(this,Te).findAll(t).filter(_=>!_.isDisabled()&&!_.isStatic()).map(_=>{let v=_.fetch(void 0,r);return r.throwOnError||(v=v.catch(nt)),_.state.fetchStatus==="paused"?Promise.resolve():v}));return Promise.all(c).then(nt)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const r=I(this,Te).build(this,s);return r.isStaleByTime(Jt(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(nt).catch(nt)}fetchInfiniteQuery(t){return t.behavior=vo(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(nt).catch(nt)}ensureInfiniteQueryData(t){return t.behavior=vo(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Kr.isOnline()?I(this,Ut).resumePausedMutations():Promise.resolve()}getQueryCache(){return I(this,Te)}getMutationCache(){return I(this,Ut)}getDefaultOptions(){return I(this,$t)}setDefaultOptions(t){oe(this,$t,t)}setQueryDefaults(t,s){I(this,Ts).set(hr(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...I(this,Ts).values()],r={};return s.forEach(c=>{ur(t,c.queryKey)&&Object.assign(r,c.defaultOptions)}),r}setMutationDefaults(t,s){I(this,Ms).set(hr(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...I(this,Ms).values()],r={};return s.forEach(c=>{ur(t,c.mutationKey)&&Object.assign(r,c.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const s={...I(this,$t).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=xn(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===Rn&&(s.enabled=!1),s}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...I(this,$t).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){I(this,Te).clear(),I(this,Ut).clear()}},Te=new WeakMap,Ut=new WeakMap,$t=new WeakMap,Ts=new WeakMap,Ms=new WeakMap,Wt=new WeakMap,Bs=new WeakMap,Ps=new WeakMap,Wo),Ye,ye,pr,Qe,ds,Is,jt,qt,gr,Fs,Hs,_s,ps,Kt,Ns,xe,Qs,Qi,Gi,Ji,Xi,Yi,Zi,en,ll,jo,Du=(jo=class extends br{constructor(t,s){super();fe(this,xe);fe(this,Ye);fe(this,ye);fe(this,pr);fe(this,Qe);fe(this,ds);fe(this,Is);fe(this,jt);fe(this,qt);fe(this,gr);fe(this,Fs);fe(this,Hs);fe(this,_s);fe(this,ps);fe(this,Kt);fe(this,Ns,new Set);this.options=s,oe(this,Ye,t),oe(this,qt,null),oe(this,jt,Vi()),this.options.experimental_prefetchInRender||I(this,jt).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(I(this,ye).addObserver(this),So(I(this,ye),this.options)?Se(this,xe,Qs).call(this):this.updateResult(),Se(this,xe,Xi).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return tn(I(this,ye),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return tn(I(this,ye),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Se(this,xe,Yi).call(this),Se(this,xe,Zi).call(this),I(this,ye).removeObserver(this)}setOptions(t){const s=this.options,r=I(this,ye);if(this.options=I(this,Ye).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ot(this.options.enabled,I(this,ye))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Se(this,xe,en).call(this),I(this,ye).setOptions(this.options),s._defaulted&&!qi(this.options,s)&&I(this,Ye).getQueryCache().notify({type:"observerOptionsUpdated",query:I(this,ye),observer:this});const c=this.hasListeners();c&&yo(I(this,ye),r,this.options,s)&&Se(this,xe,Qs).call(this),this.updateResult(),c&&(I(this,ye)!==r||ot(this.options.enabled,I(this,ye))!==ot(s.enabled,I(this,ye))||Jt(this.options.staleTime,I(this,ye))!==Jt(s.staleTime,I(this,ye)))&&Se(this,xe,Qi).call(this);const _=Se(this,xe,Gi).call(this);c&&(I(this,ye)!==r||ot(this.options.enabled,I(this,ye))!==ot(s.enabled,I(this,ye))||_!==I(this,Kt))&&Se(this,xe,Ji).call(this,_)}getOptimisticResult(t){const s=I(this,Ye).getQueryCache().build(I(this,Ye),t),r=this.createResult(s,t);return Lu(this,r)&&(oe(this,Qe,r),oe(this,Is,this.options),oe(this,ds,I(this,ye).state)),r}getCurrentResult(){return I(this,Qe)}trackResult(t,s){return new Proxy(t,{get:(r,c)=>(this.trackProp(c),s==null||s(c),Reflect.get(r,c))})}trackProp(t){I(this,Ns).add(t)}getCurrentQuery(){return I(this,ye)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=I(this,Ye).defaultQueryOptions(t),r=I(this,Ye).getQueryCache().build(I(this,Ye),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(t){return Se(this,xe,Qs).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),I(this,Qe)))}createResult(t,s){var x;const r=I(this,ye),c=this.options,_=I(this,Qe),v=I(this,ds),i=I(this,Is),f=t!==r?t.state:I(this,pr),{state:d}=t;let u={...d},m=!1,S;if(s._optimisticResults){const A=this.hasListeners(),B=!A&&So(t,s),P=A&&yo(t,r,s,c);(B||P)&&(u={...u,...nl(d.data,t.options)}),s._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:b,errorUpdatedAt:g,status:l}=u;S=u.data;let h=!1;if(s.placeholderData!==void 0&&S===void 0&&l==="pending"){let A;_!=null&&_.isPlaceholderData&&s.placeholderData===(i==null?void 0:i.placeholderData)?(A=_.data,h=!0):A=typeof s.placeholderData=="function"?s.placeholderData((x=I(this,Hs))==null?void 0:x.state.data,I(this,Hs)):s.placeholderData,A!==void 0&&(l="success",S=zi(_==null?void 0:_.data,A,s),m=!0)}if(s.select&&S!==void 0&&!h)if(_&&S===(v==null?void 0:v.data)&&s.select===I(this,gr))S=I(this,Fs);else try{oe(this,gr,s.select),S=s.select(S),S=zi(_==null?void 0:_.data,S,s),oe(this,Fs,S),oe(this,qt,null)}catch(A){oe(this,qt,A)}I(this,qt)&&(b=I(this,qt),S=I(this,Fs),g=Date.now(),l="error");const n=u.fetchStatus==="fetching",a=l==="pending",p=l==="error",C=a&&n,w=S!==void 0,y={status:l,fetchStatus:u.fetchStatus,isPending:a,isSuccess:l==="success",isError:p,isInitialLoading:C,isLoading:C,data:S,dataUpdatedAt:u.dataUpdatedAt,error:b,errorUpdatedAt:g,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>f.dataUpdateCount||u.errorUpdateCount>f.errorUpdateCount,isFetching:n,isRefetching:n&&!a,isLoadingError:p&&!w,isPaused:u.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:p&&w,isStale:Dn(t,s),refetch:this.refetch,promise:I(this,jt),isEnabled:ot(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const A=L=>{y.status==="error"?L.reject(y.error):y.data!==void 0&&L.resolve(y.data)},B=()=>{const L=oe(this,jt,y.promise=Vi());A(L)},P=I(this,jt);switch(P.status){case"pending":t.queryHash===r.queryHash&&A(P);break;case"fulfilled":(y.status==="error"||y.data!==P.value)&&B();break;case"rejected":(y.status!=="error"||y.error!==P.reason)&&B();break}}return y}updateResult(){const t=I(this,Qe),s=this.createResult(I(this,ye),this.options);if(oe(this,ds,I(this,ye).state),oe(this,Is,this.options),I(this,ds).data!==void 0&&oe(this,Hs,I(this,ye)),qi(s,t))return;oe(this,Qe,s);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:c}=this.options,_=typeof c=="function"?c():c;if(_==="all"||!_&&!I(this,Ns).size)return!0;const v=new Set(_??I(this,Ns));return this.options.throwOnError&&v.add("error"),Object.keys(I(this,Qe)).some(i=>{const o=i;return I(this,Qe)[o]!==t[o]&&v.has(o)})};Se(this,xe,ll).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Se(this,xe,Xi).call(this)}},Ye=new WeakMap,ye=new WeakMap,pr=new WeakMap,Qe=new WeakMap,ds=new WeakMap,Is=new WeakMap,jt=new WeakMap,qt=new WeakMap,gr=new WeakMap,Fs=new WeakMap,Hs=new WeakMap,_s=new WeakMap,ps=new WeakMap,Kt=new WeakMap,Ns=new WeakMap,xe=new WeakSet,Qs=function(t){Se(this,xe,en).call(this);let s=I(this,ye).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(nt)),s},Qi=function(){Se(this,xe,Yi).call(this);const t=Jt(this.options.staleTime,I(this,ye));if(Ss||I(this,Qe).isStale||!ji(t))return;const r=Ya(I(this,Qe).dataUpdatedAt,t)+1;oe(this,_s,setTimeout(()=>{I(this,Qe).isStale||this.updateResult()},r))},Gi=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(I(this,ye)):this.options.refetchInterval)??!1},Ji=function(t){Se(this,xe,Zi).call(this),oe(this,Kt,t),!(Ss||ot(this.options.enabled,I(this,ye))===!1||!ji(I(this,Kt))||I(this,Kt)===0)&&oe(this,ps,setInterval(()=>{(this.options.refetchIntervalInBackground||kn.isFocused())&&Se(this,xe,Qs).call(this)},I(this,Kt)))},Xi=function(){Se(this,xe,Qi).call(this),Se(this,xe,Ji).call(this,Se(this,xe,Gi).call(this))},Yi=function(){I(this,_s)&&(clearTimeout(I(this,_s)),oe(this,_s,void 0))},Zi=function(){I(this,ps)&&(clearInterval(I(this,ps)),oe(this,ps,void 0))},en=function(){const t=I(this,Ye).getQueryCache().build(I(this,Ye),this.options);if(t===I(this,ye))return;const s=I(this,ye);oe(this,ye,t),oe(this,pr,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},ll=function(t){qe.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(I(this,Qe))}),I(this,Ye).getQueryCache().notify({query:I(this,ye),type:"observerResultsUpdated"})})},jo);function Au(e,t){return ot(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function So(e,t){return Au(e,t)||e.state.data!==void 0&&tn(e,t,t.refetchOnMount)}function tn(e,t,s){if(ot(t.enabled,e)!==!1&&Jt(t.staleTime,e)!=="static"){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&Dn(e,t)}return!1}function yo(e,t,s,r){return(e!==t||ot(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Dn(e,s)}function Dn(e,t){return ot(t.enabled,e)!==!1&&e.isStaleByTime(Jt(t.staleTime,e))}function Lu(e,t){return!qi(e.getCurrentResult(),t)}var Ou="VUE_QUERY_CLIENT";function cl(e){const t=e?`:${e}`:"";return`${Ou}${t}`}function bo(e,t){Object.keys(e).forEach(s=>{e[s]=t[s]})}function sn(e,t,s="",r=0){if(t){const c=t(e,s,r);if(c===void 0&&He(e)||c!==void 0)return c}if(Array.isArray(e))return e.map((c,_)=>sn(c,t,String(_),r+1));if(typeof e=="object"&&Mu(e)){const c=Object.entries(e).map(([_,v])=>[_,sn(v,t,_,r+1)]);return Object.fromEntries(c)}return e}function Tu(e,t){return sn(e,t)}function me(e,t=!1){return Tu(e,(s,r,c)=>{if(c===1&&r==="queryKey")return me(s,!0);if(t&&Bu(s))return me(s(),t);if(He(s))return me(Ys(s),t)})}function Mu(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function Bu(e){return typeof e=="function"}function hl(e=""){if(!ih())throw new Error("vue-query hooks can only be used inside setup() function or functions that support injection context.");const t=cl(e),s=sr(t);if(!s)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return s}var Pu=class extends ol{find(e){return super.find(me(e))}findAll(e={}){return super.findAll(me(e))}},Iu=class extends al{find(e){return super.find(me(e))}findAll(e={}){return super.findAll(me(e))}},Fu=class extends ku{constructor(e={}){const t={defaultOptions:e.defaultOptions,queryCache:e.queryCache||new Pu,mutationCache:e.mutationCache||new Iu};super(t),this.isRestoring=Fe(!1)}isFetching(e={}){return super.isFetching(me(e))}isMutating(e={}){return super.isMutating(me(e))}getQueryData(e){return super.getQueryData(me(e))}ensureQueryData(e){return super.ensureQueryData(me(e))}getQueriesData(e){return super.getQueriesData(me(e))}setQueryData(e,t,s={}){return super.setQueryData(me(e),t,me(s))}setQueriesData(e,t,s={}){return super.setQueriesData(me(e),t,me(s))}getQueryState(e){return super.getQueryState(me(e))}removeQueries(e={}){return super.removeQueries(me(e))}resetQueries(e={},t={}){return super.resetQueries(me(e),me(t))}cancelQueries(e={},t={}){return super.cancelQueries(me(e),me(t))}invalidateQueries(e={},t={}){const s=me(e),r=me(t);if(super.invalidateQueries({...s,refetchType:"none"},r),s.refetchType==="none")return Promise.resolve();const c={...s,type:s.refetchType??s.type??"active"};return or().then(()=>super.refetchQueries(c,r))}refetchQueries(e={},t={}){return super.refetchQueries(me(e),me(t))}fetchQuery(e){return super.fetchQuery(me(e))}prefetchQuery(e){return super.prefetchQuery(me(e))}fetchInfiniteQuery(e){return super.fetchInfiniteQuery(me(e))}prefetchInfiniteQuery(e){return super.prefetchInfiniteQuery(me(e))}setDefaultOptions(e){super.setDefaultOptions(me(e))}setQueryDefaults(e,t){super.setQueryDefaults(me(e),me(t))}getQueryDefaults(e){return super.getQueryDefaults(me(e))}setMutationDefaults(e,t){super.setMutationDefaults(me(e),me(t))}getMutationDefaults(e){return super.getMutationDefaults(me(e))}},Hu={install:(e,t={})=>{const s=cl(t.queryClientKey);let r;if("queryClient"in t&&t.queryClient)r=t.queryClient;else{const v="queryClientConfig"in t?t.queryClientConfig:void 0;r=new Fu(v)}Ss||r.mount();let c=()=>{};if(t.clientPersister){r.isRestoring&&(r.isRestoring.value=!0);const[v,i]=t.clientPersister(r);c=v,i.then(()=>{var o;r.isRestoring&&(r.isRestoring.value=!1),(o=t.clientPersisterOnSuccess)==null||o.call(t,r)})}const _=()=>{r.unmount(),c()};if(e.onUnmount)e.onUnmount(_);else{const v=e.unmount;e.unmount=function(){_(),v()}}e.provide(s,r)}};function Nu(e,t,s){const r=hl(),c=Ga(()=>{var g;const S=me(t);typeof S.enabled=="function"&&(S.enabled=S.enabled());const b=r.defaultQueryOptions(S);return b._optimisticResults=(g=r.isRestoring)!=null&&g.value?"isRestoring":"optimistic",b}),_=new e(r,c.value),v=c.value.shallow?_a(_.getCurrentResult()):ei(_.getCurrentResult());let i=()=>{};r.isRestoring&&zt(r.isRestoring,S=>{S||(i(),i=_.subscribe(b=>{bo(v,b)}))},{immediate:!0});const o=()=>{_.setOptions(c.value),bo(v,_.getCurrentResult())};zt(c,o),Zl(()=>{i()});const f=(...S)=>(o(),v.refetch(...S)),d=()=>new Promise((S,b)=>{let g=()=>{};const l=()=>{if(c.value.enabled!==!1){_.setOptions(c.value);const h=_.getOptimisticResult(c.value);h.isStale?(g(),_.fetchOptimistic(c.value).then(S,n=>{go(c.value.throwOnError,[n,_.getCurrentQuery()])?b(n):S(_.getCurrentResult())})):(g(),S(h))}};l(),g=zt(c,l)});zt(()=>v.error,S=>{if(v.isError&&!v.isFetching&&go(c.value.throwOnError,[S,_.getCurrentQuery()]))throw S});const u=c.value.shallow?Sc(v):mn(v),m=Ec(u);for(const S in v)typeof v[S]=="function"&&(m[S]=v[S]);return m.suspense=d,m.refetch=f,m}function Uu(e,t){return Nu(Du,e)}function $u(){const e=Fe(null),t=Fe(!1),s=new Map,r=()=>{const i=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;e.value=new WebSocket(i),e.value.onopen=()=>{t.value=!0},e.value.onmessage=o=>{const f=JSON.parse(o.data),d=s.get(f.type);d&&d(f)},e.value.onerror=o=>{},e.value.onclose=()=>{t.value=!1,setTimeout(r,3e3)}},c=i=>{e.value&&e.value.readyState===WebSocket.OPEN&&e.value.send(JSON.stringify(i))},_=(i,o)=>{s.set(i,o)},v=i=>{s.delete(i)};return mr(()=>{r()}),Sr(()=>{e.value&&e.value.close()}),{isConnected:t,send:c,onMessage:_,offMessage:v}}function ul(e,t){return function(){return e.apply(t,arguments)}}const{toString:Wu}=Object.prototype,{getPrototypeOf:An}=Object,{iterator:li,toStringTag:fl}=Symbol,ci=(e=>t=>{const s=Wu.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),dt=e=>(e=e.toLowerCase(),t=>ci(t)===e),hi=e=>t=>typeof t===e,{isArray:Ws}=Array,fr=hi("undefined");function Cr(e){return e!==null&&!fr(e)&&e.constructor!==null&&!fr(e.constructor)&&Ze(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const dl=dt("ArrayBuffer");function ju(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&dl(e.buffer),t}const qu=hi("string"),Ze=hi("function"),_l=hi("number"),wr=e=>e!==null&&typeof e=="object",Ku=e=>e===!0||e===!1,Br=e=>{if(ci(e)!=="object")return!1;const t=An(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(fl in e)&&!(li in e)},zu=e=>{if(!wr(e)||Cr(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Vu=dt("Date"),Qu=dt("File"),Gu=dt("Blob"),Ju=dt("FileList"),Xu=e=>wr(e)&&Ze(e.pipe),Yu=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ze(e.append)&&((t=ci(e))==="formdata"||t==="object"&&Ze(e.toString)&&e.toString()==="[object FormData]"))},Zu=dt("URLSearchParams"),[ef,tf,sf,rf]=["ReadableStream","Request","Response","Headers"].map(dt),nf=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Er(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let r,c;if(typeof e!="object"&&(e=[e]),Ws(e))for(r=0,c=e.length;r<c;r++)t.call(null,e[r],r,e);else{if(Cr(e))return;const _=s?Object.getOwnPropertyNames(e):Object.keys(e),v=_.length;let i;for(r=0;r<v;r++)i=_[r],t.call(null,e[i],i,e)}}function pl(e,t){if(Cr(e))return null;t=t.toLowerCase();const s=Object.keys(e);let r=s.length,c;for(;r-- >0;)if(c=s[r],t===c.toLowerCase())return c;return null}const os=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,gl=e=>!fr(e)&&e!==os;function rn(){const{caseless:e}=gl(this)&&this||{},t={},s=(r,c)=>{const _=e&&pl(t,c)||c;Br(t[_])&&Br(r)?t[_]=rn(t[_],r):Br(r)?t[_]=rn({},r):Ws(r)?t[_]=r.slice():t[_]=r};for(let r=0,c=arguments.length;r<c;r++)arguments[r]&&Er(arguments[r],s);return t}const of=(e,t,s,{allOwnKeys:r}={})=>(Er(t,(c,_)=>{s&&Ze(c)?e[_]=ul(c,s):e[_]=c},{allOwnKeys:r}),e),af=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),lf=(e,t,s,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},cf=(e,t,s,r)=>{let c,_,v;const i={};if(t=t||{},e==null)return t;do{for(c=Object.getOwnPropertyNames(e),_=c.length;_-- >0;)v=c[_],(!r||r(v,e,t))&&!i[v]&&(t[v]=e[v],i[v]=!0);e=s!==!1&&An(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},hf=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const r=e.indexOf(t,s);return r!==-1&&r===s},uf=e=>{if(!e)return null;if(Ws(e))return e;let t=e.length;if(!_l(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},ff=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&An(Uint8Array)),df=(e,t)=>{const r=(e&&e[li]).call(e);let c;for(;(c=r.next())&&!c.done;){const _=c.value;t.call(e,_[0],_[1])}},_f=(e,t)=>{let s;const r=[];for(;(s=e.exec(t))!==null;)r.push(s);return r},pf=dt("HTMLFormElement"),gf=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,c){return r.toUpperCase()+c}),Co=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),vf=dt("RegExp"),vl=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),r={};Er(s,(c,_)=>{let v;(v=t(c,_,e))!==!1&&(r[_]=v||c)}),Object.defineProperties(e,r)},mf=e=>{vl(e,(t,s)=>{if(Ze(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=e[s];if(Ze(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Sf=(e,t)=>{const s={},r=c=>{c.forEach(_=>{s[_]=!0})};return Ws(e)?r(e):r(String(e).split(t)),s},yf=()=>{},bf=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Cf(e){return!!(e&&Ze(e.append)&&e[fl]==="FormData"&&e[li])}const wf=e=>{const t=new Array(10),s=(r,c)=>{if(wr(r)){if(t.indexOf(r)>=0)return;if(Cr(r))return r;if(!("toJSON"in r)){t[c]=r;const _=Ws(r)?[]:{};return Er(r,(v,i)=>{const o=s(v,c+1);!fr(o)&&(_[i]=o)}),t[c]=void 0,_}}return r};return s(e,0)},Ef=dt("AsyncFunction"),xf=e=>e&&(wr(e)||Ze(e))&&Ze(e.then)&&Ze(e.catch),ml=((e,t)=>e?setImmediate:t?((s,r)=>(os.addEventListener("message",({source:c,data:_})=>{c===os&&_===s&&r.length&&r.shift()()},!1),c=>{r.push(c),os.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Ze(os.postMessage)),Rf=typeof queueMicrotask<"u"?queueMicrotask.bind(os):typeof process<"u"&&process.nextTick||ml,kf=e=>e!=null&&Ze(e[li]),$={isArray:Ws,isArrayBuffer:dl,isBuffer:Cr,isFormData:Yu,isArrayBufferView:ju,isString:qu,isNumber:_l,isBoolean:Ku,isObject:wr,isPlainObject:Br,isEmptyObject:zu,isReadableStream:ef,isRequest:tf,isResponse:sf,isHeaders:rf,isUndefined:fr,isDate:Vu,isFile:Qu,isBlob:Gu,isRegExp:vf,isFunction:Ze,isStream:Xu,isURLSearchParams:Zu,isTypedArray:ff,isFileList:Ju,forEach:Er,merge:rn,extend:of,trim:nf,stripBOM:af,inherits:lf,toFlatObject:cf,kindOf:ci,kindOfTest:dt,endsWith:hf,toArray:uf,forEachEntry:df,matchAll:_f,isHTMLForm:pf,hasOwnProperty:Co,hasOwnProp:Co,reduceDescriptors:vl,freezeMethods:mf,toObjectSet:Sf,toCamelCase:gf,noop:yf,toFiniteNumber:bf,findKey:pl,global:os,isContextDefined:gl,isSpecCompliantForm:Cf,toJSONObject:wf,isAsyncFn:Ef,isThenable:xf,setImmediate:ml,asap:Rf,isIterable:kf};function _e(e,t,s,r,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),r&&(this.request=r),c&&(this.response=c,this.status=c.status?c.status:null)}$.inherits(_e,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const Sl=_e.prototype,yl={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{yl[e]={value:e}});Object.defineProperties(_e,yl);Object.defineProperty(Sl,"isAxiosError",{value:!0});_e.from=(e,t,s,r,c,_)=>{const v=Object.create(Sl);return $.toFlatObject(e,v,function(o){return o!==Error.prototype},i=>i!=="isAxiosError"),_e.call(v,e.message,t,s,r,c),v.cause=e,v.name=e.name,_&&Object.assign(v,_),v};const Df=null;function nn(e){return $.isPlainObject(e)||$.isArray(e)}function bl(e){return $.endsWith(e,"[]")?e.slice(0,-2):e}function wo(e,t,s){return e?e.concat(t).map(function(c,_){return c=bl(c),!s&&_?"["+c+"]":c}).join(s?".":""):t}function Af(e){return $.isArray(e)&&!e.some(nn)}const Lf=$.toFlatObject($,{},null,function(t){return/^is[A-Z]/.test(t)});function ui(e,t,s){if(!$.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=$.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,l){return!$.isUndefined(l[g])});const r=s.metaTokens,c=s.visitor||d,_=s.dots,v=s.indexes,o=(s.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(t);if(!$.isFunction(c))throw new TypeError("visitor must be a function");function f(b){if(b===null)return"";if($.isDate(b))return b.toISOString();if($.isBoolean(b))return b.toString();if(!o&&$.isBlob(b))throw new _e("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(b)||$.isTypedArray(b)?o&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function d(b,g,l){let h=b;if(b&&!l&&typeof b=="object"){if($.endsWith(g,"{}"))g=r?g:g.slice(0,-2),b=JSON.stringify(b);else if($.isArray(b)&&Af(b)||($.isFileList(b)||$.endsWith(g,"[]"))&&(h=$.toArray(b)))return g=bl(g),h.forEach(function(a,p){!($.isUndefined(a)||a===null)&&t.append(v===!0?wo([g],p,_):v===null?g:g+"[]",f(a))}),!1}return nn(b)?!0:(t.append(wo(l,g,_),f(b)),!1)}const u=[],m=Object.assign(Lf,{defaultVisitor:d,convertValue:f,isVisitable:nn});function S(b,g){if(!$.isUndefined(b)){if(u.indexOf(b)!==-1)throw Error("Circular reference detected in "+g.join("."));u.push(b),$.forEach(b,function(h,n){(!($.isUndefined(h)||h===null)&&c.call(t,h,$.isString(n)?n.trim():n,g,m))===!0&&S(h,g?g.concat(n):[n])}),u.pop()}}if(!$.isObject(e))throw new TypeError("data must be an object");return S(e),t}function Eo(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Ln(e,t){this._pairs=[],e&&ui(e,this,t)}const Cl=Ln.prototype;Cl.append=function(t,s){this._pairs.push([t,s])};Cl.toString=function(t){const s=t?function(r){return t.call(this,r,Eo)}:Eo;return this._pairs.map(function(c){return s(c[0])+"="+s(c[1])},"").join("&")};function Of(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function wl(e,t,s){if(!t)return e;const r=s&&s.encode||Of;$.isFunction(s)&&(s={serialize:s});const c=s&&s.serialize;let _;if(c?_=c(t,s):_=$.isURLSearchParams(t)?t.toString():new Ln(t,s).toString(r),_){const v=e.indexOf("#");v!==-1&&(e=e.slice(0,v)),e+=(e.indexOf("?")===-1?"?":"&")+_}return e}class xo{constructor(){this.handlers=[]}use(t,s,r){return this.handlers.push({fulfilled:t,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$.forEach(this.handlers,function(r){r!==null&&t(r)})}}const El={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Tf=typeof URLSearchParams<"u"?URLSearchParams:Ln,Mf=typeof FormData<"u"?FormData:null,Bf=typeof Blob<"u"?Blob:null,Pf={isBrowser:!0,classes:{URLSearchParams:Tf,FormData:Mf,Blob:Bf},protocols:["http","https","file","blob","url","data"]},On=typeof window<"u"&&typeof document<"u",on=typeof navigator=="object"&&navigator||void 0,If=On&&(!on||["ReactNative","NativeScript","NS"].indexOf(on.product)<0),Ff=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Hf=On&&window.location.href||"http://localhost",Nf=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:On,hasStandardBrowserEnv:If,hasStandardBrowserWebWorkerEnv:Ff,navigator:on,origin:Hf},Symbol.toStringTag,{value:"Module"})),Ke={...Nf,...Pf};function Uf(e,t){return ui(e,new Ke.classes.URLSearchParams,{visitor:function(s,r,c,_){return Ke.isNode&&$.isBuffer(s)?(this.append(r,s.toString("base64")),!1):_.defaultVisitor.apply(this,arguments)},...t})}function $f(e){return $.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Wf(e){const t={},s=Object.keys(e);let r;const c=s.length;let _;for(r=0;r<c;r++)_=s[r],t[_]=e[_];return t}function xl(e){function t(s,r,c,_){let v=s[_++];if(v==="__proto__")return!0;const i=Number.isFinite(+v),o=_>=s.length;return v=!v&&$.isArray(c)?c.length:v,o?($.hasOwnProp(c,v)?c[v]=[c[v],r]:c[v]=r,!i):((!c[v]||!$.isObject(c[v]))&&(c[v]=[]),t(s,r,c[v],_)&&$.isArray(c[v])&&(c[v]=Wf(c[v])),!i)}if($.isFormData(e)&&$.isFunction(e.entries)){const s={};return $.forEachEntry(e,(r,c)=>{t($f(r),c,s,0)}),s}return null}function jf(e,t,s){if($.isString(e))try{return(t||JSON.parse)(e),$.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(e)}const xr={transitional:El,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const r=s.getContentType()||"",c=r.indexOf("application/json")>-1,_=$.isObject(t);if(_&&$.isHTMLForm(t)&&(t=new FormData(t)),$.isFormData(t))return c?JSON.stringify(xl(t)):t;if($.isArrayBuffer(t)||$.isBuffer(t)||$.isStream(t)||$.isFile(t)||$.isBlob(t)||$.isReadableStream(t))return t;if($.isArrayBufferView(t))return t.buffer;if($.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(_){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Uf(t,this.formSerializer).toString();if((i=$.isFileList(t))||r.indexOf("multipart/form-data")>-1){const o=this.env&&this.env.FormData;return ui(i?{"files[]":t}:t,o&&new o,this.formSerializer)}}return _||c?(s.setContentType("application/json",!1),jf(t)):t}],transformResponse:[function(t){const s=this.transitional||xr.transitional,r=s&&s.forcedJSONParsing,c=this.responseType==="json";if($.isResponse(t)||$.isReadableStream(t))return t;if(t&&$.isString(t)&&(r&&!this.responseType||c)){const v=!(s&&s.silentJSONParsing)&&c;try{return JSON.parse(t)}catch(i){if(v)throw i.name==="SyntaxError"?_e.from(i,_e.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ke.classes.FormData,Blob:Ke.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],e=>{xr.headers[e]={}});const qf=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Kf=e=>{const t={};let s,r,c;return e&&e.split(`
`).forEach(function(v){c=v.indexOf(":"),s=v.substring(0,c).trim().toLowerCase(),r=v.substring(c+1).trim(),!(!s||t[s]&&qf[s])&&(s==="set-cookie"?t[s]?t[s].push(r):t[s]=[r]:t[s]=t[s]?t[s]+", "+r:r)}),t},Ro=Symbol("internals");function zs(e){return e&&String(e).trim().toLowerCase()}function Pr(e){return e===!1||e==null?e:$.isArray(e)?e.map(Pr):String(e)}function zf(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(e);)t[r[1]]=r[2];return t}const Vf=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Di(e,t,s,r,c){if($.isFunction(r))return r.call(this,t,s);if(c&&(t=s),!!$.isString(t)){if($.isString(r))return t.indexOf(r)!==-1;if($.isRegExp(r))return r.test(t)}}function Qf(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,r)=>s.toUpperCase()+r)}function Gf(e,t){const s=$.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+s,{value:function(c,_,v){return this[r].call(this,t,c,_,v)},configurable:!0})})}let et=class{constructor(t){t&&this.set(t)}set(t,s,r){const c=this;function _(i,o,f){const d=zs(o);if(!d)throw new Error("header name must be a non-empty string");const u=$.findKey(c,d);(!u||c[u]===void 0||f===!0||f===void 0&&c[u]!==!1)&&(c[u||o]=Pr(i))}const v=(i,o)=>$.forEach(i,(f,d)=>_(f,d,o));if($.isPlainObject(t)||t instanceof this.constructor)v(t,s);else if($.isString(t)&&(t=t.trim())&&!Vf(t))v(Kf(t),s);else if($.isObject(t)&&$.isIterable(t)){let i={},o,f;for(const d of t){if(!$.isArray(d))throw TypeError("Object iterator must return a key-value pair");i[f=d[0]]=(o=i[f])?$.isArray(o)?[...o,d[1]]:[o,d[1]]:d[1]}v(i,s)}else t!=null&&_(s,t,r);return this}get(t,s){if(t=zs(t),t){const r=$.findKey(this,t);if(r){const c=this[r];if(!s)return c;if(s===!0)return zf(c);if($.isFunction(s))return s.call(this,c,r);if($.isRegExp(s))return s.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=zs(t),t){const r=$.findKey(this,t);return!!(r&&this[r]!==void 0&&(!s||Di(this,this[r],r,s)))}return!1}delete(t,s){const r=this;let c=!1;function _(v){if(v=zs(v),v){const i=$.findKey(r,v);i&&(!s||Di(r,r[i],i,s))&&(delete r[i],c=!0)}}return $.isArray(t)?t.forEach(_):_(t),c}clear(t){const s=Object.keys(this);let r=s.length,c=!1;for(;r--;){const _=s[r];(!t||Di(this,this[_],_,t,!0))&&(delete this[_],c=!0)}return c}normalize(t){const s=this,r={};return $.forEach(this,(c,_)=>{const v=$.findKey(r,_);if(v){s[v]=Pr(c),delete s[_];return}const i=t?Qf(_):String(_).trim();i!==_&&delete s[_],s[i]=Pr(c),r[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return $.forEach(this,(r,c)=>{r!=null&&r!==!1&&(s[c]=t&&$.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const r=new this(t);return s.forEach(c=>r.set(c)),r}static accessor(t){const r=(this[Ro]=this[Ro]={accessors:{}}).accessors,c=this.prototype;function _(v){const i=zs(v);r[i]||(Gf(c,v),r[i]=!0)}return $.isArray(t)?t.forEach(_):_(t),this}};et.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(et.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[s]=r}}});$.freezeMethods(et);function Ai(e,t){const s=this||xr,r=t||s,c=et.from(r.headers);let _=r.data;return $.forEach(e,function(i){_=i.call(s,_,c.normalize(),t?t.status:void 0)}),c.normalize(),_}function Rl(e){return!!(e&&e.__CANCEL__)}function js(e,t,s){_e.call(this,e??"canceled",_e.ERR_CANCELED,t,s),this.name="CanceledError"}$.inherits(js,_e,{__CANCEL__:!0});function kl(e,t,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?e(s):t(new _e("Request failed with status code "+s.status,[_e.ERR_BAD_REQUEST,_e.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function Jf(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Xf(e,t){e=e||10;const s=new Array(e),r=new Array(e);let c=0,_=0,v;return t=t!==void 0?t:1e3,function(o){const f=Date.now(),d=r[_];v||(v=f),s[c]=o,r[c]=f;let u=_,m=0;for(;u!==c;)m+=s[u++],u=u%e;if(c=(c+1)%e,c===_&&(_=(_+1)%e),f-v<t)return;const S=d&&f-d;return S?Math.round(m*1e3/S):void 0}}function Yf(e,t){let s=0,r=1e3/t,c,_;const v=(f,d=Date.now())=>{s=d,c=null,_&&(clearTimeout(_),_=null),e(...f)};return[(...f)=>{const d=Date.now(),u=d-s;u>=r?v(f,d):(c=f,_||(_=setTimeout(()=>{_=null,v(c)},r-u)))},()=>c&&v(c)]}const zr=(e,t,s=3)=>{let r=0;const c=Xf(50,250);return Yf(_=>{const v=_.loaded,i=_.lengthComputable?_.total:void 0,o=v-r,f=c(o),d=v<=i;r=v;const u={loaded:v,total:i,progress:i?v/i:void 0,bytes:o,rate:f||void 0,estimated:f&&i&&d?(i-v)/f:void 0,event:_,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(u)},s)},ko=(e,t)=>{const s=e!=null;return[r=>t[0]({lengthComputable:s,total:e,loaded:r}),t[1]]},Do=e=>(...t)=>$.asap(()=>e(...t)),Zf=Ke.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,Ke.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(Ke.origin),Ke.navigator&&/(msie|trident)/i.test(Ke.navigator.userAgent)):()=>!0,ed=Ke.hasStandardBrowserEnv?{write(e,t,s,r,c,_){const v=[e+"="+encodeURIComponent(t)];$.isNumber(s)&&v.push("expires="+new Date(s).toGMTString()),$.isString(r)&&v.push("path="+r),$.isString(c)&&v.push("domain="+c),_===!0&&v.push("secure"),document.cookie=v.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function td(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function sd(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Dl(e,t,s){let r=!td(t);return e&&(r||s==!1)?sd(e,t):t}const Ao=e=>e instanceof et?{...e}:e;function ys(e,t){t=t||{};const s={};function r(f,d,u,m){return $.isPlainObject(f)&&$.isPlainObject(d)?$.merge.call({caseless:m},f,d):$.isPlainObject(d)?$.merge({},d):$.isArray(d)?d.slice():d}function c(f,d,u,m){if($.isUndefined(d)){if(!$.isUndefined(f))return r(void 0,f,u,m)}else return r(f,d,u,m)}function _(f,d){if(!$.isUndefined(d))return r(void 0,d)}function v(f,d){if($.isUndefined(d)){if(!$.isUndefined(f))return r(void 0,f)}else return r(void 0,d)}function i(f,d,u){if(u in t)return r(f,d);if(u in e)return r(void 0,f)}const o={url:_,method:_,data:_,baseURL:v,transformRequest:v,transformResponse:v,paramsSerializer:v,timeout:v,timeoutMessage:v,withCredentials:v,withXSRFToken:v,adapter:v,responseType:v,xsrfCookieName:v,xsrfHeaderName:v,onUploadProgress:v,onDownloadProgress:v,decompress:v,maxContentLength:v,maxBodyLength:v,beforeRedirect:v,transport:v,httpAgent:v,httpsAgent:v,cancelToken:v,socketPath:v,responseEncoding:v,validateStatus:i,headers:(f,d,u)=>c(Ao(f),Ao(d),u,!0)};return $.forEach(Object.keys({...e,...t}),function(d){const u=o[d]||c,m=u(e[d],t[d],d);$.isUndefined(m)&&u!==i||(s[d]=m)}),s}const Al=e=>{const t=ys({},e);let{data:s,withXSRFToken:r,xsrfHeaderName:c,xsrfCookieName:_,headers:v,auth:i}=t;t.headers=v=et.from(v),t.url=wl(Dl(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&v.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):"")));let o;if($.isFormData(s)){if(Ke.hasStandardBrowserEnv||Ke.hasStandardBrowserWebWorkerEnv)v.setContentType(void 0);else if((o=v.getContentType())!==!1){const[f,...d]=o?o.split(";").map(u=>u.trim()).filter(Boolean):[];v.setContentType([f||"multipart/form-data",...d].join("; "))}}if(Ke.hasStandardBrowserEnv&&(r&&$.isFunction(r)&&(r=r(t)),r||r!==!1&&Zf(t.url))){const f=c&&_&&ed.read(_);f&&v.set(c,f)}return t},rd=typeof XMLHttpRequest<"u",id=rd&&function(e){return new Promise(function(s,r){const c=Al(e);let _=c.data;const v=et.from(c.headers).normalize();let{responseType:i,onUploadProgress:o,onDownloadProgress:f}=c,d,u,m,S,b;function g(){S&&S(),b&&b(),c.cancelToken&&c.cancelToken.unsubscribe(d),c.signal&&c.signal.removeEventListener("abort",d)}let l=new XMLHttpRequest;l.open(c.method.toUpperCase(),c.url,!0),l.timeout=c.timeout;function h(){if(!l)return;const a=et.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),C={data:!i||i==="text"||i==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:a,config:e,request:l};kl(function(E){s(E),g()},function(E){r(E),g()},C),l=null}"onloadend"in l?l.onloadend=h:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(h)},l.onabort=function(){l&&(r(new _e("Request aborted",_e.ECONNABORTED,e,l)),l=null)},l.onerror=function(){r(new _e("Network Error",_e.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let p=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const C=c.transitional||El;c.timeoutErrorMessage&&(p=c.timeoutErrorMessage),r(new _e(p,C.clarifyTimeoutError?_e.ETIMEDOUT:_e.ECONNABORTED,e,l)),l=null},_===void 0&&v.setContentType(null),"setRequestHeader"in l&&$.forEach(v.toJSON(),function(p,C){l.setRequestHeader(C,p)}),$.isUndefined(c.withCredentials)||(l.withCredentials=!!c.withCredentials),i&&i!=="json"&&(l.responseType=c.responseType),f&&([m,b]=zr(f,!0),l.addEventListener("progress",m)),o&&l.upload&&([u,S]=zr(o),l.upload.addEventListener("progress",u),l.upload.addEventListener("loadend",S)),(c.cancelToken||c.signal)&&(d=a=>{l&&(r(!a||a.type?new js(null,e,l):a),l.abort(),l=null)},c.cancelToken&&c.cancelToken.subscribe(d),c.signal&&(c.signal.aborted?d():c.signal.addEventListener("abort",d)));const n=Jf(c.url);if(n&&Ke.protocols.indexOf(n)===-1){r(new _e("Unsupported protocol "+n+":",_e.ERR_BAD_REQUEST,e));return}l.send(_||null)})},nd=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let r=new AbortController,c;const _=function(f){if(!c){c=!0,i();const d=f instanceof Error?f:this.reason;r.abort(d instanceof _e?d:new js(d instanceof Error?d.message:d))}};let v=t&&setTimeout(()=>{v=null,_(new _e(`timeout ${t} of ms exceeded`,_e.ETIMEDOUT))},t);const i=()=>{e&&(v&&clearTimeout(v),v=null,e.forEach(f=>{f.unsubscribe?f.unsubscribe(_):f.removeEventListener("abort",_)}),e=null)};e.forEach(f=>f.addEventListener("abort",_));const{signal:o}=r;return o.unsubscribe=()=>$.asap(i),o}},od=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let r=0,c;for(;r<s;)c=r+t,yield e.slice(r,c),r=c},ad=async function*(e,t){for await(const s of ld(e))yield*od(s,t)},ld=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:r}=await t.read();if(s)break;yield r}}finally{await t.cancel()}},Lo=(e,t,s,r)=>{const c=ad(e,t);let _=0,v,i=o=>{v||(v=!0,r&&r(o))};return new ReadableStream({async pull(o){try{const{done:f,value:d}=await c.next();if(f){i(),o.close();return}let u=d.byteLength;if(s){let m=_+=u;s(m)}o.enqueue(new Uint8Array(d))}catch(f){throw i(f),f}},cancel(o){return i(o),c.return()}},{highWaterMark:2})},fi=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Ll=fi&&typeof ReadableStream=="function",cd=fi&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Ol=(e,...t)=>{try{return!!e(...t)}catch{return!1}},hd=Ll&&Ol(()=>{let e=!1;const t=new Request(Ke.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Oo=64*1024,an=Ll&&Ol(()=>$.isReadableStream(new Response("").body)),Vr={stream:an&&(e=>e.body)};fi&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Vr[t]&&(Vr[t]=$.isFunction(e[t])?s=>s[t]():(s,r)=>{throw new _e(`Response type '${t}' is not supported`,_e.ERR_NOT_SUPPORT,r)})})})(new Response);const ud=async e=>{if(e==null)return 0;if($.isBlob(e))return e.size;if($.isSpecCompliantForm(e))return(await new Request(Ke.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if($.isArrayBufferView(e)||$.isArrayBuffer(e))return e.byteLength;if($.isURLSearchParams(e)&&(e=e+""),$.isString(e))return(await cd(e)).byteLength},fd=async(e,t)=>{const s=$.toFiniteNumber(e.getContentLength());return s??ud(t)},dd=fi&&(async e=>{let{url:t,method:s,data:r,signal:c,cancelToken:_,timeout:v,onDownloadProgress:i,onUploadProgress:o,responseType:f,headers:d,withCredentials:u="same-origin",fetchOptions:m}=Al(e);f=f?(f+"").toLowerCase():"text";let S=nd([c,_&&_.toAbortSignal()],v),b;const g=S&&S.unsubscribe&&(()=>{S.unsubscribe()});let l;try{if(o&&hd&&s!=="get"&&s!=="head"&&(l=await fd(d,r))!==0){let C=new Request(t,{method:"POST",body:r,duplex:"half"}),w;if($.isFormData(r)&&(w=C.headers.get("content-type"))&&d.setContentType(w),C.body){const[E,y]=ko(l,zr(Do(o)));r=Lo(C.body,Oo,E,y)}}$.isString(u)||(u=u?"include":"omit");const h="credentials"in Request.prototype;b=new Request(t,{...m,signal:S,method:s.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:h?u:void 0});let n=await fetch(b,m);const a=an&&(f==="stream"||f==="response");if(an&&(i||a&&g)){const C={};["status","statusText","headers"].forEach(x=>{C[x]=n[x]});const w=$.toFiniteNumber(n.headers.get("content-length")),[E,y]=i&&ko(w,zr(Do(i),!0))||[];n=new Response(Lo(n.body,Oo,E,()=>{y&&y(),g&&g()}),C)}f=f||"text";let p=await Vr[$.findKey(Vr,f)||"text"](n,e);return!a&&g&&g(),await new Promise((C,w)=>{kl(C,w,{data:p,headers:et.from(n.headers),status:n.status,statusText:n.statusText,config:e,request:b})})}catch(h){throw g&&g(),h&&h.name==="TypeError"&&/Load failed|fetch/i.test(h.message)?Object.assign(new _e("Network Error",_e.ERR_NETWORK,e,b),{cause:h.cause||h}):_e.from(h,h&&h.code,e,b)}}),ln={http:Df,xhr:id,fetch:dd};$.forEach(ln,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const To=e=>`- ${e}`,_d=e=>$.isFunction(e)||e===null||e===!1,Tl={getAdapter:e=>{e=$.isArray(e)?e:[e];const{length:t}=e;let s,r;const c={};for(let _=0;_<t;_++){s=e[_];let v;if(r=s,!_d(s)&&(r=ln[(v=String(s)).toLowerCase()],r===void 0))throw new _e(`Unknown adapter '${v}'`);if(r)break;c[v||"#"+_]=r}if(!r){const _=Object.entries(c).map(([i,o])=>`adapter ${i} `+(o===!1?"is not supported by the environment":"is not available in the build"));let v=t?_.length>1?`since :
`+_.map(To).join(`
`):" "+To(_[0]):"as no adapter specified";throw new _e("There is no suitable adapter to dispatch the request "+v,"ERR_NOT_SUPPORT")}return r},adapters:ln};function Li(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new js(null,e)}function Mo(e){return Li(e),e.headers=et.from(e.headers),e.data=Ai.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Tl.getAdapter(e.adapter||xr.adapter)(e).then(function(r){return Li(e),r.data=Ai.call(e,e.transformResponse,r),r.headers=et.from(r.headers),r},function(r){return Rl(r)||(Li(e),r&&r.response&&(r.response.data=Ai.call(e,e.transformResponse,r.response),r.response.headers=et.from(r.response.headers))),Promise.reject(r)})}const Ml="1.11.0",di={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{di[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Bo={};di.transitional=function(t,s,r){function c(_,v){return"[Axios v"+Ml+"] Transitional option '"+_+"'"+v+(r?". "+r:"")}return(_,v,i)=>{if(t===!1)throw new _e(c(v," has been removed"+(s?" in "+s:"")),_e.ERR_DEPRECATED);return s&&!Bo[v]&&(Bo[v]=!0,console.warn(c(v," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(_,v,i):!0}};di.spelling=function(t){return(s,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function pd(e,t,s){if(typeof e!="object")throw new _e("options must be an object",_e.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let c=r.length;for(;c-- >0;){const _=r[c],v=t[_];if(v){const i=e[_],o=i===void 0||v(i,_,e);if(o!==!0)throw new _e("option "+_+" must be "+o,_e.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new _e("Unknown option "+_,_e.ERR_BAD_OPTION)}}const Ir={assertOptions:pd,validators:di},gt=Ir.validators;let ms=class{constructor(t){this.defaults=t||{},this.interceptors={request:new xo,response:new xo}}async request(t,s){try{return await this._request(t,s)}catch(r){if(r instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const _=c.stack?c.stack.replace(/^.+\n/,""):"";try{r.stack?_&&!String(r.stack).endsWith(_.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+_):r.stack=_}catch{}}throw r}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=ys(this.defaults,s);const{transitional:r,paramsSerializer:c,headers:_}=s;r!==void 0&&Ir.assertOptions(r,{silentJSONParsing:gt.transitional(gt.boolean),forcedJSONParsing:gt.transitional(gt.boolean),clarifyTimeoutError:gt.transitional(gt.boolean)},!1),c!=null&&($.isFunction(c)?s.paramsSerializer={serialize:c}:Ir.assertOptions(c,{encode:gt.function,serialize:gt.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Ir.assertOptions(s,{baseUrl:gt.spelling("baseURL"),withXsrfToken:gt.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let v=_&&$.merge(_.common,_[s.method]);_&&$.forEach(["delete","get","head","post","put","patch","common"],b=>{delete _[b]}),s.headers=et.concat(v,_);const i=[];let o=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(s)===!1||(o=o&&g.synchronous,i.unshift(g.fulfilled,g.rejected))});const f=[];this.interceptors.response.forEach(function(g){f.push(g.fulfilled,g.rejected)});let d,u=0,m;if(!o){const b=[Mo.bind(this),void 0];for(b.unshift(...i),b.push(...f),m=b.length,d=Promise.resolve(s);u<m;)d=d.then(b[u++],b[u++]);return d}m=i.length;let S=s;for(u=0;u<m;){const b=i[u++],g=i[u++];try{S=b(S)}catch(l){g.call(this,l);break}}try{d=Mo.call(this,S)}catch(b){return Promise.reject(b)}for(u=0,m=f.length;u<m;)d=d.then(f[u++],f[u++]);return d}getUri(t){t=ys(this.defaults,t);const s=Dl(t.baseURL,t.url,t.allowAbsoluteUrls);return wl(s,t.params,t.paramsSerializer)}};$.forEach(["delete","get","head","options"],function(t){ms.prototype[t]=function(s,r){return this.request(ys(r||{},{method:t,url:s,data:(r||{}).data}))}});$.forEach(["post","put","patch"],function(t){function s(r){return function(_,v,i){return this.request(ys(i||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:_,data:v}))}}ms.prototype[t]=s(),ms.prototype[t+"Form"]=s(!0)});let gd=class Bl{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(_){s=_});const r=this;this.promise.then(c=>{if(!r._listeners)return;let _=r._listeners.length;for(;_-- >0;)r._listeners[_](c);r._listeners=null}),this.promise.then=c=>{let _;const v=new Promise(i=>{r.subscribe(i),_=i}).then(c);return v.cancel=function(){r.unsubscribe(_)},v},t(function(_,v,i){r.reason||(r.reason=new js(_,v,i),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=r=>{t.abort(r)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new Bl(function(c){t=c}),cancel:t}}};function vd(e){return function(s){return e.apply(null,s)}}function md(e){return $.isObject(e)&&e.isAxiosError===!0}const cn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(cn).forEach(([e,t])=>{cn[t]=e});function Pl(e){const t=new ms(e),s=ul(ms.prototype.request,t);return $.extend(s,ms.prototype,t,{allOwnKeys:!0}),$.extend(s,t,null,{allOwnKeys:!0}),s.create=function(c){return Pl(ys(e,c))},s}const Re=Pl(xr);Re.Axios=ms;Re.CanceledError=js;Re.CancelToken=gd;Re.isCancel=Rl;Re.VERSION=Ml;Re.toFormData=ui;Re.AxiosError=_e;Re.Cancel=Re.CanceledError;Re.all=function(t){return Promise.all(t)};Re.spread=vd;Re.isAxiosError=md;Re.mergeConfig=ys;Re.AxiosHeaders=et;Re.formToJSON=e=>xl($.isHTMLForm(e)?new FormData(e):e);Re.getAdapter=Tl.getAdapter;Re.HttpStatusCode=cn;Re.default=Re;const{Axios:A_,AxiosError:L_,CanceledError:O_,isCancel:T_,CancelToken:M_,VERSION:B_,all:P_,Cancel:I_,isAxiosError:F_,spread:H_,toFormData:N_,AxiosHeaders:U_,HttpStatusCode:$_,formToJSON:W_,getAdapter:j_,mergeConfig:q_}=Re,Bt="/api",Vt={getSessions:async()=>{const{data:e}=await Re.get(`${Bt}/sessions`);return e.sessions},createSession:async e=>{const{data:t}=await Re.post(`${Bt}/sessions`,{name:e});return t},killSession:async e=>{const{data:t}=await Re.post(`${Bt}/sessions/${e}/kill`);return t},renameSession:async(e,t)=>{const{data:s}=await Re.post(`${Bt}/sessions/${e}/rename`,{newName:t});return s},getWindows:async e=>{const{data:t}=await Re.get(`${Bt}/sessions/${e}/windows`);return t.windows},createWindow:async(e,t)=>{const{data:s}=await Re.post(`${Bt}/sessions/${e}/windows`,{windowName:t});return s},killWindow:async(e,t)=>{const{data:s}=await Re.delete(`${Bt}/sessions/${e}/windows/${t}`);return s},renameWindow:async(e,t,s)=>{const{data:r}=await Re.post(`${Bt}/sessions/${e}/windows/${t}/rename`,{newName:s});return r}},Sd={class:"pl-6 mt-1"},yd={key:0,class:"text-xs",style:{color:"var(--text-tertiary)"}},bd={key:1,class:"text-xs text-red-500"},Cd={key:2,class:"text-xs",style:{color:"var(--text-tertiary)"}},wd={key:3,class:"space-y-0.5"},Ed=["onClick"],xd={class:"flex items-center space-x-2 min-w-0"},Rd={class:"font-mono",style:{color:"var(--text-tertiary)"}},kd=["onKeyup","onBlur"],Dd={style:{color:"var(--text-tertiary)"}},Ad=["onClick"],Ld=["onClick"],Od={__name:"WindowList",props:{sessionName:{type:String,required:!0}},emits:["select-window","refresh"],setup(e,{expose:t,emit:s}){const r=e,c=s,_=Fe([]),v=Fe(!0),i=Fe(!1),o=Fe(null),f=Fe(""),d=Fe(null),u=async()=>{try{v.value=!0,i.value=!1,_.value=await Vt.getWindows(r.sessionName)}catch(n){i.value=!0,console.error("Failed to load windows:",n)}finally{v.value=!1}},m=async()=>{const n=prompt("Window name (optional):");if(n!==null)try{await Vt.createWindow(r.sessionName,n||void 0),await u(),c("refresh")}catch(a){console.error("Failed to create window:",a)}},S=async n=>{if(confirm(`Kill window "${n.name}"?`))try{await Vt.killWindow(r.sessionName,n.index),await u(),c("refresh")}catch(a){console.error("Failed to kill window:",a)}},b=n=>{var a;return((a=o.value)==null?void 0:a.index)===n.index},g=n=>{o.value=n,f.value=n.name,or(()=>{var a,p;(a=d.value)==null||a.focus(),(p=d.value)==null||p.select()})},l=async n=>{if(f.value&&f.value!==n.name)try{await Vt.renameWindow(r.sessionName,n.index,f.value),await u()}catch(a){console.error("Failed to rename window:",a)}h()},h=()=>{o.value=null,f.value=""};return mr(()=>{u()}),t({refresh:u}),(n,a)=>(Ae(),Me("div",Sd,[v.value?(Ae(),Me("div",yd," Loading windows... ")):i.value?(Ae(),Me("div",bd," Error loading windows ")):_.value.length===0?(Ae(),Me("div",Cd," No windows ")):(Ae(),Me("div",wd,[(Ae(!0),Me(ut,null,xa(_.value,p=>(Ae(),Me("div",{key:p.index,onClick:C=>n.$emit("select-window",p),class:$s(["flex items-center justify-between px-2 py-1 rounded cursor-pointer hover-bg text-xs",{"bg-opacity-30":p.active}]),style:Gt({background:p.active?"var(--bg-tertiary)":"transparent",borderLeft:p.active?"2px solid var(--accent-secondary)":"2px solid transparent"})},[ie("div",xd,[ie("span",Rd,Be(p.index)+":",1),b(p)?ba((Ae(),Me("input",{key:1,"onUpdate:modelValue":a[0]||(a[0]=C=>f.value=C),onKeyup:[qr(C=>l(p),["enter"]),qr(h,["escape"])],onBlur:C=>l(p),ref_for:!0,ref_key:"editInput",ref:d,class:"px-1 py-0.5 text-xs w-full focus:outline-none border",style:{background:"var(--bg-primary)","border-color":"var(--border-primary)",color:"var(--text-primary)"}},null,40,kd)),[[Xa,f.value]]):(Ae(),Me("span",{key:0,class:"truncate",style:Gt({color:p.active?"var(--text-primary)":"var(--text-secondary)"})},Be(p.name),5)),ie("span",Dd,"("+Be(p.panes)+"p)",1)]),ie("div",{class:"flex items-center space-x-0.5 opacity-0 group-hover:opacity-100 transition-opacity",onClick:a[1]||(a[1]=Wi(()=>{},["stop"]))},[ie("button",{onClick:C=>g(p),class:"p-0.5 hover-bg rounded",style:{color:"var(--text-tertiary)"},title:"Rename Window"},a[2]||(a[2]=[ie("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[ie("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Ad),ie("button",{onClick:C=>S(p),class:"p-0.5 hover-bg rounded",style:{color:"var(--text-tertiary)"},title:"Kill Window"},a[3]||(a[3]=[ie("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[ie("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ld)])],14,Ed))),128)),ie("button",{onClick:m,class:"w-full px-2 py-1 text-xs hover-bg rounded flex items-center justify-center space-x-1",style:{color:"var(--text-tertiary)",border:"1px dashed","border-color":"var(--border-secondary)"}},a[4]||(a[4]=[ie("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[ie("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ie("span",null,"New Window",-1)]))]))]))}},Td={class:"group"},Md={class:"flex items-center justify-between"},Bd={class:"flex-1 min-w-0"},Pd={class:"flex items-center space-x-2"},Id={key:2,class:"w-1.5 h-1.5 rounded-full",style:{background:"var(--accent-warning)"}},Fd={class:"flex items-center space-x-3 text-xs mt-0.5",style:{color:"var(--text-tertiary)"}},Hd={key:0},Nd={__name:"SessionItem",props:{session:{type:Object,required:!0},isActive:{type:Boolean,default:!1}},emits:["select","kill","rename","select-window","refresh"],setup(e,{emit:t}){const s=e,r=t,c=Fe(!1),_=Fe(""),v=Fe(null),i=Fe(!1),o=Fe(null),f=()=>{c.value=!0,_.value=s.session.name,or(()=>{var S,b;(S=v.value)==null||S.focus(),(b=v.value)==null||b.select()})},d=()=>{_.value&&_.value!==s.session.name&&r("rename",_.value),u()},u=()=>{c.value=!1,_.value=""},m=()=>{i.value=!i.value,i.value&&o.value&&or(()=>o.value.refresh())};return(S,b)=>(Ae(),Me("div",Td,[ie("div",{onClick:b[3]||(b[3]=g=>!c.value&&S.$emit("select")),class:$s(["px-3 py-2 cursor-pointer transition-colors hover-bg",{"bg-opacity-50":e.isActive}]),style:Gt({background:e.isActive?"var(--bg-tertiary)":"transparent",borderLeft:e.isActive?"2px solid var(--accent-primary)":"2px solid transparent"})},[ie("div",Md,[ie("div",Bd,[ie("div",Pd,[ie("button",{onClick:Wi(m,["stop"]),class:"p-0.5 hover-bg rounded transition-transform",style:Gt({transform:i.value?"rotate(90deg)":"rotate(0deg)"})},b[6]||(b[6]=[ie("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[ie("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]),4),c.value?ba((Ae(),Me("input",{key:1,"onUpdate:modelValue":b[0]||(b[0]=g=>_.value=g),onKeyup:[qr(d,["enter"]),qr(u,["escape"])],onBlur:d,ref_key:"editInput",ref:v,class:"px-1 py-0.5 text-xs w-full focus:outline-none border",style:{background:"var(--bg-primary)","border-color":"var(--border-primary)",color:"var(--text-primary)"}},null,544)),[[Xa,_.value]]):(Ae(),Me("div",{key:0,class:"text-xs font-medium truncate",style:Gt({color:e.isActive?"var(--text-primary)":"var(--text-secondary)"})},Be(e.session.name),5)),e.session.attached?(Ae(),Me("div",Id)):wi("",!0)]),ie("div",Fd,[ie("span",null,Be(e.session.windows)+"w",1),e.session.dimensions?(Ae(),Me("span",Hd,Be(e.session.dimensions),1)):wi("",!0)])]),ie("div",{class:"flex items-center space-x-0.5",onClick:b[2]||(b[2]=Wi(()=>{},["stop"]))},[ie("button",{onClick:f,class:"p-1 hover-bg rounded",style:{color:"var(--text-tertiary)"},title:"Rename"},b[7]||(b[7]=[ie("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[ie("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])),ie("button",{onClick:b[1]||(b[1]=g=>S.$emit("kill")),class:"p-1 hover-bg rounded",style:{color:"var(--text-tertiary)"},title:"Kill"},b[8]||(b[8]=[ie("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[ie("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])],6),i.value?(Ae(),oi(Od,{key:0,"session-name":e.session.name,onSelectWindow:b[4]||(b[4]=g=>S.$emit("select-window",g)),onRefresh:b[5]||(b[5]=g=>S.$emit("refresh")),ref_key:"windowList",ref:o},null,8,["session-name"])):wi("",!0)]))}},Ud={class:"w-64 flex flex-col border-r",style:{background:"var(--bg-secondary)","border-color":"var(--border-primary)"}},$d={class:"p-3 border-b",style:{"border-color":"var(--border-primary)"}},Wd={class:"flex items-center justify-between mb-3"},jd={class:"text-xs font-medium",style:{color:"var(--text-secondary)"}},qd={class:"flex-1 overflow-y-auto"},Kd={key:0,class:"p-6 text-center"},zd={key:1,class:"py-1"},Vd={__name:"SessionList",props:{sessions:{type:Array,default:()=>[]},currentSession:{type:String,default:null}},emits:["select","refresh","kill","rename","create","select-window"],setup(e,{emit:t}){const s=t,r=()=>{const _=prompt("Session name:",`s${Date.now().toString().slice(-6)}`);_&&s("create",_)},c=_=>{confirm(`Are you sure you want to kill session "${_}"?`)&&s("kill",_)};return(_,v)=>(Ae(),Me("aside",Ud,[ie("div",$d,[ie("div",Wd,[ie("h2",jd,"Sessions ("+Be(e.sessions.length)+")",1),ie("button",{onClick:v[0]||(v[0]=i=>_.$emit("refresh")),class:"p-1 hover-bg rounded text-xs",style:{color:"var(--text-tertiary)"},title:"Refresh"},v[2]||(v[2]=[ie("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[ie("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)]))]),ie("button",{onClick:r,class:$s(["w-full px-3 py-1.5 text-xs border rounded transition-colors","hover:border-opacity-80"]),style:{background:"var(--bg-primary)","border-color":"var(--border-primary)",color:"var(--text-primary)"}}," New Session ")]),ie("div",qd,[e.sessions.length===0?(Ae(),Me("div",Kd,v[3]||(v[3]=[ie("p",{class:"text-xs",style:{color:"var(--text-tertiary)"}},"No sessions",-1)]))):(Ae(),Me("div",zd,[(Ae(!0),Me(ut,null,xa(e.sessions,i=>(Ae(),oi(Nd,{key:i.name,session:i,isActive:e.currentSession===i.name,onSelect:o=>_.$emit("select",i.name),onKill:o=>c(i.name),onRename:o=>s("rename",i.name,o),onSelectWindow:o=>_.$emit("select-window",i.name,o),onRefresh:v[1]||(v[1]=o=>_.$emit("refresh"))},null,8,["session","isActive","onSelect","onKill","onRename","onSelectWindow"]))),128))]))])]))}};var Il={exports:{}};(function(e,t){(function(s,r){e.exports=r()})(globalThis,()=>(()=>{var s={4567:function(v,i,o){var f=this&&this.__decorate||function(n,a,p,C){var w,E=arguments.length,y=E<3?a:C===null?C=Object.getOwnPropertyDescriptor(a,p):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(n,a,p,C);else for(var x=n.length-1;x>=0;x--)(w=n[x])&&(y=(E<3?w(y):E>3?w(a,p,y):w(a,p))||y);return E>3&&y&&Object.defineProperty(a,p,y),y},d=this&&this.__param||function(n,a){return function(p,C){a(p,C,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const u=o(9042),m=o(9924),S=o(844),b=o(4725),g=o(2585),l=o(3656);let h=i.AccessibilityManager=class extends S.Disposable{constructor(n,a,p,C){super(),this._terminal=n,this._coreBrowserService=p,this._renderService=C,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let w=0;w<this._terminal.rows;w++)this._rowElements[w]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[w]);if(this._topBoundaryFocusListener=w=>this._handleBoundaryFocus(w,0),this._bottomBoundaryFocusListener=w=>this._handleBoundaryFocus(w,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new m.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(w=>this._handleResize(w.rows))),this.register(this._terminal.onRender(w=>this._refreshRows(w.start,w.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(w=>this._handleChar(w))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(w=>this._handleTab(w))),this.register(this._terminal.onKey(w=>this._handleKey(w.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,l.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,S.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(n){for(let a=0;a<n;a++)this._handleChar(" ")}_handleChar(n){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==n&&(this._charsToAnnounce+=n):this._charsToAnnounce+=n,n===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=u.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(n){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(n)||this._charsToConsume.push(n)}_refreshRows(n,a){this._liveRegionDebouncer.refresh(n,a,this._terminal.rows)}_renderRows(n,a){const p=this._terminal.buffer,C=p.lines.length.toString();for(let w=n;w<=a;w++){const E=p.lines.get(p.ydisp+w),y=[],x=(E==null?void 0:E.translateToString(!0,void 0,void 0,y))||"",A=(p.ydisp+w+1).toString(),B=this._rowElements[w];B&&(x.length===0?(B.innerText=" ",this._rowColumns.set(B,[0,1])):(B.textContent=x,this._rowColumns.set(B,y)),B.setAttribute("aria-posinset",A),B.setAttribute("aria-setsize",C))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(n,a){const p=n.target,C=this._rowElements[a===0?1:this._rowElements.length-2];if(p.getAttribute("aria-posinset")===(a===0?"1":`${this._terminal.buffer.lines.length}`)||n.relatedTarget!==C)return;let w,E;if(a===0?(w=p,E=this._rowElements.pop(),this._rowContainer.removeChild(E)):(w=this._rowElements.shift(),E=p,this._rowContainer.removeChild(w)),w.removeEventListener("focus",this._topBoundaryFocusListener),E.removeEventListener("focus",this._bottomBoundaryFocusListener),a===0){const y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else{const y=this._createAccessibilityTreeNode();this._rowElements.push(y),this._rowContainer.appendChild(y)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(a===0?-1:1),this._rowElements[a===0?1:this._rowElements.length-2].focus(),n.preventDefault(),n.stopImmediatePropagation()}_handleSelectionChange(){var x;if(this._rowElements.length===0)return;const n=document.getSelection();if(!n)return;if(n.isCollapsed)return void(this._rowContainer.contains(n.anchorNode)&&this._terminal.clearSelection());if(!n.anchorNode||!n.focusNode)return void console.error("anchorNode and/or focusNode are null");let a={node:n.anchorNode,offset:n.anchorOffset},p={node:n.focusNode,offset:n.focusOffset};if((a.node.compareDocumentPosition(p.node)&Node.DOCUMENT_POSITION_PRECEDING||a.node===p.node&&a.offset>p.offset)&&([a,p]=[p,a]),a.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(a={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(a.node))return;const C=this._rowElements.slice(-1)[0];if(p.node.compareDocumentPosition(C)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(p={node:C,offset:((x=C.textContent)==null?void 0:x.length)??0}),!this._rowContainer.contains(p.node))return;const w=({node:A,offset:B})=>{const P=A instanceof Text?A.parentNode:A;let L=parseInt(P==null?void 0:P.getAttribute("aria-posinset"),10)-1;if(isNaN(L))return console.warn("row is invalid. Race condition?"),null;const W=this._rowColumns.get(P);if(!W)return console.warn("columns is null. Race condition?"),null;let z=B<W.length?W[B]:W.slice(-1)[0]+1;return z>=this._terminal.cols&&(++L,z=0),{row:L,column:z}},E=w(a),y=w(p);if(E&&y){if(E.row>y.row||E.row===y.row&&E.column>=y.column)throw new Error("invalid range");this._terminal.select(E.column,E.row,(y.row-E.row)*this._terminal.cols-E.column+y.column)}}_handleResize(n){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let a=this._rowContainer.children.length;a<this._terminal.rows;a++)this._rowElements[a]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[a]);for(;this._rowElements.length>n;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const n=this._coreBrowserService.mainDocument.createElement("div");return n.setAttribute("role","listitem"),n.tabIndex=-1,this._refreshRowDimensions(n),n}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let n=0;n<this._terminal.rows;n++)this._refreshRowDimensions(this._rowElements[n])}}_refreshRowDimensions(n){n.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=h=f([d(1,g.IInstantiationService),d(2,b.ICoreBrowserService),d(3,b.IRenderService)],h)},3614:(v,i)=>{function o(m){return m.replace(/\r?\n/g,"\r")}function f(m,S){return S?"\x1B[200~"+m+"\x1B[201~":m}function d(m,S,b,g){m=f(m=o(m),b.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),b.triggerDataEvent(m,!0),S.value=""}function u(m,S,b){const g=b.getBoundingClientRect(),l=m.clientX-g.left-10,h=m.clientY-g.top-10;S.style.width="20px",S.style.height="20px",S.style.left=`${l}px`,S.style.top=`${h}px`,S.style.zIndex="1000",S.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=o,i.bracketTextForPaste=f,i.copyHandler=function(m,S){m.clipboardData&&m.clipboardData.setData("text/plain",S.selectionText),m.preventDefault()},i.handlePasteEvent=function(m,S,b,g){m.stopPropagation(),m.clipboardData&&d(m.clipboardData.getData("text/plain"),S,b,g)},i.paste=d,i.moveTextAreaUnderMouseCursor=u,i.rightClickHandler=function(m,S,b,g,l){u(m,S,b),l&&g.rightClickSelect(m),S.value=g.selectionText,S.select()}},7239:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const f=o(1505);i.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(d,u,m){this._css.set(d,u,m)}getCss(d,u){return this._css.get(d,u)}setColor(d,u,m){this._color.set(d,u,m)}getColor(d,u){return this._color.get(d,u)}clear(){this._color.clear(),this._css.clear()}}},3656:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,f,d,u){o.addEventListener(f,d,u);let m=!1;return{dispose:()=>{m||(m=!0,o.removeEventListener(f,d,u))}}}},3551:function(v,i,o){var f=this&&this.__decorate||function(h,n,a,p){var C,w=arguments.length,E=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,a):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(h,n,a,p);else for(var y=h.length-1;y>=0;y--)(C=h[y])&&(E=(w<3?C(E):w>3?C(n,a,E):C(n,a))||E);return w>3&&E&&Object.defineProperty(n,a,E),E},d=this&&this.__param||function(h,n){return function(a,p){n(a,p,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const u=o(3656),m=o(8460),S=o(844),b=o(2585),g=o(4725);let l=i.Linkifier=class extends S.Disposable{get currentLink(){return this._currentLink}constructor(h,n,a,p,C){super(),this._element=h,this._mouseService=n,this._renderService=a,this._bufferService=p,this._linkProviderService=C,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new m.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new m.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,S.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,S.toDisposable)(()=>{var w;this._lastMouseEvent=void 0,(w=this._activeProviderReplies)==null||w.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,u.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,u.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(h){this._lastMouseEvent=h;const n=this._positionFromMouseEvent(h,this._element,this._mouseService);if(!n)return;this._isMouseOut=!1;const a=h.composedPath();for(let p=0;p<a.length;p++){const C=a[p];if(C.classList.contains("xterm"))break;if(C.classList.contains("xterm-hover"))return}this._lastBufferCell&&n.x===this._lastBufferCell.x&&n.y===this._lastBufferCell.y||(this._handleHover(n),this._lastBufferCell=n)}_handleHover(h){if(this._activeLine!==h.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(h,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,h)||(this._clearCurrentLink(),this._askForLink(h,!0))}_askForLink(h,n){var p,C;this._activeProviderReplies&&n||((p=this._activeProviderReplies)==null||p.forEach(w=>{w==null||w.forEach(E=>{E.link.dispose&&E.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=h.y);let a=!1;for(const[w,E]of this._linkProviderService.linkProviders.entries())n?(C=this._activeProviderReplies)!=null&&C.get(w)&&(a=this._checkLinkProviderResult(w,h,a)):E.provideLinks(h.y,y=>{var A,B;if(this._isMouseOut)return;const x=y==null?void 0:y.map(P=>({link:P}));(A=this._activeProviderReplies)==null||A.set(w,x),a=this._checkLinkProviderResult(w,h,a),((B=this._activeProviderReplies)==null?void 0:B.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(h.y,this._activeProviderReplies)})}_removeIntersectingLinks(h,n){const a=new Set;for(let p=0;p<n.size;p++){const C=n.get(p);if(C)for(let w=0;w<C.length;w++){const E=C[w],y=E.link.range.start.y<h?0:E.link.range.start.x,x=E.link.range.end.y>h?this._bufferService.cols:E.link.range.end.x;for(let A=y;A<=x;A++){if(a.has(A)){C.splice(w--,1);break}a.add(A)}}}}_checkLinkProviderResult(h,n,a){var w;if(!this._activeProviderReplies)return a;const p=this._activeProviderReplies.get(h);let C=!1;for(let E=0;E<h;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(C=!0);if(!C&&p){const E=p.find(y=>this._linkAtPosition(y.link,n));E&&(a=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!a)for(let E=0;E<this._activeProviderReplies.size;E++){const y=(w=this._activeProviderReplies.get(E))==null?void 0:w.find(x=>this._linkAtPosition(x.link,n));if(y){a=!0,this._handleNewLink(y);break}}return a}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(h){if(!this._currentLink)return;const n=this._positionFromMouseEvent(h,this._element,this._mouseService);n&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,n)&&this._currentLink.link.activate(h,this._currentLink.link.text)}_clearCurrentLink(h,n){this._currentLink&&this._lastMouseEvent&&(!h||!n||this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=n)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,S.disposeArray)(this._linkCacheDisposables))}_handleNewLink(h){if(!this._lastMouseEvent)return;const n=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);n&&this._linkAtPosition(h.link,n)&&(this._currentLink=h,this._currentLink.state={decorations:{underline:h.link.decorations===void 0||h.link.decorations.underline,pointerCursor:h.link.decorations===void 0||h.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,h.link,this._lastMouseEvent),h.link.decorations={},Object.defineProperties(h.link.decorations,{pointerCursor:{get:()=>{var a,p;return(p=(a=this._currentLink)==null?void 0:a.state)==null?void 0:p.decorations.pointerCursor},set:a=>{var p;(p=this._currentLink)!=null&&p.state&&this._currentLink.state.decorations.pointerCursor!==a&&(this._currentLink.state.decorations.pointerCursor=a,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",a))}},underline:{get:()=>{var a,p;return(p=(a=this._currentLink)==null?void 0:a.state)==null?void 0:p.decorations.underline},set:a=>{var p,C,w;(p=this._currentLink)!=null&&p.state&&((w=(C=this._currentLink)==null?void 0:C.state)==null?void 0:w.decorations.underline)!==a&&(this._currentLink.state.decorations.underline=a,this._currentLink.state.isHovered&&this._fireUnderlineEvent(h.link,a))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(a=>{if(!this._currentLink)return;const p=a.start===0?0:a.start+1+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.ydisp+1+a.end;if(this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=C&&(this._clearCurrentLink(p,C),this._lastMouseEvent)){const w=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);w&&this._askForLink(w,!1)}})))}_linkHover(h,n,a){var p;(p=this._currentLink)!=null&&p.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(n,!0),this._currentLink.state.decorations.pointerCursor&&h.classList.add("xterm-cursor-pointer")),n.hover&&n.hover(a,n.text)}_fireUnderlineEvent(h,n){const a=h.range,p=this._bufferService.buffer.ydisp,C=this._createLinkUnderlineEvent(a.start.x-1,a.start.y-p-1,a.end.x,a.end.y-p-1,void 0);(n?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(C)}_linkLeave(h,n,a){var p;(p=this._currentLink)!=null&&p.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(n,!1),this._currentLink.state.decorations.pointerCursor&&h.classList.remove("xterm-cursor-pointer")),n.leave&&n.leave(a,n.text)}_linkAtPosition(h,n){const a=h.range.start.y*this._bufferService.cols+h.range.start.x,p=h.range.end.y*this._bufferService.cols+h.range.end.x,C=n.y*this._bufferService.cols+n.x;return a<=C&&C<=p}_positionFromMouseEvent(h,n,a){const p=a.getCoords(h,n,this._bufferService.cols,this._bufferService.rows);if(p)return{x:p[0],y:p[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(h,n,a,p,C){return{x1:h,y1:n,x2:a,y2:p,cols:this._bufferService.cols,fg:C}}};i.Linkifier=l=f([d(1,g.IMouseService),d(2,g.IRenderService),d(3,b.IBufferService),d(4,g.ILinkProviderService)],l)},9042:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(v,i,o){var f=this&&this.__decorate||function(g,l,h,n){var a,p=arguments.length,C=p<3?l:n===null?n=Object.getOwnPropertyDescriptor(l,h):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(g,l,h,n);else for(var w=g.length-1;w>=0;w--)(a=g[w])&&(C=(p<3?a(C):p>3?a(l,h,C):a(l,h))||C);return p>3&&C&&Object.defineProperty(l,h,C),C},d=this&&this.__param||function(g,l){return function(h,n){l(h,n,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const u=o(511),m=o(2585);let S=i.OscLinkProvider=class{constructor(g,l,h){this._bufferService=g,this._optionsService=l,this._oscLinkService=h}provideLinks(g,l){var x;const h=this._bufferService.buffer.lines.get(g-1);if(!h)return void l(void 0);const n=[],a=this._optionsService.rawOptions.linkHandler,p=new u.CellData,C=h.getTrimmedLength();let w=-1,E=-1,y=!1;for(let A=0;A<C;A++)if(E!==-1||h.hasContent(A)){if(h.loadCell(A,p),p.hasExtendedAttrs()&&p.extended.urlId){if(E===-1){E=A,w=p.extended.urlId;continue}y=p.extended.urlId!==w}else E!==-1&&(y=!0);if(y||E!==-1&&A===C-1){const B=(x=this._oscLinkService.getLinkData(w))==null?void 0:x.uri;if(B){const P={start:{x:E+1,y:g},end:{x:A+(y||A!==C-1?0:1),y:g}};let L=!1;if(!(a!=null&&a.allowNonHttpProtocols))try{const W=new URL(B);["http:","https:"].includes(W.protocol)||(L=!0)}catch{L=!0}L||n.push({text:B,range:P,activate:(W,z)=>a?a.activate(W,z,P):b(0,z),hover:(W,z)=>{var J;return(J=a==null?void 0:a.hover)==null?void 0:J.call(a,W,z,P)},leave:(W,z)=>{var J;return(J=a==null?void 0:a.leave)==null?void 0:J.call(a,W,z,P)}})}y=!1,p.hasExtendedAttrs()&&p.extended.urlId?(E=A,w=p.extended.urlId):(E=-1,w=-1)}}l(n)}};function b(g,l){if(confirm(`Do you want to navigate to ${l}?

WARNING: This link could potentially be dangerous`)){const h=window.open();if(h){try{h.opener=null}catch{}h.location.href=l}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=S=f([d(0,m.IBufferService),d(1,m.IOptionsService),d(2,m.IOscLinkService)],S)},6193:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(o,f){this._renderCallback=o,this._coreBrowserService=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,f,d){this._rowCount=d,o=o!==void 0?o:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},3236:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const f=o(3614),d=o(3656),u=o(3551),m=o(9042),S=o(3730),b=o(1680),g=o(3107),l=o(5744),h=o(2950),n=o(1296),a=o(428),p=o(4269),C=o(5114),w=o(8934),E=o(3230),y=o(9312),x=o(4725),A=o(6731),B=o(8055),P=o(8969),L=o(8460),W=o(844),z=o(6114),J=o(8437),Y=o(2584),V=o(7399),R=o(5941),O=o(9074),M=o(2585),F=o(5435),Q=o(4567),re=o(779);class he extends P.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(H={}){super(H),this.browser=z,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new W.MutableDisposable),this._onCursorMove=this.register(new L.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new L.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new L.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new L.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new L.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new L.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new L.EventEmitter),this._onBlur=this.register(new L.EventEmitter),this._onA11yCharEmitter=this.register(new L.EventEmitter),this._onA11yTabEmitter=this.register(new L.EventEmitter),this._onWillOpen=this.register(new L.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(O.DecorationService),this._instantiationService.setService(M.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(re.LinkProviderService),this._instantiationService.setService(x.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(S.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((k,G)=>this.refresh(k,G))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(k=>this._reportWindowsOptions(k))),this.register(this._inputHandler.onColor(k=>this._handleColorEvent(k))),this.register((0,L.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,L.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,L.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,L.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(k=>this._afterResize(k.cols,k.rows))),this.register((0,W.toDisposable)(()=>{var k,G;this._customKeyEventHandler=void 0,(G=(k=this.element)==null?void 0:k.parentNode)==null||G.removeChild(this.element)}))}_handleColorEvent(H){if(this._themeService)for(const k of H){let G,j="";switch(k.index){case 256:G="foreground",j="10";break;case 257:G="background",j="11";break;case 258:G="cursor",j="12";break;default:G="ansi",j="4;"+k.index}switch(k.type){case 0:const ne=B.color.toColorRGB(G==="ansi"?this._themeService.colors.ansi[k.index]:this._themeService.colors[G]);this.coreService.triggerDataEvent(`${Y.C0.ESC}]${j};${(0,R.toRgbString)(ne)}${Y.C1_ESCAPED.ST}`);break;case 1:if(G==="ansi")this._themeService.modifyColors(D=>D.ansi[k.index]=B.channels.toColor(...k.color));else{const D=G;this._themeService.modifyColors(T=>T[D]=B.channels.toColor(...k.color))}break;case 2:this._themeService.restoreColor(k.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(H){H?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Q.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(H){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Y.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var H;return(H=this.textarea)==null?void 0:H.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Y.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const H=this.buffer.ybase+this.buffer.y,k=this.buffer.lines.get(H);if(!k)return;const G=Math.min(this.buffer.x,this.cols-1),j=this._renderService.dimensions.css.cell.height,ne=k.getWidth(G),D=this._renderService.dimensions.css.cell.width*ne,T=this.buffer.y*this._renderService.dimensions.css.cell.height,N=G*this._renderService.dimensions.css.cell.width;this.textarea.style.left=N+"px",this.textarea.style.top=T+"px",this.textarea.style.width=D+"px",this.textarea.style.height=j+"px",this.textarea.style.lineHeight=j+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,d.addDisposableDomListener)(this.element,"copy",k=>{this.hasSelection()&&(0,f.copyHandler)(k,this._selectionService)}));const H=k=>(0,f.handlePasteEvent)(k,this.textarea,this.coreService,this.optionsService);this.register((0,d.addDisposableDomListener)(this.textarea,"paste",H)),this.register((0,d.addDisposableDomListener)(this.element,"paste",H)),z.isFirefox?this.register((0,d.addDisposableDomListener)(this.element,"mousedown",k=>{k.button===2&&(0,f.rightClickHandler)(k,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,d.addDisposableDomListener)(this.element,"contextmenu",k=>{(0,f.rightClickHandler)(k,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),z.isLinux&&this.register((0,d.addDisposableDomListener)(this.element,"auxclick",k=>{k.button===1&&(0,f.moveTextAreaUnderMouseCursor)(k,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,d.addDisposableDomListener)(this.textarea,"keyup",H=>this._keyUp(H),!0)),this.register((0,d.addDisposableDomListener)(this.textarea,"keydown",H=>this._keyDown(H),!0)),this.register((0,d.addDisposableDomListener)(this.textarea,"keypress",H=>this._keyPress(H),!0)),this.register((0,d.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,d.addDisposableDomListener)(this.textarea,"compositionupdate",H=>this._compositionHelper.compositionupdate(H))),this.register((0,d.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,d.addDisposableDomListener)(this.textarea,"input",H=>this._inputEvent(H),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(H){var G;if(!H)throw new Error("Terminal requires a parent element.");if(H.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((G=this.element)==null?void 0:G.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=H.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),H.appendChild(this.element);const k=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),k.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,d.addDisposableDomListener)(this.screenElement,"mousemove",j=>this.updateCursorStyle(j))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),k.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",m.promptLabel),z.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,H.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(x.ICoreBrowserService,this._coreBrowserService),this.register((0,d.addDisposableDomListener)(this.textarea,"focus",j=>this._handleTextAreaFocus(j))),this.register((0,d.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(a.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(x.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(A.ThemeService),this._instantiationService.setService(x.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(p.CharacterJoinerService),this._instantiationService.setService(x.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(E.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(x.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(j=>this._onRender.fire(j))),this.onResize(j=>this._renderService.resize(j.cols,j.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(h.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(w.MouseService),this._instantiationService.setService(x.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(u.Linkifier,this.screenElement)),this.element.appendChild(k);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(b.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(j=>this.scrollLines(j.amount,j.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(y.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(x.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(j=>this.scrollLines(j.amount,j.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(j=>this._renderService.handleSelectionChanged(j.start,j.end,j.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(j=>{this.textarea.value=j,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(j=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,d.addDisposableDomListener)(this.element,"mousedown",j=>this._selectionService.handleMouseDown(j))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Q.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",j=>this._handleScreenReaderModeOptionChange(j))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",j=>{!this._overviewRulerRenderer&&j&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(n.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const H=this,k=this.element;function G(D){const T=H._mouseService.getMouseReportCoords(D,H.screenElement);if(!T)return!1;let N,q;switch(D.overrideType||D.type){case"mousemove":q=32,D.buttons===void 0?(N=3,D.button!==void 0&&(N=D.button<3?D.button:3)):N=1&D.buttons?0:4&D.buttons?1:2&D.buttons?2:3;break;case"mouseup":q=0,N=D.button<3?D.button:3;break;case"mousedown":q=1,N=D.button<3?D.button:3;break;case"wheel":if(H._customWheelEventHandler&&H._customWheelEventHandler(D)===!1||H.viewport.getLinesScrolled(D)===0)return!1;q=D.deltaY<0?0:1,N=4;break;default:return!1}return!(q===void 0||N===void 0||N>4)&&H.coreMouseService.triggerMouseEvent({col:T.col,row:T.row,x:T.x,y:T.y,button:N,action:q,ctrl:D.ctrlKey,alt:D.altKey,shift:D.shiftKey})}const j={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ne={mouseup:D=>(G(D),D.buttons||(this._document.removeEventListener("mouseup",j.mouseup),j.mousedrag&&this._document.removeEventListener("mousemove",j.mousedrag)),this.cancel(D)),wheel:D=>(G(D),this.cancel(D,!0)),mousedrag:D=>{D.buttons&&G(D)},mousemove:D=>{D.buttons||G(D)}};this.register(this.coreMouseService.onProtocolChange(D=>{D?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(D)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&D?j.mousemove||(k.addEventListener("mousemove",ne.mousemove),j.mousemove=ne.mousemove):(k.removeEventListener("mousemove",j.mousemove),j.mousemove=null),16&D?j.wheel||(k.addEventListener("wheel",ne.wheel,{passive:!1}),j.wheel=ne.wheel):(k.removeEventListener("wheel",j.wheel),j.wheel=null),2&D?j.mouseup||(j.mouseup=ne.mouseup):(this._document.removeEventListener("mouseup",j.mouseup),j.mouseup=null),4&D?j.mousedrag||(j.mousedrag=ne.mousedrag):(this._document.removeEventListener("mousemove",j.mousedrag),j.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,d.addDisposableDomListener)(k,"mousedown",D=>{if(D.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(D))return G(D),j.mouseup&&this._document.addEventListener("mouseup",j.mouseup),j.mousedrag&&this._document.addEventListener("mousemove",j.mousedrag),this.cancel(D)})),this.register((0,d.addDisposableDomListener)(k,"wheel",D=>{if(!j.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(D)===!1)return!1;if(!this.buffer.hasScrollback){const T=this.viewport.getLinesScrolled(D);if(T===0)return;const N=Y.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(D.deltaY<0?"A":"B");let q="";for(let K=0;K<Math.abs(T);K++)q+=N;return this.coreService.triggerDataEvent(q,!0),this.cancel(D,!0)}return this.viewport.handleWheel(D)?this.cancel(D):void 0}},{passive:!1})),this.register((0,d.addDisposableDomListener)(k,"touchstart",D=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(D),this.cancel(D)},{passive:!0})),this.register((0,d.addDisposableDomListener)(k,"touchmove",D=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(D)?void 0:this.cancel(D)},{passive:!1}))}refresh(H,k){var G;(G=this._renderService)==null||G.refreshRows(H,k)}updateCursorStyle(H){var k;(k=this._selectionService)!=null&&k.shouldColumnSelect(H)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(H,k,G=0){var j;G===1?(super.scrollLines(H,k,G),this.refresh(0,this.rows-1)):(j=this.viewport)==null||j.scrollLines(H)}paste(H){(0,f.paste)(H,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(H){this._customKeyEventHandler=H}attachCustomWheelEventHandler(H){this._customWheelEventHandler=H}registerLinkProvider(H){return this._linkProviderService.registerLinkProvider(H)}registerCharacterJoiner(H){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const k=this._characterJoinerService.register(H);return this.refresh(0,this.rows-1),k}deregisterCharacterJoiner(H){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(H)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(H){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+H)}registerDecoration(H){return this._decorationService.registerDecoration(H)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(H,k,G){this._selectionService.setSelection(H,k,G)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var H;(H=this._selectionService)==null||H.clearSelection()}selectAll(){var H;(H=this._selectionService)==null||H.selectAll()}selectLines(H,k){var G;(G=this._selectionService)==null||G.selectLines(H,k)}_keyDown(H){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1)return!1;const k=this.browser.isMac&&this.options.macOptionIsMeta&&H.altKey;if(!k&&!this._compositionHelper.keydown(H))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;k||H.key!=="Dead"&&H.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const G=(0,V.evaluateKeyboardEvent)(H,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(H),G.type===3||G.type===2){const j=this.rows-1;return this.scrollLines(G.type===2?-j:j),this.cancel(H,!0)}return G.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,H)||(G.cancel&&this.cancel(H,!0),!G.key||!!(H.key&&!H.ctrlKey&&!H.altKey&&!H.metaKey&&H.key.length===1&&H.key.charCodeAt(0)>=65&&H.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(G.key!==Y.C0.ETX&&G.key!==Y.C0.CR||(this.textarea.value=""),this._onKey.fire({key:G.key,domEvent:H}),this._showCursor(),this.coreService.triggerDataEvent(G.key,!0),!this.optionsService.rawOptions.screenReaderMode||H.altKey||H.ctrlKey?this.cancel(H,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(H,k){const G=H.isMac&&!this.options.macOptionIsMeta&&k.altKey&&!k.ctrlKey&&!k.metaKey||H.isWindows&&k.altKey&&k.ctrlKey&&!k.metaKey||H.isWindows&&k.getModifierState("AltGraph");return k.type==="keypress"?G:G&&(!k.keyCode||k.keyCode>47)}_keyUp(H){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1||(function(k){return k.keyCode===16||k.keyCode===17||k.keyCode===18}(H)||this.focus(),this.updateCursorStyle(H),this._keyPressHandled=!1)}_keyPress(H){let k;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(H)===!1)return!1;if(this.cancel(H),H.charCode)k=H.charCode;else if(H.which===null||H.which===void 0)k=H.keyCode;else{if(H.which===0||H.charCode===0)return!1;k=H.which}return!(!k||(H.altKey||H.ctrlKey||H.metaKey)&&!this._isThirdLevelShift(this.browser,H)||(k=String.fromCharCode(k),this._onKey.fire({key:k,domEvent:H}),this._showCursor(),this.coreService.triggerDataEvent(k,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(H){if(H.data&&H.inputType==="insertText"&&(!H.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const k=H.data;return this.coreService.triggerDataEvent(k,!0),this.cancel(H),!0}return!1}resize(H,k){H!==this.cols||k!==this.rows?super.resize(H,k):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(H,k){var G,j;(G=this._charSizeService)==null||G.measure(),(j=this.viewport)==null||j.syncScrollArea(!0)}clear(){var H;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let k=1;k<this.rows;k++)this.buffer.lines.push(this.buffer.getBlankLine(J.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(H=this.viewport)==null||H.reset(),this.refresh(0,this.rows-1)}}reset(){var k,G;this.options.rows=this.rows,this.options.cols=this.cols;const H=this._customKeyEventHandler;this._setup(),super.reset(),(k=this._selectionService)==null||k.reset(),this._decorationService.reset(),(G=this.viewport)==null||G.reset(),this._customKeyEventHandler=H,this.refresh(0,this.rows-1)}clearTextureAtlas(){var H;(H=this._renderService)==null||H.clearTextureAtlas()}_reportFocus(){var H;(H=this.element)!=null&&H.classList.contains("focus")?this.coreService.triggerDataEvent(Y.C0.ESC+"[I"):this.coreService.triggerDataEvent(Y.C0.ESC+"[O")}_reportWindowsOptions(H){if(this._renderService)switch(H){case F.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const k=this._renderService.dimensions.css.canvas.width.toFixed(0),G=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Y.C0.ESC}[4;${G};${k}t`);break;case F.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const j=this._renderService.dimensions.css.cell.width.toFixed(0),ne=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Y.C0.ESC}[6;${ne};${j}t`)}}cancel(H,k){if(this.options.cancelEvents||k)return H.preventDefault(),H.stopPropagation(),!1}}i.Terminal=he},9924:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(o,f=1e3){this._renderCallback=o,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,f,d){this._rowCount=d,o=o!==void 0?o:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const u=Date.now();if(u-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=u,this._innerRefresh();else if(!this._additionalRefreshRequested){const m=u-this._lastRefreshMs,S=this._debounceThresholdMS-m;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},S)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,f)}}},1680:function(v,i,o){var f=this&&this.__decorate||function(h,n,a,p){var C,w=arguments.length,E=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,a):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(h,n,a,p);else for(var y=h.length-1;y>=0;y--)(C=h[y])&&(E=(w<3?C(E):w>3?C(n,a,E):C(n,a))||E);return w>3&&E&&Object.defineProperty(n,a,E),E},d=this&&this.__param||function(h,n){return function(a,p){n(a,p,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const u=o(3656),m=o(4725),S=o(8460),b=o(844),g=o(2585);let l=i.Viewport=class extends b.Disposable{constructor(h,n,a,p,C,w,E,y){super(),this._viewportElement=h,this._scrollArea=n,this._bufferService=a,this._optionsService=p,this._charSizeService=C,this._renderService=w,this._coreBrowserService=E,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(x=>this._activeBuffer=x.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(x=>this._renderDimensions=x)),this._handleThemeChange(y.colors),this.register(y.onChangeColors(x=>this._handleThemeChange(x))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(h){this._viewportElement.style.backgroundColor=h.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(h){if(h)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const n=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==n&&(this._lastRecordedBufferHeight=n,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const h=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==h&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=h),this._refreshAnimationFrame=null}syncScrollArea(h=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(h);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(h)}_handleScroll(h){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const n=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:n,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const h=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(h*(this._smoothScrollState.target-this._smoothScrollState.origin)),h<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(h,n){const a=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(n<0&&this._viewportElement.scrollTop!==0||n>0&&a<this._lastRecordedBufferHeight)||(h.cancelable&&h.preventDefault(),!1)}handleWheel(h){const n=this._getPixelsScrolled(h);return n!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+n:this._smoothScrollState.target+=n,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=n,this._bubbleScroll(h,n))}scrollLines(h){if(h!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const n=h*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+n,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!1})}_getPixelsScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let n=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_LINE?n*=this._currentRowHeight:h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(n*=this._currentRowHeight*this._bufferService.rows),n}getBufferElements(h,n){var y;let a,p="";const C=[],w=n??this._bufferService.buffer.lines.length,E=this._bufferService.buffer.lines;for(let x=h;x<w;x++){const A=E.get(x);if(!A)continue;const B=(y=E.get(x+1))==null?void 0:y.isWrapped;if(p+=A.translateToString(!B),!B||x===E.length-1){const P=document.createElement("div");P.textContent=p,C.push(P),p.length>0&&(a=P),p=""}}return{bufferElements:C,cursorElement:a}}getLinesScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let n=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(n/=this._currentRowHeight+0,this._wheelPartialScroll+=n,n=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(n*=this._bufferService.rows),n}_applyScrollModifier(h,n){const a=this._optionsService.rawOptions.fastScrollModifier;return a==="alt"&&n.altKey||a==="ctrl"&&n.ctrlKey||a==="shift"&&n.shiftKey?h*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:h*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(h){this._lastTouchY=h.touches[0].pageY}handleTouchMove(h){const n=this._lastTouchY-h.touches[0].pageY;return this._lastTouchY=h.touches[0].pageY,n!==0&&(this._viewportElement.scrollTop+=n,this._bubbleScroll(h,n))}};i.Viewport=l=f([d(2,g.IBufferService),d(3,g.IOptionsService),d(4,m.ICharSizeService),d(5,m.IRenderService),d(6,m.ICoreBrowserService),d(7,m.IThemeService)],l)},3107:function(v,i,o){var f=this&&this.__decorate||function(g,l,h,n){var a,p=arguments.length,C=p<3?l:n===null?n=Object.getOwnPropertyDescriptor(l,h):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(g,l,h,n);else for(var w=g.length-1;w>=0;w--)(a=g[w])&&(C=(p<3?a(C):p>3?a(l,h,C):a(l,h))||C);return p>3&&C&&Object.defineProperty(l,h,C),C},d=this&&this.__param||function(g,l){return function(h,n){l(h,n,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const u=o(4725),m=o(844),S=o(2585);let b=i.BufferDecorationRenderer=class extends m.Disposable{constructor(g,l,h,n,a){super(),this._screenElement=g,this._bufferService=l,this._coreBrowserService=h,this._decorationService=n,this._renderService=a,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(p=>this._removeDecoration(p))),this.register((0,m.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const g of this._decorationService.decorations)this._renderDecoration(g);this._dimensionsChanged=!1}_renderDecoration(g){this._refreshStyle(g),this._dimensionsChanged&&this._refreshXPosition(g)}_createElement(g){var n;const l=this._coreBrowserService.mainDocument.createElement("div");l.classList.add("xterm-decoration"),l.classList.toggle("xterm-decoration-top-layer",((n=g==null?void 0:g.options)==null?void 0:n.layer)==="top"),l.style.width=`${Math.round((g.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,l.style.height=(g.options.height||1)*this._renderService.dimensions.css.cell.height+"px",l.style.top=(g.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",l.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const h=g.options.x??0;return h&&h>this._bufferService.cols&&(l.style.display="none"),this._refreshXPosition(g,l),l}_refreshStyle(g){const l=g.marker.line-this._bufferService.buffers.active.ydisp;if(l<0||l>=this._bufferService.rows)g.element&&(g.element.style.display="none",g.onRenderEmitter.fire(g.element));else{let h=this._decorationElements.get(g);h||(h=this._createElement(g),g.element=h,this._decorationElements.set(g,h),this._container.appendChild(h),g.onDispose(()=>{this._decorationElements.delete(g),h.remove()})),h.style.top=l*this._renderService.dimensions.css.cell.height+"px",h.style.display=this._altBufferIsActive?"none":"block",g.onRenderEmitter.fire(h)}}_refreshXPosition(g,l=g.element){if(!l)return;const h=g.options.x??0;(g.options.anchor||"left")==="right"?l.style.right=h?h*this._renderService.dimensions.css.cell.width+"px":"":l.style.left=h?h*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(g){var l;(l=this._decorationElements.get(g))==null||l.remove(),this._decorationElements.delete(g),g.dispose()}};i.BufferDecorationRenderer=b=f([d(1,S.IBufferService),d(2,u.ICoreBrowserService),d(3,S.IDecorationService),d(4,u.IRenderService)],b)},5871:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const f of this._zones)if(f.color===o.options.overviewRulerOptions.color&&f.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,o.marker.line))return;if(this._lineAdjacentToZone(f,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(f,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,f){return f>=o.startBufferLine&&f<=o.endBufferLine}_lineAdjacentToZone(o,f,d){return f>=o.startBufferLine-this._linePadding[d||"full"]&&f<=o.endBufferLine+this._linePadding[d||"full"]}_addLineToZone(o,f){o.startBufferLine=Math.min(o.startBufferLine,f),o.endBufferLine=Math.max(o.endBufferLine,f)}}},5744:function(v,i,o){var f=this&&this.__decorate||function(a,p,C,w){var E,y=arguments.length,x=y<3?p:w===null?w=Object.getOwnPropertyDescriptor(p,C):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(a,p,C,w);else for(var A=a.length-1;A>=0;A--)(E=a[A])&&(x=(y<3?E(x):y>3?E(p,C,x):E(p,C))||x);return y>3&&x&&Object.defineProperty(p,C,x),x},d=this&&this.__param||function(a,p){return function(C,w){p(C,w,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const u=o(5871),m=o(4725),S=o(844),b=o(2585),g={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0};let n=i.OverviewRulerRenderer=class extends S.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(a,p,C,w,E,y,x){var B;super(),this._viewportElement=a,this._screenElement=p,this._bufferService=C,this._decorationService=w,this._renderService=E,this._optionsService=y,this._coreBrowserService=x,this._colorZoneStore=new u.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(B=this._viewportElement.parentElement)==null||B.insertBefore(this._canvas,this._viewportElement);const A=this._canvas.getContext("2d");if(!A)throw new Error("Ctx cannot be null");this._ctx=A,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,S.toDisposable)(()=>{var P;(P=this._canvas)==null||P.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const a=Math.floor(this._canvas.width/3),p=Math.ceil(this._canvas.width/3);l.full=this._canvas.width,l.left=a,l.center=p,l.right=a,this._refreshDrawHeightConstants(),h.full=0,h.left=0,h.center=l.left,h.right=l.left+l.center}_refreshDrawHeightConstants(){g.full=Math.round(2*this._coreBrowserService.dpr);const a=this._canvas.height/this._bufferService.buffer.lines.length,p=Math.round(Math.max(Math.min(a,12),6)*this._coreBrowserService.dpr);g.left=p,g.center=p,g.right=p}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const p of this._decorationService.decorations)this._colorZoneStore.addDecoration(p);this._ctx.lineWidth=1;const a=this._colorZoneStore.zones;for(const p of a)p.position!=="full"&&this._renderColorZone(p);for(const p of a)p.position==="full"&&this._renderColorZone(p);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(a){this._ctx.fillStyle=a.color,this._ctx.fillRect(h[a.position||"full"],Math.round((this._canvas.height-1)*(a.startBufferLine/this._bufferService.buffers.active.lines.length)-g[a.position||"full"]/2),l[a.position||"full"],Math.round((this._canvas.height-1)*((a.endBufferLine-a.startBufferLine)/this._bufferService.buffers.active.lines.length)+g[a.position||"full"]))}_queueRefresh(a,p){this._shouldUpdateDimensions=a||this._shouldUpdateDimensions,this._shouldUpdateAnchor=p||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=n=f([d(2,b.IBufferService),d(3,b.IDecorationService),d(4,m.IRenderService),d(5,b.IOptionsService),d(6,m.ICoreBrowserService)],n)},2950:function(v,i,o){var f=this&&this.__decorate||function(g,l,h,n){var a,p=arguments.length,C=p<3?l:n===null?n=Object.getOwnPropertyDescriptor(l,h):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(g,l,h,n);else for(var w=g.length-1;w>=0;w--)(a=g[w])&&(C=(p<3?a(C):p>3?a(l,h,C):a(l,h))||C);return p>3&&C&&Object.defineProperty(l,h,C),C},d=this&&this.__param||function(g,l){return function(h,n){l(h,n,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const u=o(4725),m=o(2585),S=o(2584);let b=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,l,h,n,a,p){this._textarea=g,this._compositionView=l,this._bufferService=h,this._optionsService=n,this._coreService=a,this._renderService=p,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){const l={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let h;this._isSendingComposition=!1,l.start+=this._dataAlreadySent.length,h=this._isComposing?this._textarea.value.substring(l.start,l.end):this._textarea.value.substring(l.start),h.length>0&&this._coreService.triggerDataEvent(h,!0)}},0)}else{this._isSendingComposition=!1;const l=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(l,!0)}}_handleAnyTextareaChanges(){const g=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const l=this._textarea.value,h=l.replace(g,"");this._dataAlreadySent=h,l.length>g.length?this._coreService.triggerDataEvent(h,!0):l.length<g.length?this._coreService.triggerDataEvent(`${S.C0.DEL}`,!0):l.length===g.length&&l!==g&&this._coreService.triggerDataEvent(l,!0)}},0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const l=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),h=this._renderService.dimensions.css.cell.height,n=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,a=l*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=a+"px",this._compositionView.style.top=n+"px",this._compositionView.style.height=h+"px",this._compositionView.style.lineHeight=h+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const p=this._compositionView.getBoundingClientRect();this._textarea.style.left=a+"px",this._textarea.style.top=n+"px",this._textarea.style.width=Math.max(p.width,1)+"px",this._textarea.style.height=Math.max(p.height,1)+"px",this._textarea.style.lineHeight=p.height+"px"}g||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=b=f([d(2,m.IBufferService),d(3,m.IOptionsService),d(4,m.ICoreService),d(5,u.IRenderService)],b)},9806:(v,i)=>{function o(f,d,u){const m=u.getBoundingClientRect(),S=f.getComputedStyle(u),b=parseInt(S.getPropertyValue("padding-left")),g=parseInt(S.getPropertyValue("padding-top"));return[d.clientX-m.left-b,d.clientY-m.top-g]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=o,i.getCoords=function(f,d,u,m,S,b,g,l,h){if(!b)return;const n=o(f,d,u);return n?(n[0]=Math.ceil((n[0]+(h?g/2:0))/g),n[1]=Math.ceil(n[1]/l),n[0]=Math.min(Math.max(n[0],1),m+(h?1:0)),n[1]=Math.min(Math.max(n[1],1),S),n):void 0}},9504:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const f=o(2584);function d(l,h,n,a){const p=l-u(l,n),C=h-u(h,n),w=Math.abs(p-C)-function(E,y,x){let A=0;const B=E-u(E,x),P=y-u(y,x);for(let L=0;L<Math.abs(B-P);L++){const W=m(E,y)==="A"?-1:1,z=x.buffer.lines.get(B+W*L);z!=null&&z.isWrapped&&A++}return A}(l,h,n);return g(w,b(m(l,h),a))}function u(l,h){let n=0,a=h.buffer.lines.get(l),p=a==null?void 0:a.isWrapped;for(;p&&l>=0&&l<h.rows;)n++,a=h.buffer.lines.get(--l),p=a==null?void 0:a.isWrapped;return n}function m(l,h){return l>h?"A":"B"}function S(l,h,n,a,p,C){let w=l,E=h,y="";for(;w!==n||E!==a;)w+=p?1:-1,p&&w>C.cols-1?(y+=C.buffer.translateBufferLineToString(E,!1,l,w),w=0,l=0,E++):!p&&w<0&&(y+=C.buffer.translateBufferLineToString(E,!1,0,l+1),w=C.cols-1,l=w,E--);return y+C.buffer.translateBufferLineToString(E,!1,l,w)}function b(l,h){const n=h?"O":"[";return f.C0.ESC+n+l}function g(l,h){l=Math.floor(l);let n="";for(let a=0;a<l;a++)n+=h;return n}i.moveToCellSequence=function(l,h,n,a){const p=n.buffer.x,C=n.buffer.y;if(!n.buffer.hasScrollback)return function(y,x,A,B,P,L){return d(x,B,P,L).length===0?"":g(S(y,x,y,x-u(x,P),!1,P).length,b("D",L))}(p,C,0,h,n,a)+d(C,h,n,a)+function(y,x,A,B,P,L){let W;W=d(x,B,P,L).length>0?B-u(B,P):x;const z=B,J=function(Y,V,R,O,M,F){let Q;return Q=d(R,O,M,F).length>0?O-u(O,M):V,Y<R&&Q<=O||Y>=R&&Q<O?"C":"D"}(y,x,A,B,P,L);return g(S(y,W,A,z,J==="C",P).length,b(J,L))}(p,C,l,h,n,a);let w;if(C===h)return w=p>l?"D":"C",g(Math.abs(p-l),b(w,a));w=C>h?"D":"C";const E=Math.abs(C-h);return g(function(y,x){return x.cols-y}(C>h?l:p,n)+(E-1)*n.cols+1+((C>h?p:l)-1),b(w,a))}},1296:function(v,i,o){var f=this&&this.__decorate||function(L,W,z,J){var Y,V=arguments.length,R=V<3?W:J===null?J=Object.getOwnPropertyDescriptor(W,z):J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(L,W,z,J);else for(var O=L.length-1;O>=0;O--)(Y=L[O])&&(R=(V<3?Y(R):V>3?Y(W,z,R):Y(W,z))||R);return V>3&&R&&Object.defineProperty(W,z,R),R},d=this&&this.__param||function(L,W){return function(z,J){W(z,J,L)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const u=o(3787),m=o(2550),S=o(2223),b=o(6171),g=o(6052),l=o(4725),h=o(8055),n=o(8460),a=o(844),p=o(2585),C="xterm-dom-renderer-owner-",w="xterm-rows",E="xterm-fg-",y="xterm-bg-",x="xterm-focus",A="xterm-selection";let B=1,P=i.DomRenderer=class extends a.Disposable{constructor(L,W,z,J,Y,V,R,O,M,F,Q,re,he){super(),this._terminal=L,this._document=W,this._element=z,this._screenElement=J,this._viewportElement=Y,this._helperContainer=V,this._linkifier2=R,this._charSizeService=M,this._optionsService=F,this._bufferService=Q,this._coreBrowserService=re,this._themeService=he,this._terminalClass=B++,this._rowElements=[],this._selectionRenderModel=(0,g.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new n.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(w),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(A),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,b.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(ue=>this._injectCss(ue))),this._injectCss(this._themeService.colors),this._rowFactory=O.createInstance(u.DomRendererRowFactory,document),this._element.classList.add(C+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(ue=>this._handleLinkHover(ue))),this.register(this._linkifier2.onHideLinkUnderline(ue=>this._handleLinkLeave(ue))),this.register((0,a.toDisposable)(()=>{this._element.classList.remove(C+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new m.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const L=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*L,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*L),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/L),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/L),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const z of this._rowElements)z.style.width=`${this.dimensions.css.canvas.width}px`,z.style.height=`${this.dimensions.css.cell.height}px`,z.style.lineHeight=`${this.dimensions.css.cell.height}px`,z.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const W=`${this._terminalSelector} .${w} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=W,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(L){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let W=`${this._terminalSelector} .${w} { color: ${L.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;W+=`${this._terminalSelector} .${w} .xterm-dim { color: ${h.color.multiplyOpacity(L.foreground,.5).css};}`,W+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const z=`blink_underline_${this._terminalClass}`,J=`blink_bar_${this._terminalClass}`,Y=`blink_block_${this._terminalClass}`;W+=`@keyframes ${z} { 50% {  border-bottom-style: hidden; }}`,W+=`@keyframes ${J} { 50% {  box-shadow: none; }}`,W+=`@keyframes ${Y} { 0% {  background-color: ${L.cursor.css};  color: ${L.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${L.cursor.css}; }}`,W+=`${this._terminalSelector} .${w}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${z} 1s step-end infinite;}${this._terminalSelector} .${w}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${J} 1s step-end infinite;}${this._terminalSelector} .${w}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${Y} 1s step-end infinite;}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-block { background-color: ${L.cursor.css}; color: ${L.cursorAccent.css};}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${L.cursor.css} !important; color: ${L.cursorAccent.css} !important;}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${L.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${L.cursor.css} inset;}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${L.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,W+=`${this._terminalSelector} .${A} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${A} div { position: absolute; background-color: ${L.selectionBackgroundOpaque.css};}${this._terminalSelector} .${A} div { position: absolute; background-color: ${L.selectionInactiveBackgroundOpaque.css};}`;for(const[V,R]of L.ansi.entries())W+=`${this._terminalSelector} .${E}${V} { color: ${R.css}; }${this._terminalSelector} .${E}${V}.xterm-dim { color: ${h.color.multiplyOpacity(R,.5).css}; }${this._terminalSelector} .${y}${V} { background-color: ${R.css}; }`;W+=`${this._terminalSelector} .${E}${S.INVERTED_DEFAULT_COLOR} { color: ${h.color.opaque(L.background).css}; }${this._terminalSelector} .${E}${S.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${h.color.multiplyOpacity(h.color.opaque(L.background),.5).css}; }${this._terminalSelector} .${y}${S.INVERTED_DEFAULT_COLOR} { background-color: ${L.foreground.css}; }`,this._themeStyleElement.textContent=W}_setDefaultSpacing(){const L=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${L}px`,this._rowFactory.defaultSpacing=L}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(L,W){for(let z=this._rowElements.length;z<=W;z++){const J=this._document.createElement("div");this._rowContainer.appendChild(J),this._rowElements.push(J)}for(;this._rowElements.length>W;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(L,W){this._refreshRowElements(L,W),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(x),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(x),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(L,W,z){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(L,W,z),this.renderRows(0,this._bufferService.rows-1),!L||!W)return;this._selectionRenderModel.update(this._terminal,L,W,z);const J=this._selectionRenderModel.viewportStartRow,Y=this._selectionRenderModel.viewportEndRow,V=this._selectionRenderModel.viewportCappedStartRow,R=this._selectionRenderModel.viewportCappedEndRow;if(V>=this._bufferService.rows||R<0)return;const O=this._document.createDocumentFragment();if(z){const M=L[0]>W[0];O.appendChild(this._createSelectionElement(V,M?W[0]:L[0],M?L[0]:W[0],R-V+1))}else{const M=J===V?L[0]:0,F=V===Y?W[0]:this._bufferService.cols;O.appendChild(this._createSelectionElement(V,M,F));const Q=R-V-1;if(O.appendChild(this._createSelectionElement(V+1,0,this._bufferService.cols,Q)),V!==R){const re=Y===R?W[0]:this._bufferService.cols;O.appendChild(this._createSelectionElement(R,0,re))}}this._selectionContainer.appendChild(O)}_createSelectionElement(L,W,z,J=1){const Y=this._document.createElement("div"),V=W*this.dimensions.css.cell.width;let R=this.dimensions.css.cell.width*(z-W);return V+R>this.dimensions.css.canvas.width&&(R=this.dimensions.css.canvas.width-V),Y.style.height=J*this.dimensions.css.cell.height+"px",Y.style.top=L*this.dimensions.css.cell.height+"px",Y.style.left=`${V}px`,Y.style.width=`${R}px`,Y}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const L of this._rowElements)L.replaceChildren()}renderRows(L,W){const z=this._bufferService.buffer,J=z.ybase+z.y,Y=Math.min(z.x,this._bufferService.cols-1),V=this._optionsService.rawOptions.cursorBlink,R=this._optionsService.rawOptions.cursorStyle,O=this._optionsService.rawOptions.cursorInactiveStyle;for(let M=L;M<=W;M++){const F=M+z.ydisp,Q=this._rowElements[M],re=z.lines.get(F);if(!Q||!re)break;Q.replaceChildren(...this._rowFactory.createRow(re,F,F===J,R,O,Y,V,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${C}${this._terminalClass}`}_handleLinkHover(L){this._setCellUnderline(L.x1,L.x2,L.y1,L.y2,L.cols,!0)}_handleLinkLeave(L){this._setCellUnderline(L.x1,L.x2,L.y1,L.y2,L.cols,!1)}_setCellUnderline(L,W,z,J,Y,V){z<0&&(L=0),J<0&&(W=0);const R=this._bufferService.rows-1;z=Math.max(Math.min(z,R),0),J=Math.max(Math.min(J,R),0),Y=Math.min(Y,this._bufferService.cols);const O=this._bufferService.buffer,M=O.ybase+O.y,F=Math.min(O.x,Y-1),Q=this._optionsService.rawOptions.cursorBlink,re=this._optionsService.rawOptions.cursorStyle,he=this._optionsService.rawOptions.cursorInactiveStyle;for(let ue=z;ue<=J;++ue){const H=ue+O.ydisp,k=this._rowElements[ue],G=O.lines.get(H);if(!k||!G)break;k.replaceChildren(...this._rowFactory.createRow(G,H,H===M,re,he,F,Q,this.dimensions.css.cell.width,this._widthCache,V?ue===z?L:0:-1,V?(ue===J?W:Y)-1:-1))}}};i.DomRenderer=P=f([d(7,p.IInstantiationService),d(8,l.ICharSizeService),d(9,p.IOptionsService),d(10,p.IBufferService),d(11,l.ICoreBrowserService),d(12,l.IThemeService)],P)},3787:function(v,i,o){var f=this&&this.__decorate||function(w,E,y,x){var A,B=arguments.length,P=B<3?E:x===null?x=Object.getOwnPropertyDescriptor(E,y):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(w,E,y,x);else for(var L=w.length-1;L>=0;L--)(A=w[L])&&(P=(B<3?A(P):B>3?A(E,y,P):A(E,y))||P);return B>3&&P&&Object.defineProperty(E,y,P),P},d=this&&this.__param||function(w,E){return function(y,x){E(y,x,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const u=o(2223),m=o(643),S=o(511),b=o(2585),g=o(8055),l=o(4725),h=o(4269),n=o(6171),a=o(3734);let p=i.DomRendererRowFactory=class{constructor(w,E,y,x,A,B,P){this._document=w,this._characterJoinerService=E,this._optionsService=y,this._coreBrowserService=x,this._coreService=A,this._decorationService=B,this._themeService=P,this._workCell=new S.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(w,E,y){this._selectionStart=w,this._selectionEnd=E,this._columnSelectMode=y}createRow(w,E,y,x,A,B,P,L,W,z,J){const Y=[],V=this._characterJoinerService.getJoinedCharacters(E),R=this._themeService.colors;let O,M=w.getNoBgTrimmedLength();y&&M<B+1&&(M=B+1);let F=0,Q="",re=0,he=0,ue=0,H=!1,k=0,G=!1,j=0;const ne=[],D=z!==-1&&J!==-1;for(let T=0;T<M;T++){w.loadCell(T,this._workCell);let N=this._workCell.getWidth();if(N===0)continue;let q=!1,K=T,U=this._workCell;if(V.length>0&&T===V[0][0]){q=!0;const be=V.shift();U=new h.JoinedCellData(this._workCell,w.translateToString(!0,be[0],be[1]),be[1]-be[0]),K=be[1]-1,N=U.getWidth()}const se=this._isCellInSelection(T,E),te=y&&T===B,Z=D&&T>=z&&T<=J;let X=!1;this._decorationService.forEachDecorationAtCell(T,E,void 0,be=>{X=!0});let le=U.getChars()||m.WHITESPACE_CELL_CHAR;if(le===" "&&(U.isUnderline()||U.isOverline())&&(le=" "),j=N*L-W.get(le,U.isBold(),U.isItalic()),O){if(F&&(se&&G||!se&&!G&&U.bg===re)&&(se&&G&&R.selectionForeground||U.fg===he)&&U.extended.ext===ue&&Z===H&&j===k&&!te&&!q&&!X){U.isInvisible()?Q+=m.WHITESPACE_CELL_CHAR:Q+=le,F++;continue}F&&(O.textContent=Q),O=this._document.createElement("span"),F=0,Q=""}else O=this._document.createElement("span");if(re=U.bg,he=U.fg,ue=U.extended.ext,H=Z,k=j,G=se,q&&B>=T&&B<=K&&(B=T),!this._coreService.isCursorHidden&&te&&this._coreService.isCursorInitialized){if(ne.push("xterm-cursor"),this._coreBrowserService.isFocused)P&&ne.push("xterm-cursor-blink"),ne.push(x==="bar"?"xterm-cursor-bar":x==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(A)switch(A){case"outline":ne.push("xterm-cursor-outline");break;case"block":ne.push("xterm-cursor-block");break;case"bar":ne.push("xterm-cursor-bar");break;case"underline":ne.push("xterm-cursor-underline")}}if(U.isBold()&&ne.push("xterm-bold"),U.isItalic()&&ne.push("xterm-italic"),U.isDim()&&ne.push("xterm-dim"),Q=U.isInvisible()?m.WHITESPACE_CELL_CHAR:U.getChars()||m.WHITESPACE_CELL_CHAR,U.isUnderline()&&(ne.push(`xterm-underline-${U.extended.underlineStyle}`),Q===" "&&(Q=" "),!U.isUnderlineColorDefault()))if(U.isUnderlineColorRGB())O.style.textDecorationColor=`rgb(${a.AttributeData.toColorRGB(U.getUnderlineColor()).join(",")})`;else{let be=U.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&U.isBold()&&be<8&&(be+=8),O.style.textDecorationColor=R.ansi[be].css}U.isOverline()&&(ne.push("xterm-overline"),Q===" "&&(Q=" ")),U.isStrikethrough()&&ne.push("xterm-strikethrough"),Z&&(O.style.textDecoration="underline");let ee=U.getFgColor(),ae=U.getFgColorMode(),ce=U.getBgColor(),ge=U.getBgColorMode();const we=!!U.isInverse();if(we){const be=ee;ee=ce,ce=be;const ss=ae;ae=ge,ge=ss}let ve,Ie,Le,Ue=!1;switch(this._decorationService.forEachDecorationAtCell(T,E,void 0,be=>{be.options.layer!=="top"&&Ue||(be.backgroundColorRGB&&(ge=50331648,ce=be.backgroundColorRGB.rgba>>8&16777215,ve=be.backgroundColorRGB),be.foregroundColorRGB&&(ae=50331648,ee=be.foregroundColorRGB.rgba>>8&16777215,Ie=be.foregroundColorRGB),Ue=be.options.layer==="top")}),!Ue&&se&&(ve=this._coreBrowserService.isFocused?R.selectionBackgroundOpaque:R.selectionInactiveBackgroundOpaque,ce=ve.rgba>>8&16777215,ge=50331648,Ue=!0,R.selectionForeground&&(ae=50331648,ee=R.selectionForeground.rgba>>8&16777215,Ie=R.selectionForeground)),Ue&&ne.push("xterm-decoration-top"),ge){case 16777216:case 33554432:Le=R.ansi[ce],ne.push(`xterm-bg-${ce}`);break;case 50331648:Le=g.channels.toColor(ce>>16,ce>>8&255,255&ce),this._addStyle(O,`background-color:#${C((ce>>>0).toString(16),"0",6)}`);break;default:we?(Le=R.foreground,ne.push(`xterm-bg-${u.INVERTED_DEFAULT_COLOR}`)):Le=R.background}switch(ve||U.isDim()&&(ve=g.color.multiplyOpacity(Le,.5)),ae){case 16777216:case 33554432:U.isBold()&&ee<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ee+=8),this._applyMinimumContrast(O,Le,R.ansi[ee],U,ve,void 0)||ne.push(`xterm-fg-${ee}`);break;case 50331648:const be=g.channels.toColor(ee>>16&255,ee>>8&255,255&ee);this._applyMinimumContrast(O,Le,be,U,ve,Ie)||this._addStyle(O,`color:#${C(ee.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(O,Le,R.foreground,U,ve,Ie)||we&&ne.push(`xterm-fg-${u.INVERTED_DEFAULT_COLOR}`)}ne.length&&(O.className=ne.join(" "),ne.length=0),te||q||X?O.textContent=Q:F++,j!==this.defaultSpacing&&(O.style.letterSpacing=`${j}px`),Y.push(O),T=K}return O&&F&&(O.textContent=Q),Y}_applyMinimumContrast(w,E,y,x,A,B){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,n.treatGlyphAsBackgroundColor)(x.getCode()))return!1;const P=this._getContrastCache(x);let L;if(A||B||(L=P.getColor(E.rgba,y.rgba)),L===void 0){const W=this._optionsService.rawOptions.minimumContrastRatio/(x.isDim()?2:1);L=g.color.ensureContrastRatio(A||E,B||y,W),P.setColor((A||E).rgba,(B||y).rgba,L??null)}return!!L&&(this._addStyle(w,`color:${L.css}`),!0)}_getContrastCache(w){return w.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(w,E){w.setAttribute("style",`${w.getAttribute("style")||""}${E};`)}_isCellInSelection(w,E){const y=this._selectionStart,x=this._selectionEnd;return!(!y||!x)&&(this._columnSelectMode?y[0]<=x[0]?w>=y[0]&&E>=y[1]&&w<x[0]&&E<=x[1]:w<y[0]&&E>=y[1]&&w>=x[0]&&E<=x[1]:E>y[1]&&E<x[1]||y[1]===x[1]&&E===y[1]&&w>=y[0]&&w<x[0]||y[1]<x[1]&&E===x[1]&&w<x[0]||y[1]<x[1]&&E===y[1]&&w>=y[0])}};function C(w,E,y){for(;w.length<y;)w=E+w;return w}i.DomRendererRowFactory=p=f([d(1,l.ICharacterJoinerService),d(2,b.IOptionsService),d(3,l.ICoreBrowserService),d(4,b.ICoreService),d(5,b.IDecorationService),d(6,l.IThemeService)],p)},2550:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(o,f){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const d=o.createElement("span");d.classList.add("xterm-char-measure-element");const u=o.createElement("span");u.classList.add("xterm-char-measure-element"),u.style.fontWeight="bold";const m=o.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontStyle="italic";const S=o.createElement("span");S.classList.add("xterm-char-measure-element"),S.style.fontWeight="bold",S.style.fontStyle="italic",this._measureElements=[d,u,m,S],this._container.appendChild(d),this._container.appendChild(u),this._container.appendChild(m),this._container.appendChild(S),f.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,f,d,u){o===this._font&&f===this._fontSize&&d===this._weight&&u===this._weightBold||(this._font=o,this._fontSize=f,this._weight=d,this._weightBold=u,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${d}`,this._measureElements[1].style.fontWeight=`${u}`,this._measureElements[2].style.fontWeight=`${d}`,this._measureElements[3].style.fontWeight=`${u}`,this.clear())}get(o,f,d){let u=0;if(!f&&!d&&o.length===1&&(u=o.charCodeAt(0))<256){if(this._flat[u]!==-9999)return this._flat[u];const b=this._measure(o,0);return b>0&&(this._flat[u]=b),b}let m=o;f&&(m+="B"),d&&(m+="I");let S=this._holey.get(m);if(S===void 0){let b=0;f&&(b|=1),d&&(b|=2),S=this._measure(o,b),S>0&&this._holey.set(m,S)}return S}_measure(o,f){const d=this._measureElements[f];return d.textContent=o.repeat(32),d.offsetWidth/32}}},2223:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=o(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(v,i)=>{function o(d){return 57508<=d&&d<=57558}function f(d){return d>=128512&&d<=128591||d>=127744&&d<=128511||d>=128640&&d<=128767||d>=9728&&d<=9983||d>=9984&&d<=10175||d>=65024&&d<=65039||d>=129280&&d<=129535||d>=127462&&d<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},i.isEmoji=f,i.allowRescaling=function(d,u,m,S){return u===1&&m>Math.ceil(1.5*S)&&d!==void 0&&d>255&&!f(d)&&!o(d)&&!function(b){return 57344<=b&&b<=63743}(d)},i.treatGlyphAsBackgroundColor=function(d){return o(d)||function(u){return 9472<=u&&u<=9631}(d)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(d,u,m=0){return(d-(2*Math.round(u)-m))%(2*Math.round(u))}},6052:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(d,u,m,S=!1){if(this.selectionStart=u,this.selectionEnd=m,!u||!m||u[0]===m[0]&&u[1]===m[1])return void this.clear();const b=d.buffers.active.ydisp,g=u[1]-b,l=m[1]-b,h=Math.max(g,0),n=Math.min(l,d.rows-1);h>=d.rows||n<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=S,this.viewportStartRow=g,this.viewportEndRow=l,this.viewportCappedStartRow=h,this.viewportCappedEndRow=n,this.startCol=u[0],this.endCol=m[0])}isCellSelected(d,u,m){return!!this.hasSelection&&(m-=d.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?u>=this.startCol&&m>=this.viewportCappedStartRow&&u<this.endCol&&m<=this.viewportCappedEndRow:u<this.startCol&&m>=this.viewportCappedStartRow&&u>=this.endCol&&m<=this.viewportCappedEndRow:m>this.viewportStartRow&&m<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&m===this.viewportStartRow&&u>=this.startCol&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&m===this.viewportEndRow&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&m===this.viewportStartRow&&u>=this.startCol)}}i.createSelectionRenderModel=function(){return new o}},456:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,f=this.selectionEnd;return!(!o||!f)&&(o[1]>f[1]||o[1]===f[1]&&o[0]>f[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(v,i,o){var f=this&&this.__decorate||function(n,a,p,C){var w,E=arguments.length,y=E<3?a:C===null?C=Object.getOwnPropertyDescriptor(a,p):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(n,a,p,C);else for(var x=n.length-1;x>=0;x--)(w=n[x])&&(y=(E<3?w(y):E>3?w(a,p,y):w(a,p))||y);return E>3&&y&&Object.defineProperty(a,p,y),y},d=this&&this.__param||function(n,a){return function(p,C){a(p,C,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const u=o(2585),m=o(8460),S=o(844);let b=i.CharSizeService=class extends S.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(n,a,p){super(),this._optionsService=p,this.width=0,this.height=0,this._onCharSizeChange=this.register(new m.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new h(this._optionsService))}catch{this._measureStrategy=this.register(new l(n,a,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const n=this._measureStrategy.measure();n.width===this.width&&n.height===this.height||(this.width=n.width,this.height=n.height,this._onCharSizeChange.fire())}};i.CharSizeService=b=f([d(2,u.IOptionsService)],b);class g extends S.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(a,p){a!==void 0&&a>0&&p!==void 0&&p>0&&(this._result.width=a,this._result.height=p)}}class l extends g{constructor(a,p,C){super(),this._document=a,this._parentElement=p,this._optionsService=C,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class h extends g{constructor(a){super(),this._optionsService=a,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const p=this._ctx.measureText("W");if(!("width"in p&&"fontBoundingBoxAscent"in p&&"fontBoundingBoxDescent"in p))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const a=this._ctx.measureText("W");return this._validateAndSet(a.width,a.fontBoundingBoxAscent+a.fontBoundingBoxDescent),this._result}}},4269:function(v,i,o){var f=this&&this.__decorate||function(h,n,a,p){var C,w=arguments.length,E=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,a):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(h,n,a,p);else for(var y=h.length-1;y>=0;y--)(C=h[y])&&(E=(w<3?C(E):w>3?C(n,a,E):C(n,a))||E);return w>3&&E&&Object.defineProperty(n,a,E),E},d=this&&this.__param||function(h,n){return function(a,p){n(a,p,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const u=o(3734),m=o(643),S=o(511),b=o(2585);class g extends u.AttributeData{constructor(n,a,p){super(),this.content=0,this.combinedData="",this.fg=n.fg,this.bg=n.bg,this.combinedData=a,this._width=p}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(n){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=g;let l=i.CharacterJoinerService=class Fl{constructor(n){this._bufferService=n,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new S.CellData}register(n){const a={id:this._nextCharacterJoinerId++,handler:n};return this._characterJoiners.push(a),a.id}deregister(n){for(let a=0;a<this._characterJoiners.length;a++)if(this._characterJoiners[a].id===n)return this._characterJoiners.splice(a,1),!0;return!1}getJoinedCharacters(n){if(this._characterJoiners.length===0)return[];const a=this._bufferService.buffer.lines.get(n);if(!a||a.length===0)return[];const p=[],C=a.translateToString(!0);let w=0,E=0,y=0,x=a.getFg(0),A=a.getBg(0);for(let B=0;B<a.getTrimmedLength();B++)if(a.loadCell(B,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==x||this._workCell.bg!==A){if(B-w>1){const P=this._getJoinedRanges(C,y,E,a,w);for(let L=0;L<P.length;L++)p.push(P[L])}w=B,y=E,x=this._workCell.fg,A=this._workCell.bg}E+=this._workCell.getChars().length||m.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-w>1){const B=this._getJoinedRanges(C,y,E,a,w);for(let P=0;P<B.length;P++)p.push(B[P])}return p}_getJoinedRanges(n,a,p,C,w){const E=n.substring(a,p);let y=[];try{y=this._characterJoiners[0].handler(E)}catch(x){console.error(x)}for(let x=1;x<this._characterJoiners.length;x++)try{const A=this._characterJoiners[x].handler(E);for(let B=0;B<A.length;B++)Fl._mergeRanges(y,A[B])}catch(A){console.error(A)}return this._stringRangesToCellRanges(y,C,w),y}_stringRangesToCellRanges(n,a,p){let C=0,w=!1,E=0,y=n[C];if(y){for(let x=p;x<this._bufferService.cols;x++){const A=a.getWidth(x),B=a.getString(x).length||m.WHITESPACE_CELL_CHAR.length;if(A!==0){if(!w&&y[0]<=E&&(y[0]=x,w=!0),y[1]<=E){if(y[1]=x,y=n[++C],!y)break;y[0]<=E?(y[0]=x,w=!0):w=!1}E+=B}}y&&(y[1]=this._bufferService.cols)}}static _mergeRanges(n,a){let p=!1;for(let C=0;C<n.length;C++){const w=n[C];if(p){if(a[1]<=w[0])return n[C-1][1]=a[1],n;if(a[1]<=w[1])return n[C-1][1]=Math.max(a[1],w[1]),n.splice(C,1),n;n.splice(C,1),C--}else{if(a[1]<=w[0])return n.splice(C,0,a),n;if(a[1]<=w[1])return w[0]=Math.min(a[0],w[0]),n;a[0]<w[1]&&(w[0]=Math.min(a[0],w[0]),p=!0)}}return p?n[n.length-1][1]=a[1]:n.push(a),n}};i.CharacterJoinerService=l=f([d(0,b.IBufferService)],l)},5114:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const f=o(844),d=o(8460),u=o(3656);class m extends f.Disposable{constructor(g,l,h){super(),this._textarea=g,this._window=l,this.mainDocument=h,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new S(this._window),this._onDprChange=this.register(new d.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new d.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(n=>this._screenDprMonitor.setWindow(n))),this.register((0,d.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(g){this._window!==g&&(this._window=g,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=m;class S extends f.Disposable{constructor(g){super(),this._parentWindow=g,this._windowResizeListener=this.register(new f.MutableDisposable),this._onDprChange=this.register(new d.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,f.toDisposable)(()=>this.clearListener()))}setWindow(g){this._parentWindow=g,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,u.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var g;this._outerListener&&((g=this._resolutionMediaMatchList)==null||g.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const f=o(844);class d extends f.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,f.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(m){return this.linkProviders.push(m),{dispose:()=>{const S=this.linkProviders.indexOf(m);S!==-1&&this.linkProviders.splice(S,1)}}}}i.LinkProviderService=d},8934:function(v,i,o){var f=this&&this.__decorate||function(b,g,l,h){var n,a=arguments.length,p=a<3?g:h===null?h=Object.getOwnPropertyDescriptor(g,l):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(b,g,l,h);else for(var C=b.length-1;C>=0;C--)(n=b[C])&&(p=(a<3?n(p):a>3?n(g,l,p):n(g,l))||p);return a>3&&p&&Object.defineProperty(g,l,p),p},d=this&&this.__param||function(b,g){return function(l,h){g(l,h,b)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const u=o(4725),m=o(9806);let S=i.MouseService=class{constructor(b,g){this._renderService=b,this._charSizeService=g}getCoords(b,g,l,h,n){return(0,m.getCoords)(window,b,g,l,h,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,n)}getMouseReportCoords(b,g){const l=(0,m.getCoordsRelativeToElement)(window,b,g);if(this._charSizeService.hasValidSize)return l[0]=Math.min(Math.max(l[0],0),this._renderService.dimensions.css.canvas.width-1),l[1]=Math.min(Math.max(l[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(l[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(l[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(l[0]),y:Math.floor(l[1])}}};i.MouseService=S=f([d(0,u.IRenderService),d(1,u.ICharSizeService)],S)},3230:function(v,i,o){var f=this&&this.__decorate||function(n,a,p,C){var w,E=arguments.length,y=E<3?a:C===null?C=Object.getOwnPropertyDescriptor(a,p):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(n,a,p,C);else for(var x=n.length-1;x>=0;x--)(w=n[x])&&(y=(E<3?w(y):E>3?w(a,p,y):w(a,p))||y);return E>3&&y&&Object.defineProperty(a,p,y),y},d=this&&this.__param||function(n,a){return function(p,C){a(p,C,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const u=o(6193),m=o(4725),S=o(8460),b=o(844),g=o(7226),l=o(2585);let h=i.RenderService=class extends b.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(n,a,p,C,w,E,y,x){super(),this._rowCount=n,this._charSizeService=C,this._renderer=this.register(new b.MutableDisposable),this._pausedResizeTask=new g.DebouncedIdleTask,this._observerDisposable=this.register(new b.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new S.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new S.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new S.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new S.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new u.RenderDebouncer((A,B)=>this._renderRows(A,B),y),this.register(this._renderDebouncer),this.register(y.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(E.onResize(()=>this._fullRefresh())),this.register(E.buffers.onBufferActivate(()=>{var A;return(A=this._renderer.value)==null?void 0:A.clear()})),this.register(p.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(w.onDecorationRegistered(()=>this._fullRefresh())),this.register(w.onDecorationRemoved(()=>this._fullRefresh())),this.register(p.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(E.cols,E.rows),this._fullRefresh()})),this.register(p.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(E.buffer.y,E.buffer.y,!0))),this.register(x.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(y.window,a),this.register(y.onWindowChange(A=>this._registerIntersectionObserver(A,a)))}_registerIntersectionObserver(n,a){if("IntersectionObserver"in n){const p=new n.IntersectionObserver(C=>this._handleIntersectionChange(C[C.length-1]),{threshold:0});p.observe(a),this._observerDisposable.value=(0,b.toDisposable)(()=>p.disconnect())}}_handleIntersectionChange(n){this._isPaused=n.isIntersecting===void 0?n.intersectionRatio===0:!n.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(n,a,p=!1){this._isPaused?this._needsFullRefresh=!0:(p||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(n,a,this._rowCount))}_renderRows(n,a){this._renderer.value&&(n=Math.min(n,this._rowCount-1),a=Math.min(a,this._rowCount-1),this._renderer.value.renderRows(n,a),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:n,end:a}),this._onRender.fire({start:n,end:a}),this._isNextRenderRedrawOnly=!0)}resize(n,a){this._rowCount=a,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(n){this._renderer.value=n,this._renderer.value&&(this._renderer.value.onRequestRedraw(a=>this.refreshRows(a.start,a.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(n){return this._renderDebouncer.addRefreshCallback(n)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var n,a;this._renderer.value&&((a=(n=this._renderer.value).clearTextureAtlas)==null||a.call(n),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(n,a){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var p;return(p=this._renderer.value)==null?void 0:p.handleResize(n,a)}):this._renderer.value.handleResize(n,a),this._fullRefresh())}handleCharSizeChanged(){var n;(n=this._renderer.value)==null||n.handleCharSizeChanged()}handleBlur(){var n;(n=this._renderer.value)==null||n.handleBlur()}handleFocus(){var n;(n=this._renderer.value)==null||n.handleFocus()}handleSelectionChanged(n,a,p){var C;this._selectionState.start=n,this._selectionState.end=a,this._selectionState.columnSelectMode=p,(C=this._renderer.value)==null||C.handleSelectionChanged(n,a,p)}handleCursorMove(){var n;(n=this._renderer.value)==null||n.handleCursorMove()}clear(){var n;(n=this._renderer.value)==null||n.clear()}};i.RenderService=h=f([d(2,l.IOptionsService),d(3,m.ICharSizeService),d(4,l.IDecorationService),d(5,l.IBufferService),d(6,m.ICoreBrowserService),d(7,m.IThemeService)],h)},9312:function(v,i,o){var f=this&&this.__decorate||function(y,x,A,B){var P,L=arguments.length,W=L<3?x:B===null?B=Object.getOwnPropertyDescriptor(x,A):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(y,x,A,B);else for(var z=y.length-1;z>=0;z--)(P=y[z])&&(W=(L<3?P(W):L>3?P(x,A,W):P(x,A))||W);return L>3&&W&&Object.defineProperty(x,A,W),W},d=this&&this.__param||function(y,x){return function(A,B){x(A,B,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const u=o(9806),m=o(9504),S=o(456),b=o(4725),g=o(8460),l=o(844),h=o(6114),n=o(4841),a=o(511),p=o(2585),C=" ",w=new RegExp(C,"g");let E=i.SelectionService=class extends l.Disposable{constructor(y,x,A,B,P,L,W,z,J){super(),this._element=y,this._screenElement=x,this._linkifier=A,this._bufferService=B,this._coreService=P,this._mouseService=L,this._optionsService=W,this._renderService=z,this._coreBrowserService=J,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new a.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Y=>this._handleMouseMove(Y),this._mouseUpListener=Y=>this._handleMouseUp(Y),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Y=>this._handleTrim(Y)),this.register(this._bufferService.buffers.onBufferActivate(Y=>this._handleBufferActivate(Y))),this.enable(),this._model=new S.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,l.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const y=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;return!(!y||!x||y[0]===x[0]&&y[1]===x[1])}get selectionText(){const y=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;if(!y||!x)return"";const A=this._bufferService.buffer,B=[];if(this._activeSelectionMode===3){if(y[0]===x[0])return"";const P=y[0]<x[0]?y[0]:x[0],L=y[0]<x[0]?x[0]:y[0];for(let W=y[1];W<=x[1];W++){const z=A.translateBufferLineToString(W,!0,P,L);B.push(z)}}else{const P=y[1]===x[1]?x[0]:void 0;B.push(A.translateBufferLineToString(y[1],!0,y[0],P));for(let L=y[1]+1;L<=x[1]-1;L++){const W=A.lines.get(L),z=A.translateBufferLineToString(L,!0);W!=null&&W.isWrapped?B[B.length-1]+=z:B.push(z)}if(y[1]!==x[1]){const L=A.lines.get(x[1]),W=A.translateBufferLineToString(x[1],!0,0,x[0]);L&&L.isWrapped?B[B.length-1]+=W:B.push(W)}}return B.map(P=>P.replace(w," ")).join(h.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(y){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),h.isLinux&&y&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(y){const x=this._getMouseBufferCoords(y),A=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;return!!(A&&B&&x)&&this._areCoordsInSelection(x,A,B)}isCellInSelection(y,x){const A=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;return!(!A||!B)&&this._areCoordsInSelection([y,x],A,B)}_areCoordsInSelection(y,x,A){return y[1]>x[1]&&y[1]<A[1]||x[1]===A[1]&&y[1]===x[1]&&y[0]>=x[0]&&y[0]<A[0]||x[1]<A[1]&&y[1]===A[1]&&y[0]<A[0]||x[1]<A[1]&&y[1]===x[1]&&y[0]>=x[0]}_selectWordAtCursor(y,x){var P,L;const A=(L=(P=this._linkifier.currentLink)==null?void 0:P.link)==null?void 0:L.range;if(A)return this._model.selectionStart=[A.start.x-1,A.start.y-1],this._model.selectionStartLength=(0,n.getRangeLength)(A,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const B=this._getMouseBufferCoords(y);return!!B&&(this._selectWordAt(B,x),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(y,x){this._model.clearSelection(),y=Math.max(y,0),x=Math.min(x,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,y],this._model.selectionEnd=[this._bufferService.cols,x],this.refresh(),this._onSelectionChange.fire()}_handleTrim(y){this._model.handleTrim(y)&&this.refresh()}_getMouseBufferCoords(y){const x=this._mouseService.getCoords(y,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(x)return x[0]--,x[1]--,x[1]+=this._bufferService.buffer.ydisp,x}_getMouseEventScrollAmount(y){let x=(0,u.getCoordsRelativeToElement)(this._coreBrowserService.window,y,this._screenElement)[1];const A=this._renderService.dimensions.css.canvas.height;return x>=0&&x<=A?0:(x>A&&(x-=A),x=Math.min(Math.max(x,-50),50),x/=50,x/Math.abs(x)+Math.round(14*x))}shouldForceSelection(y){return h.isMac?y.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:y.shiftKey}handleMouseDown(y){if(this._mouseDownTimeStamp=y.timeStamp,(y.button!==2||!this.hasSelection)&&y.button===0){if(!this._enabled){if(!this.shouldForceSelection(y))return;y.stopPropagation()}y.preventDefault(),this._dragScrollAmount=0,this._enabled&&y.shiftKey?this._handleIncrementalClick(y):y.detail===1?this._handleSingleClick(y):y.detail===2?this._handleDoubleClick(y):y.detail===3&&this._handleTripleClick(y),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(y){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(y))}_handleSingleClick(y){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(y)?3:0,this._model.selectionStart=this._getMouseBufferCoords(y),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const x=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);x&&x.length!==this._model.selectionStart[0]&&x.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(y){this._selectWordAtCursor(y,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(y){const x=this._getMouseBufferCoords(y);x&&(this._activeSelectionMode=2,this._selectLineAt(x[1]))}shouldColumnSelect(y){return y.altKey&&!(h.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(y){if(y.stopImmediatePropagation(),!this._model.selectionStart)return;const x=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(y),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(y),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const A=this._bufferService.buffer;if(this._model.selectionEnd[1]<A.lines.length){const B=A.lines.get(this._model.selectionEnd[1]);B&&B.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}x&&x[0]===this._model.selectionEnd[0]&&x[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const y=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(y.ydisp+this._bufferService.rows,y.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=y.ydisp),this.refresh()}}_handleMouseUp(y){const x=y.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&x<500&&y.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const A=this._mouseService.getCoords(y,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(A&&A[0]!==void 0&&A[1]!==void 0){const B=(0,m.moveToCellSequence)(A[0]-1,A[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(B,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const y=this._model.finalSelectionStart,x=this._model.finalSelectionEnd,A=!(!y||!x||y[0]===x[0]&&y[1]===x[1]);A?y&&x&&(this._oldSelectionStart&&this._oldSelectionEnd&&y[0]===this._oldSelectionStart[0]&&y[1]===this._oldSelectionStart[1]&&x[0]===this._oldSelectionEnd[0]&&x[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(y,x,A)):this._oldHasSelection&&this._fireOnSelectionChange(y,x,A)}_fireOnSelectionChange(y,x,A){this._oldSelectionStart=y,this._oldSelectionEnd=x,this._oldHasSelection=A,this._onSelectionChange.fire()}_handleBufferActivate(y){this.clearSelection(),this._trimListener.dispose(),this._trimListener=y.activeBuffer.lines.onTrim(x=>this._handleTrim(x))}_convertViewportColToCharacterIndex(y,x){let A=x;for(let B=0;x>=B;B++){const P=y.loadCell(B,this._workCell).getChars().length;this._workCell.getWidth()===0?A--:P>1&&x!==B&&(A+=P-1)}return A}setSelection(y,x,A){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[y,x],this._model.selectionStartLength=A,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(y){this._isClickInSelection(y)||(this._selectWordAtCursor(y,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(y,x,A=!0,B=!0){if(y[0]>=this._bufferService.cols)return;const P=this._bufferService.buffer,L=P.lines.get(y[1]);if(!L)return;const W=P.translateBufferLineToString(y[1],!1);let z=this._convertViewportColToCharacterIndex(L,y[0]),J=z;const Y=y[0]-z;let V=0,R=0,O=0,M=0;if(W.charAt(z)===" "){for(;z>0&&W.charAt(z-1)===" ";)z--;for(;J<W.length&&W.charAt(J+1)===" ";)J++}else{let re=y[0],he=y[0];L.getWidth(re)===0&&(V++,re--),L.getWidth(he)===2&&(R++,he++);const ue=L.getString(he).length;for(ue>1&&(M+=ue-1,J+=ue-1);re>0&&z>0&&!this._isCharWordSeparator(L.loadCell(re-1,this._workCell));){L.loadCell(re-1,this._workCell);const H=this._workCell.getChars().length;this._workCell.getWidth()===0?(V++,re--):H>1&&(O+=H-1,z-=H-1),z--,re--}for(;he<L.length&&J+1<W.length&&!this._isCharWordSeparator(L.loadCell(he+1,this._workCell));){L.loadCell(he+1,this._workCell);const H=this._workCell.getChars().length;this._workCell.getWidth()===2?(R++,he++):H>1&&(M+=H-1,J+=H-1),J++,he++}}J++;let F=z+Y-V+O,Q=Math.min(this._bufferService.cols,J-z+V+R-O-M);if(x||W.slice(z,J).trim()!==""){if(A&&F===0&&L.getCodePoint(0)!==32){const re=P.lines.get(y[1]-1);if(re&&L.isWrapped&&re.getCodePoint(this._bufferService.cols-1)!==32){const he=this._getWordAt([this._bufferService.cols-1,y[1]-1],!1,!0,!1);if(he){const ue=this._bufferService.cols-he.start;F-=ue,Q+=ue}}}if(B&&F+Q===this._bufferService.cols&&L.getCodePoint(this._bufferService.cols-1)!==32){const re=P.lines.get(y[1]+1);if(re!=null&&re.isWrapped&&re.getCodePoint(0)!==32){const he=this._getWordAt([0,y[1]+1],!1,!1,!0);he&&(Q+=he.length)}}return{start:F,length:Q}}}_selectWordAt(y,x){const A=this._getWordAt(y,x);if(A){for(;A.start<0;)A.start+=this._bufferService.cols,y[1]--;this._model.selectionStart=[A.start,y[1]],this._model.selectionStartLength=A.length}}_selectToWordAt(y){const x=this._getWordAt(y,!0);if(x){let A=y[1];for(;x.start<0;)x.start+=this._bufferService.cols,A--;if(!this._model.areSelectionValuesReversed())for(;x.start+x.length>this._bufferService.cols;)x.length-=this._bufferService.cols,A++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?x.start:x.start+x.length,A]}}_isCharWordSeparator(y){return y.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(y.getChars())>=0}_selectLineAt(y){const x=this._bufferService.buffer.getWrappedRangeForLine(y),A={start:{x:0,y:x.first},end:{x:this._bufferService.cols-1,y:x.last}};this._model.selectionStart=[0,x.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,n.getRangeLength)(A,this._bufferService.cols)}};i.SelectionService=E=f([d(3,p.IBufferService),d(4,p.ICoreService),d(5,b.IMouseService),d(6,p.IOptionsService),d(7,b.IRenderService),d(8,b.ICoreBrowserService)],E)},4725:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const f=o(8343);i.ICharSizeService=(0,f.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),i.IMouseService=(0,f.createDecorator)("MouseService"),i.IRenderService=(0,f.createDecorator)("RenderService"),i.ISelectionService=(0,f.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,f.createDecorator)("ThemeService"),i.ILinkProviderService=(0,f.createDecorator)("LinkProviderService")},6731:function(v,i,o){var f=this&&this.__decorate||function(E,y,x,A){var B,P=arguments.length,L=P<3?y:A===null?A=Object.getOwnPropertyDescriptor(y,x):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(E,y,x,A);else for(var W=E.length-1;W>=0;W--)(B=E[W])&&(L=(P<3?B(L):P>3?B(y,x,L):B(y,x))||L);return P>3&&L&&Object.defineProperty(y,x,L),L},d=this&&this.__param||function(E,y){return function(x,A){y(x,A,E)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const u=o(7239),m=o(8055),S=o(8460),b=o(844),g=o(2585),l=m.css.toColor("#ffffff"),h=m.css.toColor("#000000"),n=m.css.toColor("#ffffff"),a=m.css.toColor("#000000"),p={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const E=[m.css.toColor("#2e3436"),m.css.toColor("#cc0000"),m.css.toColor("#4e9a06"),m.css.toColor("#c4a000"),m.css.toColor("#3465a4"),m.css.toColor("#75507b"),m.css.toColor("#06989a"),m.css.toColor("#d3d7cf"),m.css.toColor("#555753"),m.css.toColor("#ef2929"),m.css.toColor("#8ae234"),m.css.toColor("#fce94f"),m.css.toColor("#729fcf"),m.css.toColor("#ad7fa8"),m.css.toColor("#34e2e2"),m.css.toColor("#eeeeec")],y=[0,95,135,175,215,255];for(let x=0;x<216;x++){const A=y[x/36%6|0],B=y[x/6%6|0],P=y[x%6];E.push({css:m.channels.toCss(A,B,P),rgba:m.channels.toRgba(A,B,P)})}for(let x=0;x<24;x++){const A=8+10*x;E.push({css:m.channels.toCss(A,A,A),rgba:m.channels.toRgba(A,A,A)})}return E})());let C=i.ThemeService=class extends b.Disposable{get colors(){return this._colors}constructor(E){super(),this._optionsService=E,this._contrastCache=new u.ColorContrastCache,this._halfContrastCache=new u.ColorContrastCache,this._onChangeColors=this.register(new S.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:l,background:h,cursor:n,cursorAccent:a,selectionForeground:void 0,selectionBackgroundTransparent:p,selectionBackgroundOpaque:m.color.blend(h,p),selectionInactiveBackgroundTransparent:p,selectionInactiveBackgroundOpaque:m.color.blend(h,p),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(E={}){const y=this._colors;if(y.foreground=w(E.foreground,l),y.background=w(E.background,h),y.cursor=w(E.cursor,n),y.cursorAccent=w(E.cursorAccent,a),y.selectionBackgroundTransparent=w(E.selectionBackground,p),y.selectionBackgroundOpaque=m.color.blend(y.background,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundTransparent=w(E.selectionInactiveBackground,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundOpaque=m.color.blend(y.background,y.selectionInactiveBackgroundTransparent),y.selectionForeground=E.selectionForeground?w(E.selectionForeground,m.NULL_COLOR):void 0,y.selectionForeground===m.NULL_COLOR&&(y.selectionForeground=void 0),m.color.isOpaque(y.selectionBackgroundTransparent)&&(y.selectionBackgroundTransparent=m.color.opacity(y.selectionBackgroundTransparent,.3)),m.color.isOpaque(y.selectionInactiveBackgroundTransparent)&&(y.selectionInactiveBackgroundTransparent=m.color.opacity(y.selectionInactiveBackgroundTransparent,.3)),y.ansi=i.DEFAULT_ANSI_COLORS.slice(),y.ansi[0]=w(E.black,i.DEFAULT_ANSI_COLORS[0]),y.ansi[1]=w(E.red,i.DEFAULT_ANSI_COLORS[1]),y.ansi[2]=w(E.green,i.DEFAULT_ANSI_COLORS[2]),y.ansi[3]=w(E.yellow,i.DEFAULT_ANSI_COLORS[3]),y.ansi[4]=w(E.blue,i.DEFAULT_ANSI_COLORS[4]),y.ansi[5]=w(E.magenta,i.DEFAULT_ANSI_COLORS[5]),y.ansi[6]=w(E.cyan,i.DEFAULT_ANSI_COLORS[6]),y.ansi[7]=w(E.white,i.DEFAULT_ANSI_COLORS[7]),y.ansi[8]=w(E.brightBlack,i.DEFAULT_ANSI_COLORS[8]),y.ansi[9]=w(E.brightRed,i.DEFAULT_ANSI_COLORS[9]),y.ansi[10]=w(E.brightGreen,i.DEFAULT_ANSI_COLORS[10]),y.ansi[11]=w(E.brightYellow,i.DEFAULT_ANSI_COLORS[11]),y.ansi[12]=w(E.brightBlue,i.DEFAULT_ANSI_COLORS[12]),y.ansi[13]=w(E.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),y.ansi[14]=w(E.brightCyan,i.DEFAULT_ANSI_COLORS[14]),y.ansi[15]=w(E.brightWhite,i.DEFAULT_ANSI_COLORS[15]),E.extendedAnsi){const x=Math.min(y.ansi.length-16,E.extendedAnsi.length);for(let A=0;A<x;A++)y.ansi[A+16]=w(E.extendedAnsi[A],i.DEFAULT_ANSI_COLORS[A+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(E){this._restoreColor(E),this._onChangeColors.fire(this.colors)}_restoreColor(E){if(E!==void 0)switch(E){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[E]=this._restoreColors.ansi[E]}else for(let y=0;y<this._restoreColors.ansi.length;++y)this._colors.ansi[y]=this._restoreColors.ansi[y]}modifyColors(E){E(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function w(E,y){if(E!==void 0)try{return m.css.toColor(E)}catch{}return y}i.ThemeService=C=f([d(0,g.IOptionsService)],C)},6349:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const f=o(8460),d=o(844);class u extends d.Disposable{constructor(S){super(),this._maxLength=S,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(S){if(this._maxLength===S)return;const b=new Array(S);for(let g=0;g<Math.min(S,this.length);g++)b[g]=this._array[this._getCyclicIndex(g)];this._array=b,this._maxLength=S,this._startIndex=0}get length(){return this._length}set length(S){if(S>this._length)for(let b=this._length;b<S;b++)this._array[b]=void 0;this._length=S}get(S){return this._array[this._getCyclicIndex(S)]}set(S,b){this._array[this._getCyclicIndex(S)]=b}push(S){this._array[this._getCyclicIndex(this._length)]=S,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(S,b,...g){if(b){for(let l=S;l<this._length-b;l++)this._array[this._getCyclicIndex(l)]=this._array[this._getCyclicIndex(l+b)];this._length-=b,this.onDeleteEmitter.fire({index:S,amount:b})}for(let l=this._length-1;l>=S;l--)this._array[this._getCyclicIndex(l+g.length)]=this._array[this._getCyclicIndex(l)];for(let l=0;l<g.length;l++)this._array[this._getCyclicIndex(S+l)]=g[l];if(g.length&&this.onInsertEmitter.fire({index:S,amount:g.length}),this._length+g.length>this._maxLength){const l=this._length+g.length-this._maxLength;this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)}else this._length+=g.length}trimStart(S){S>this._length&&(S=this._length),this._startIndex+=S,this._length-=S,this.onTrimEmitter.fire(S)}shiftElements(S,b,g){if(!(b<=0)){if(S<0||S>=this._length)throw new Error("start argument out of range");if(S+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let h=b-1;h>=0;h--)this.set(S+h+g,this.get(S+h));const l=S+b+g-this._length;if(l>0)for(this._length+=l;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let l=0;l<b;l++)this.set(S+l+g,this.get(S+l))}}_getCyclicIndex(S){return(this._startIndex+S)%this._maxLength}}i.CircularList=u},1439:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function o(f,d=5){if(typeof f!="object")return f;const u=Array.isArray(f)?[]:{};for(const m in f)u[m]=d<=1?f[m]:f[m]&&o(f[m],d-1);return u}},8055:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let o=0,f=0,d=0,u=0;var m,S,b,g,l;function h(a){const p=a.toString(16);return p.length<2?"0"+p:p}function n(a,p){return a<p?(p+.05)/(a+.05):(a+.05)/(p+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(a){a.toCss=function(p,C,w,E){return E!==void 0?`#${h(p)}${h(C)}${h(w)}${h(E)}`:`#${h(p)}${h(C)}${h(w)}`},a.toRgba=function(p,C,w,E=255){return(p<<24|C<<16|w<<8|E)>>>0},a.toColor=function(p,C,w,E){return{css:a.toCss(p,C,w,E),rgba:a.toRgba(p,C,w,E)}}}(m||(i.channels=m={})),function(a){function p(C,w){return u=Math.round(255*w),[o,f,d]=l.toChannels(C.rgba),{css:m.toCss(o,f,d,u),rgba:m.toRgba(o,f,d,u)}}a.blend=function(C,w){if(u=(255&w.rgba)/255,u===1)return{css:w.css,rgba:w.rgba};const E=w.rgba>>24&255,y=w.rgba>>16&255,x=w.rgba>>8&255,A=C.rgba>>24&255,B=C.rgba>>16&255,P=C.rgba>>8&255;return o=A+Math.round((E-A)*u),f=B+Math.round((y-B)*u),d=P+Math.round((x-P)*u),{css:m.toCss(o,f,d),rgba:m.toRgba(o,f,d)}},a.isOpaque=function(C){return(255&C.rgba)==255},a.ensureContrastRatio=function(C,w,E){const y=l.ensureContrastRatio(C.rgba,w.rgba,E);if(y)return m.toColor(y>>24&255,y>>16&255,y>>8&255)},a.opaque=function(C){const w=(255|C.rgba)>>>0;return[o,f,d]=l.toChannels(w),{css:m.toCss(o,f,d),rgba:w}},a.opacity=p,a.multiplyOpacity=function(C,w){return u=255&C.rgba,p(C,u*w/255)},a.toColorRGB=function(C){return[C.rgba>>24&255,C.rgba>>16&255,C.rgba>>8&255]}}(S||(i.color=S={})),function(a){let p,C;try{const w=document.createElement("canvas");w.width=1,w.height=1;const E=w.getContext("2d",{willReadFrequently:!0});E&&(p=E,p.globalCompositeOperation="copy",C=p.createLinearGradient(0,0,1,1))}catch{}a.toColor=function(w){if(w.match(/#[\da-f]{3,8}/i))switch(w.length){case 4:return o=parseInt(w.slice(1,2).repeat(2),16),f=parseInt(w.slice(2,3).repeat(2),16),d=parseInt(w.slice(3,4).repeat(2),16),m.toColor(o,f,d);case 5:return o=parseInt(w.slice(1,2).repeat(2),16),f=parseInt(w.slice(2,3).repeat(2),16),d=parseInt(w.slice(3,4).repeat(2),16),u=parseInt(w.slice(4,5).repeat(2),16),m.toColor(o,f,d,u);case 7:return{css:w,rgba:(parseInt(w.slice(1),16)<<8|255)>>>0};case 9:return{css:w,rgba:parseInt(w.slice(1),16)>>>0}}const E=w.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(E)return o=parseInt(E[1]),f=parseInt(E[2]),d=parseInt(E[3]),u=Math.round(255*(E[5]===void 0?1:parseFloat(E[5]))),m.toColor(o,f,d,u);if(!p||!C)throw new Error("css.toColor: Unsupported css format");if(p.fillStyle=C,p.fillStyle=w,typeof p.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(p.fillRect(0,0,1,1),[o,f,d,u]=p.getImageData(0,0,1,1).data,u!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:m.toRgba(o,f,d,u),css:w}}}(b||(i.css=b={})),function(a){function p(C,w,E){const y=C/255,x=w/255,A=E/255;return .2126*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))}a.relativeLuminance=function(C){return p(C>>16&255,C>>8&255,255&C)},a.relativeLuminance2=p}(g||(i.rgb=g={})),function(a){function p(w,E,y){const x=w>>24&255,A=w>>16&255,B=w>>8&255;let P=E>>24&255,L=E>>16&255,W=E>>8&255,z=n(g.relativeLuminance2(P,L,W),g.relativeLuminance2(x,A,B));for(;z<y&&(P>0||L>0||W>0);)P-=Math.max(0,Math.ceil(.1*P)),L-=Math.max(0,Math.ceil(.1*L)),W-=Math.max(0,Math.ceil(.1*W)),z=n(g.relativeLuminance2(P,L,W),g.relativeLuminance2(x,A,B));return(P<<24|L<<16|W<<8|255)>>>0}function C(w,E,y){const x=w>>24&255,A=w>>16&255,B=w>>8&255;let P=E>>24&255,L=E>>16&255,W=E>>8&255,z=n(g.relativeLuminance2(P,L,W),g.relativeLuminance2(x,A,B));for(;z<y&&(P<255||L<255||W<255);)P=Math.min(255,P+Math.ceil(.1*(255-P))),L=Math.min(255,L+Math.ceil(.1*(255-L))),W=Math.min(255,W+Math.ceil(.1*(255-W))),z=n(g.relativeLuminance2(P,L,W),g.relativeLuminance2(x,A,B));return(P<<24|L<<16|W<<8|255)>>>0}a.blend=function(w,E){if(u=(255&E)/255,u===1)return E;const y=E>>24&255,x=E>>16&255,A=E>>8&255,B=w>>24&255,P=w>>16&255,L=w>>8&255;return o=B+Math.round((y-B)*u),f=P+Math.round((x-P)*u),d=L+Math.round((A-L)*u),m.toRgba(o,f,d)},a.ensureContrastRatio=function(w,E,y){const x=g.relativeLuminance(w>>8),A=g.relativeLuminance(E>>8);if(n(x,A)<y){if(A<x){const L=p(w,E,y),W=n(x,g.relativeLuminance(L>>8));if(W<y){const z=C(w,E,y);return W>n(x,g.relativeLuminance(z>>8))?L:z}return L}const B=C(w,E,y),P=n(x,g.relativeLuminance(B>>8));if(P<y){const L=p(w,E,y);return P>n(x,g.relativeLuminance(L>>8))?B:L}return B}},a.reduceLuminance=p,a.increaseLuminance=C,a.toChannels=function(w){return[w>>24&255,w>>16&255,w>>8&255,255&w]}}(l||(i.rgba=l={})),i.toPaddedHex=h,i.contrastRatio=n},8969:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const f=o(844),d=o(2585),u=o(4348),m=o(7866),S=o(744),b=o(7302),g=o(6975),l=o(8460),h=o(1753),n=o(1480),a=o(7994),p=o(9282),C=o(5435),w=o(5981),E=o(2660);let y=!1;class x extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new l.EventEmitter),this._onScroll.event(B=>{var P;(P=this._onScrollApi)==null||P.fire(B.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(B){for(const P in B)this.optionsService.options[P]=B[P]}constructor(B){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new l.EventEmitter),this._instantiationService=new u.InstantiationService,this.optionsService=this.register(new b.OptionsService(B)),this._instantiationService.setService(d.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(S.BufferService)),this._instantiationService.setService(d.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(m.LogService)),this._instantiationService.setService(d.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(d.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(h.CoreMouseService)),this._instantiationService.setService(d.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(n.UnicodeService)),this._instantiationService.setService(d.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(a.CharsetService),this._instantiationService.setService(d.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(E.OscLinkService),this._instantiationService.setService(d.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,l.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,l.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,l.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,l.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new w.WriteBuffer((P,L)=>this._inputHandler.parse(P,L))),this.register((0,l.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(B,P){this._writeBuffer.write(B,P)}writeSync(B,P){this._logService.logLevel<=d.LogLevelEnum.WARN&&!y&&(this._logService.warn("writeSync is unreliable and will be removed soon."),y=!0),this._writeBuffer.writeSync(B,P)}input(B,P=!0){this.coreService.triggerDataEvent(B,P)}resize(B,P){isNaN(B)||isNaN(P)||(B=Math.max(B,S.MINIMUM_COLS),P=Math.max(P,S.MINIMUM_ROWS),this._bufferService.resize(B,P))}scroll(B,P=!1){this._bufferService.scroll(B,P)}scrollLines(B,P,L){this._bufferService.scrollLines(B,P,L)}scrollPages(B){this.scrollLines(B*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(B){const P=B-this._bufferService.buffer.ydisp;P!==0&&this.scrollLines(P)}registerEscHandler(B,P){return this._inputHandler.registerEscHandler(B,P)}registerDcsHandler(B,P){return this._inputHandler.registerDcsHandler(B,P)}registerCsiHandler(B,P){return this._inputHandler.registerCsiHandler(B,P)}registerOscHandler(B,P){return this._inputHandler.registerOscHandler(B,P)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let B=!1;const P=this.optionsService.rawOptions.windowsPty;P&&P.buildNumber!==void 0&&P.buildNumber!==void 0?B=P.backend==="conpty"&&P.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(B=!0),B?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const B=[];B.push(this.onLineFeed(p.updateWindowsModeWrappedState.bind(null,this._bufferService))),B.push(this.registerCsiHandler({final:"H"},()=>((0,p.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)(()=>{for(const P of B)P.dispose()})}}}i.CoreTerminal=x},8460:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===o)return void this._listeners.splice(f,1)}}})),this._event}fire(o,f){const d=[];for(let u=0;u<this._listeners.length;u++)d.push(this._listeners[u]);for(let u=0;u<d.length;u++)d[u].call(void 0,o,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,f){return o(d=>f.fire(d))},i.runAndSubscribe=function(o,f){return f(void 0),o(d=>f(d))}},5435:function(v,i,o){var f=this&&this.__decorate||function(V,R,O,M){var F,Q=arguments.length,re=Q<3?R:M===null?M=Object.getOwnPropertyDescriptor(R,O):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")re=Reflect.decorate(V,R,O,M);else for(var he=V.length-1;he>=0;he--)(F=V[he])&&(re=(Q<3?F(re):Q>3?F(R,O,re):F(R,O))||re);return Q>3&&re&&Object.defineProperty(R,O,re),re},d=this&&this.__param||function(V,R){return function(O,M){R(O,M,V)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const u=o(2584),m=o(7116),S=o(2015),b=o(844),g=o(482),l=o(8437),h=o(8460),n=o(643),a=o(511),p=o(3734),C=o(2585),w=o(1480),E=o(6242),y=o(6351),x=o(5941),A={"(":0,")":1,"*":2,"+":3,"-":1,".":2},B=131072;function P(V,R){if(V>24)return R.setWinLines||!1;switch(V){case 1:return!!R.restoreWin;case 2:return!!R.minimizeWin;case 3:return!!R.setWinPosition;case 4:return!!R.setWinSizePixels;case 5:return!!R.raiseWin;case 6:return!!R.lowerWin;case 7:return!!R.refreshWin;case 8:return!!R.setWinSizeChars;case 9:return!!R.maximizeWin;case 10:return!!R.fullscreenWin;case 11:return!!R.getWinState;case 13:return!!R.getWinPosition;case 14:return!!R.getWinSizePixels;case 15:return!!R.getScreenSizePixels;case 16:return!!R.getCellSizePixels;case 18:return!!R.getWinSizeChars;case 19:return!!R.getScreenSizeChars;case 20:return!!R.getIconTitle;case 21:return!!R.getWinTitle;case 22:return!!R.pushTitle;case 23:return!!R.popTitle;case 24:return!!R.setWinLines}return!1}var L;(function(V){V[V.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",V[V.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(L||(i.WindowsOptionsReportType=L={}));let W=0;class z extends b.Disposable{getAttrData(){return this._curAttrData}constructor(R,O,M,F,Q,re,he,ue,H=new S.EscapeSequenceParser){super(),this._bufferService=R,this._charsetService=O,this._coreService=M,this._logService=F,this._optionsService=Q,this._oscLinkService=re,this._coreMouseService=he,this._unicodeService=ue,this._parser=H,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new a.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new h.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new h.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new h.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new h.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new h.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new h.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new h.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new h.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new h.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new h.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new h.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new J(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._parser.setCsiHandlerFallback((k,G)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(k),params:G.toArray()})}),this._parser.setEscHandlerFallback(k=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(k)})}),this._parser.setExecuteHandlerFallback(k=>{this._logService.debug("Unknown EXECUTE code: ",{code:k})}),this._parser.setOscHandlerFallback((k,G,j)=>{this._logService.debug("Unknown OSC code: ",{identifier:k,action:G,data:j})}),this._parser.setDcsHandlerFallback((k,G,j)=>{G==="HOOK"&&(j=j.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(k),action:G,payload:j})}),this._parser.setPrintHandler((k,G,j)=>this.print(k,G,j)),this._parser.registerCsiHandler({final:"@"},k=>this.insertChars(k)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},k=>this.scrollLeft(k)),this._parser.registerCsiHandler({final:"A"},k=>this.cursorUp(k)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},k=>this.scrollRight(k)),this._parser.registerCsiHandler({final:"B"},k=>this.cursorDown(k)),this._parser.registerCsiHandler({final:"C"},k=>this.cursorForward(k)),this._parser.registerCsiHandler({final:"D"},k=>this.cursorBackward(k)),this._parser.registerCsiHandler({final:"E"},k=>this.cursorNextLine(k)),this._parser.registerCsiHandler({final:"F"},k=>this.cursorPrecedingLine(k)),this._parser.registerCsiHandler({final:"G"},k=>this.cursorCharAbsolute(k)),this._parser.registerCsiHandler({final:"H"},k=>this.cursorPosition(k)),this._parser.registerCsiHandler({final:"I"},k=>this.cursorForwardTab(k)),this._parser.registerCsiHandler({final:"J"},k=>this.eraseInDisplay(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},k=>this.eraseInDisplay(k,!0)),this._parser.registerCsiHandler({final:"K"},k=>this.eraseInLine(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},k=>this.eraseInLine(k,!0)),this._parser.registerCsiHandler({final:"L"},k=>this.insertLines(k)),this._parser.registerCsiHandler({final:"M"},k=>this.deleteLines(k)),this._parser.registerCsiHandler({final:"P"},k=>this.deleteChars(k)),this._parser.registerCsiHandler({final:"S"},k=>this.scrollUp(k)),this._parser.registerCsiHandler({final:"T"},k=>this.scrollDown(k)),this._parser.registerCsiHandler({final:"X"},k=>this.eraseChars(k)),this._parser.registerCsiHandler({final:"Z"},k=>this.cursorBackwardTab(k)),this._parser.registerCsiHandler({final:"`"},k=>this.charPosAbsolute(k)),this._parser.registerCsiHandler({final:"a"},k=>this.hPositionRelative(k)),this._parser.registerCsiHandler({final:"b"},k=>this.repeatPrecedingCharacter(k)),this._parser.registerCsiHandler({final:"c"},k=>this.sendDeviceAttributesPrimary(k)),this._parser.registerCsiHandler({prefix:">",final:"c"},k=>this.sendDeviceAttributesSecondary(k)),this._parser.registerCsiHandler({final:"d"},k=>this.linePosAbsolute(k)),this._parser.registerCsiHandler({final:"e"},k=>this.vPositionRelative(k)),this._parser.registerCsiHandler({final:"f"},k=>this.hVPosition(k)),this._parser.registerCsiHandler({final:"g"},k=>this.tabClear(k)),this._parser.registerCsiHandler({final:"h"},k=>this.setMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"h"},k=>this.setModePrivate(k)),this._parser.registerCsiHandler({final:"l"},k=>this.resetMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"l"},k=>this.resetModePrivate(k)),this._parser.registerCsiHandler({final:"m"},k=>this.charAttributes(k)),this._parser.registerCsiHandler({final:"n"},k=>this.deviceStatus(k)),this._parser.registerCsiHandler({prefix:"?",final:"n"},k=>this.deviceStatusPrivate(k)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},k=>this.softReset(k)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},k=>this.setCursorStyle(k)),this._parser.registerCsiHandler({final:"r"},k=>this.setScrollRegion(k)),this._parser.registerCsiHandler({final:"s"},k=>this.saveCursor(k)),this._parser.registerCsiHandler({final:"t"},k=>this.windowOptions(k)),this._parser.registerCsiHandler({final:"u"},k=>this.restoreCursor(k)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},k=>this.insertColumns(k)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},k=>this.deleteColumns(k)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},k=>this.selectProtected(k)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},k=>this.requestMode(k,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},k=>this.requestMode(k,!1)),this._parser.setExecuteHandler(u.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(u.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(u.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(u.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(u.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(u.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(u.C1.IND,()=>this.index()),this._parser.setExecuteHandler(u.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(u.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new E.OscHandler(k=>(this.setTitle(k),this.setIconName(k),!0))),this._parser.registerOscHandler(1,new E.OscHandler(k=>this.setIconName(k))),this._parser.registerOscHandler(2,new E.OscHandler(k=>this.setTitle(k))),this._parser.registerOscHandler(4,new E.OscHandler(k=>this.setOrReportIndexedColor(k))),this._parser.registerOscHandler(8,new E.OscHandler(k=>this.setHyperlink(k))),this._parser.registerOscHandler(10,new E.OscHandler(k=>this.setOrReportFgColor(k))),this._parser.registerOscHandler(11,new E.OscHandler(k=>this.setOrReportBgColor(k))),this._parser.registerOscHandler(12,new E.OscHandler(k=>this.setOrReportCursorColor(k))),this._parser.registerOscHandler(104,new E.OscHandler(k=>this.restoreIndexedColor(k))),this._parser.registerOscHandler(110,new E.OscHandler(k=>this.restoreFgColor(k))),this._parser.registerOscHandler(111,new E.OscHandler(k=>this.restoreBgColor(k))),this._parser.registerOscHandler(112,new E.OscHandler(k=>this.restoreCursorColor(k))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const k in m.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:k},()=>this.selectCharset("("+k)),this._parser.registerEscHandler({intermediates:")",final:k},()=>this.selectCharset(")"+k)),this._parser.registerEscHandler({intermediates:"*",final:k},()=>this.selectCharset("*"+k)),this._parser.registerEscHandler({intermediates:"+",final:k},()=>this.selectCharset("+"+k)),this._parser.registerEscHandler({intermediates:"-",final:k},()=>this.selectCharset("-"+k)),this._parser.registerEscHandler({intermediates:".",final:k},()=>this.selectCharset("."+k)),this._parser.registerEscHandler({intermediates:"/",final:k},()=>this.selectCharset("/"+k));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(k=>(this._logService.error("Parsing error: ",k),k)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new y.DcsHandler((k,G)=>this.requestStatusString(k,G)))}_preserveStack(R,O,M,F){this._parseStack.paused=!0,this._parseStack.cursorStartX=R,this._parseStack.cursorStartY=O,this._parseStack.decodedLength=M,this._parseStack.position=F}_logSlowResolvingAsync(R){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([R,new Promise((O,M)=>setTimeout(()=>M("#SLOW_TIMEOUT"),5e3))]).catch(O=>{if(O!=="#SLOW_TIMEOUT")throw O;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(R,O){let M,F=this._activeBuffer.x,Q=this._activeBuffer.y,re=0;const he=this._parseStack.paused;if(he){if(M=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,O))return this._logSlowResolvingAsync(M),M;F=this._parseStack.cursorStartX,Q=this._parseStack.cursorStartY,this._parseStack.paused=!1,R.length>B&&(re=this._parseStack.position+B)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof R=="string"?` "${R}"`:` "${Array.prototype.map.call(R,k=>String.fromCharCode(k)).join("")}"`),typeof R=="string"?R.split("").map(k=>k.charCodeAt(0)):R),this._parseBuffer.length<R.length&&this._parseBuffer.length<B&&(this._parseBuffer=new Uint32Array(Math.min(R.length,B))),he||this._dirtyRowTracker.clearRange(),R.length>B)for(let k=re;k<R.length;k+=B){const G=k+B<R.length?k+B:R.length,j=typeof R=="string"?this._stringDecoder.decode(R.substring(k,G),this._parseBuffer):this._utf8Decoder.decode(R.subarray(k,G),this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,j))return this._preserveStack(F,Q,j,k),this._logSlowResolvingAsync(M),M}else if(!he){const k=typeof R=="string"?this._stringDecoder.decode(R,this._parseBuffer):this._utf8Decoder.decode(R,this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,k))return this._preserveStack(F,Q,k,0),this._logSlowResolvingAsync(M),M}this._activeBuffer.x===F&&this._activeBuffer.y===Q||this._onCursorMove.fire();const ue=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),H=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);H<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(H,this._bufferService.rows-1),Math.min(ue,this._bufferService.rows-1))}print(R,O,M){let F,Q;const re=this._charsetService.charset,he=this._optionsService.rawOptions.screenReaderMode,ue=this._bufferService.cols,H=this._coreService.decPrivateModes.wraparound,k=this._coreService.modes.insertMode,G=this._curAttrData;let j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&M-O>0&&j.getWidth(this._activeBuffer.x-1)===2&&j.setCellFromCodepoint(this._activeBuffer.x-1,0,1,G);let ne=this._parser.precedingJoinState;for(let D=O;D<M;++D){if(F=R[D],F<127&&re){const K=re[String.fromCharCode(F)];K&&(F=K.charCodeAt(0))}const T=this._unicodeService.charProperties(F,ne);Q=w.UnicodeService.extractWidth(T);const N=w.UnicodeService.extractShouldJoin(T),q=N?w.UnicodeService.extractWidth(ne):0;if(ne=T,he&&this._onA11yChar.fire((0,g.stringFromCodePoint)(F)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+Q-q>ue){if(H){const K=j;let U=this._activeBuffer.x-q;for(this._activeBuffer.x=q,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),q>0&&j instanceof l.BufferLine&&j.copyCellsFrom(K,U,0,q,!1);U<ue;)K.setCellFromCodepoint(U++,0,1,G)}else if(this._activeBuffer.x=ue-1,Q===2)continue}if(N&&this._activeBuffer.x){const K=j.getWidth(this._activeBuffer.x-1)?1:2;j.addCodepointToCell(this._activeBuffer.x-K,F,Q);for(let U=Q-q;--U>=0;)j.setCellFromCodepoint(this._activeBuffer.x++,0,0,G)}else if(k&&(j.insertCells(this._activeBuffer.x,Q-q,this._activeBuffer.getNullCell(G)),j.getWidth(ue-1)===2&&j.setCellFromCodepoint(ue-1,n.NULL_CELL_CODE,n.NULL_CELL_WIDTH,G)),j.setCellFromCodepoint(this._activeBuffer.x++,F,Q,G),Q>0)for(;--Q;)j.setCellFromCodepoint(this._activeBuffer.x++,0,0,G)}this._parser.precedingJoinState=ne,this._activeBuffer.x<ue&&M-O>0&&j.getWidth(this._activeBuffer.x)===0&&!j.hasContent(this._activeBuffer.x)&&j.setCellFromCodepoint(this._activeBuffer.x,0,1,G),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(R,O){return R.final!=="t"||R.prefix||R.intermediates?this._parser.registerCsiHandler(R,O):this._parser.registerCsiHandler(R,M=>!P(M.params[0],this._optionsService.rawOptions.windowOptions)||O(M))}registerDcsHandler(R,O){return this._parser.registerDcsHandler(R,new y.DcsHandler(O))}registerEscHandler(R,O){return this._parser.registerEscHandler(R,O)}registerOscHandler(R,O){return this._parser.registerOscHandler(R,new E.OscHandler(O))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var R;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&R.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);O.hasWidth(this._activeBuffer.x)&&!O.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const R=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-R),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(R=this._bufferService.cols-1){this._activeBuffer.x=Math.min(R,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(R,O){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=R,this._activeBuffer.y=this._activeBuffer.scrollTop+O):(this._activeBuffer.x=R,this._activeBuffer.y=O),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(R,O){this._restrictCursor(),this._setCursor(this._activeBuffer.x+R,this._activeBuffer.y+O)}cursorUp(R){const O=this._activeBuffer.y-this._activeBuffer.scrollTop;return O>=0?this._moveCursor(0,-Math.min(O,R.params[0]||1)):this._moveCursor(0,-(R.params[0]||1)),!0}cursorDown(R){const O=this._activeBuffer.scrollBottom-this._activeBuffer.y;return O>=0?this._moveCursor(0,Math.min(O,R.params[0]||1)):this._moveCursor(0,R.params[0]||1),!0}cursorForward(R){return this._moveCursor(R.params[0]||1,0),!0}cursorBackward(R){return this._moveCursor(-(R.params[0]||1),0),!0}cursorNextLine(R){return this.cursorDown(R),this._activeBuffer.x=0,!0}cursorPrecedingLine(R){return this.cursorUp(R),this._activeBuffer.x=0,!0}cursorCharAbsolute(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(R){return this._setCursor(R.length>=2?(R.params[1]||1)-1:0,(R.params[0]||1)-1),!0}charPosAbsolute(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(R){return this._moveCursor(R.params[0]||1,0),!0}linePosAbsolute(R){return this._setCursor(this._activeBuffer.x,(R.params[0]||1)-1),!0}vPositionRelative(R){return this._moveCursor(0,R.params[0]||1),!0}hVPosition(R){return this.cursorPosition(R),!0}tabClear(R){const O=R.params[0];return O===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:O===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let O=R.params[0]||1;for(;O--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let O=R.params[0]||1;for(;O--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(R){const O=R.params[0];return O===1&&(this._curAttrData.bg|=536870912),O!==2&&O!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(R,O,M,F=!1,Q=!1){const re=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);re.replaceCells(O,M,this._activeBuffer.getNullCell(this._eraseAttrData()),Q),F&&(re.isWrapped=!1)}_resetBufferLine(R,O=!1){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);M&&(M.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),O),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+R),M.isWrapped=!1)}eraseInDisplay(R,O=!1){let M;switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,O);M<this._bufferService.rows;M++)this._resetBufferLine(M,O);this._dirtyRowTracker.markDirty(M);break;case 1:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M,0,this._activeBuffer.x+1,!0,O),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(M+1).isWrapped=!1);M--;)this._resetBufferLine(M,O);this._dirtyRowTracker.markDirty(0);break;case 2:for(M=this._bufferService.rows,this._dirtyRowTracker.markDirty(M-1);M--;)this._resetBufferLine(M,O);this._dirtyRowTracker.markDirty(0);break;case 3:const F=this._activeBuffer.lines.length-this._bufferService.rows;F>0&&(this._activeBuffer.lines.trimStart(F),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-F,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-F,0),this._onScroll.fire(0))}return!0}eraseInLine(R,O=!1){switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,O);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,O);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,O)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(R){this._restrictCursor();let O=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y,F=this._bufferService.rows-1-this._activeBuffer.scrollBottom,Q=this._bufferService.rows-1+this._activeBuffer.ybase-F+1;for(;O--;)this._activeBuffer.lines.splice(Q-1,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(R){this._restrictCursor();let O=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y;let F;for(F=this._bufferService.rows-1-this._activeBuffer.scrollBottom,F=this._bufferService.rows-1+this._activeBuffer.ybase-F;O--;)this._activeBuffer.lines.splice(M,1),this._activeBuffer.lines.splice(F,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(R){this._restrictCursor();const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.insertCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(R){this._restrictCursor();const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.deleteCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(R){let O=R.params[0]||1;for(;O--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(R){let O=R.params[0]||1;for(;O--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=R.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);F.deleteCells(0,O,this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=R.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);F.insertCells(0,O,this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=R.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);F.insertCells(this._activeBuffer.x,O,this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=R.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);F.deleteCells(this._activeBuffer.x,O,this._activeBuffer.getNullCell(this._eraseAttrData())),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(R){this._restrictCursor();const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(R.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(R){const O=this._parser.precedingJoinState;if(!O)return!0;const M=R.params[0]||1,F=w.UnicodeService.extractWidth(O),Q=this._activeBuffer.x-F,re=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(Q),he=new Uint32Array(re.length*M);let ue=0;for(let k=0;k<re.length;){const G=re.codePointAt(k)||0;he[ue++]=G,k+=G>65535?2:1}let H=ue;for(let k=1;k<M;++k)he.copyWithin(H,0,ue),H+=ue;return this.print(he,0,H),!0}sendDeviceAttributesPrimary(R){return R.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(u.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(u.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(R){return R.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(u.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(u.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(R.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(u.C0.ESC+"[>83;40003;0c")),!0}_is(R){return(this._optionsService.rawOptions.termName+"").indexOf(R)===0}setMode(R){for(let O=0;O<R.length;O++)switch(R.params[O]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(R){for(let O=0;O<R.length;O++)switch(R.params[O]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),this._charsetService.setgCharset(1,m.DEFAULT_CHARSET),this._charsetService.setgCharset(2,m.DEFAULT_CHARSET),this._charsetService.setgCharset(3,m.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(R){for(let O=0;O<R.length;O++)switch(R.params[O]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(R){for(let O=0;O<R.length;O++)switch(R.params[O]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),R.params[O]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(R,O){const M=this._coreService.decPrivateModes,{activeProtocol:F,activeEncoding:Q}=this._coreMouseService,re=this._coreService,{buffers:he,cols:ue}=this._bufferService,{active:H,alt:k}=he,G=this._optionsService.rawOptions,j=N=>N?1:2,ne=R.params[0];return D=ne,T=O?ne===2?4:ne===4?j(re.modes.insertMode):ne===12?3:ne===20?j(G.convertEol):0:ne===1?j(M.applicationCursorKeys):ne===3?G.windowOptions.setWinLines?ue===80?2:ue===132?1:0:0:ne===6?j(M.origin):ne===7?j(M.wraparound):ne===8?3:ne===9?j(F==="X10"):ne===12?j(G.cursorBlink):ne===25?j(!re.isCursorHidden):ne===45?j(M.reverseWraparound):ne===66?j(M.applicationKeypad):ne===67?4:ne===1e3?j(F==="VT200"):ne===1002?j(F==="DRAG"):ne===1003?j(F==="ANY"):ne===1004?j(M.sendFocus):ne===1005?4:ne===1006?j(Q==="SGR"):ne===1015?4:ne===1016?j(Q==="SGR_PIXELS"):ne===1048?1:ne===47||ne===1047||ne===1049?j(H===k):ne===2004?j(M.bracketedPasteMode):0,re.triggerDataEvent(`${u.C0.ESC}[${O?"":"?"}${D};${T}$y`),!0;var D,T}_updateAttrColor(R,O,M,F,Q){return O===2?(R|=50331648,R&=-16777216,R|=p.AttributeData.fromColorRGB([M,F,Q])):O===5&&(R&=-50331904,R|=33554432|255&M),R}_extractColor(R,O,M){const F=[0,0,-1,0,0,0];let Q=0,re=0;do{if(F[re+Q]=R.params[O+re],R.hasSubParams(O+re)){const he=R.getSubParams(O+re);let ue=0;do F[1]===5&&(Q=1),F[re+ue+1+Q]=he[ue];while(++ue<he.length&&ue+re+1+Q<F.length);break}if(F[1]===5&&re+Q>=2||F[1]===2&&re+Q>=5)break;F[1]&&(Q=1)}while(++re+O<R.length&&re+Q<F.length);for(let he=2;he<F.length;++he)F[he]===-1&&(F[he]=0);switch(F[0]){case 38:M.fg=this._updateAttrColor(M.fg,F[1],F[3],F[4],F[5]);break;case 48:M.bg=this._updateAttrColor(M.bg,F[1],F[3],F[4],F[5]);break;case 58:M.extended=M.extended.clone(),M.extended.underlineColor=this._updateAttrColor(M.extended.underlineColor,F[1],F[3],F[4],F[5])}return re}_processUnderline(R,O){O.extended=O.extended.clone(),(!~R||R>5)&&(R=1),O.extended.underlineStyle=R,O.fg|=268435456,R===0&&(O.fg&=-268435457),O.updateExtended()}_processSGR0(R){R.fg=l.DEFAULT_ATTR_DATA.fg,R.bg=l.DEFAULT_ATTR_DATA.bg,R.extended=R.extended.clone(),R.extended.underlineStyle=0,R.extended.underlineColor&=-67108864,R.updateExtended()}charAttributes(R){if(R.length===1&&R.params[0]===0)return this._processSGR0(this._curAttrData),!0;const O=R.length;let M;const F=this._curAttrData;for(let Q=0;Q<O;Q++)M=R.params[Q],M>=30&&M<=37?(F.fg&=-50331904,F.fg|=16777216|M-30):M>=40&&M<=47?(F.bg&=-50331904,F.bg|=16777216|M-40):M>=90&&M<=97?(F.fg&=-50331904,F.fg|=16777224|M-90):M>=100&&M<=107?(F.bg&=-50331904,F.bg|=16777224|M-100):M===0?this._processSGR0(F):M===1?F.fg|=134217728:M===3?F.bg|=67108864:M===4?(F.fg|=268435456,this._processUnderline(R.hasSubParams(Q)?R.getSubParams(Q)[0]:1,F)):M===5?F.fg|=536870912:M===7?F.fg|=67108864:M===8?F.fg|=1073741824:M===9?F.fg|=2147483648:M===2?F.bg|=134217728:M===21?this._processUnderline(2,F):M===22?(F.fg&=-134217729,F.bg&=-134217729):M===23?F.bg&=-67108865:M===24?(F.fg&=-268435457,this._processUnderline(0,F)):M===25?F.fg&=-536870913:M===27?F.fg&=-67108865:M===28?F.fg&=-1073741825:M===29?F.fg&=2147483647:M===39?(F.fg&=-67108864,F.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):M===49?(F.bg&=-67108864,F.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):M===38||M===48||M===58?Q+=this._extractColor(R,Q,F):M===53?F.bg|=1073741824:M===55?F.bg&=-1073741825:M===59?(F.extended=F.extended.clone(),F.extended.underlineColor=-1,F.updateExtended()):M===100?(F.fg&=-67108864,F.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,F.bg&=-67108864,F.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",M);return!0}deviceStatus(R){switch(R.params[0]){case 5:this._coreService.triggerDataEvent(`${u.C0.ESC}[0n`);break;case 6:const O=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[${O};${M}R`)}return!0}deviceStatusPrivate(R){if(R.params[0]===6){const O=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[?${O};${M}R`)}return!0}softReset(R){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(R){const O=R.params[0]||1;switch(O){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const M=O%2==1;return this._optionsService.options.cursorBlink=M,!0}setScrollRegion(R){const O=R.params[0]||1;let M;return(R.length<2||(M=R.params[1])>this._bufferService.rows||M===0)&&(M=this._bufferService.rows),M>O&&(this._activeBuffer.scrollTop=O-1,this._activeBuffer.scrollBottom=M-1,this._setCursor(0,0)),!0}windowOptions(R){if(!P(R.params[0],this._optionsService.rawOptions.windowOptions))return!0;const O=R.length>1?R.params[1]:0;switch(R.params[0]){case 14:O!==2&&this._onRequestWindowsOptionsReport.fire(L.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(L.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${u.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:O!==0&&O!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),O!==0&&O!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:O!==0&&O!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),O!==0&&O!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(R){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(R){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(R){return this._windowTitle=R,this._onTitleChange.fire(R),!0}setIconName(R){return this._iconName=R,!0}setOrReportIndexedColor(R){const O=[],M=R.split(";");for(;M.length>1;){const F=M.shift(),Q=M.shift();if(/^\d+$/.exec(F)){const re=parseInt(F);if(Y(re))if(Q==="?")O.push({type:0,index:re});else{const he=(0,x.parseColor)(Q);he&&O.push({type:1,index:re,color:he})}}}return O.length&&this._onColor.fire(O),!0}setHyperlink(R){const O=R.split(";");return!(O.length<2)&&(O[1]?this._createHyperlink(O[0],O[1]):!O[0]&&this._finishHyperlink())}_createHyperlink(R,O){this._getCurrentLinkId()&&this._finishHyperlink();const M=R.split(":");let F;const Q=M.findIndex(re=>re.startsWith("id="));return Q!==-1&&(F=M[Q].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:F,uri:O}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(R,O){const M=R.split(";");for(let F=0;F<M.length&&!(O>=this._specialColors.length);++F,++O)if(M[F]==="?")this._onColor.fire([{type:0,index:this._specialColors[O]}]);else{const Q=(0,x.parseColor)(M[F]);Q&&this._onColor.fire([{type:1,index:this._specialColors[O],color:Q}])}return!0}setOrReportFgColor(R){return this._setOrReportSpecialColor(R,0)}setOrReportBgColor(R){return this._setOrReportSpecialColor(R,1)}setOrReportCursorColor(R){return this._setOrReportSpecialColor(R,2)}restoreIndexedColor(R){if(!R)return this._onColor.fire([{type:2}]),!0;const O=[],M=R.split(";");for(let F=0;F<M.length;++F)if(/^\d+$/.exec(M[F])){const Q=parseInt(M[F]);Y(Q)&&O.push({type:2,index:Q})}return O.length&&this._onColor.fire(O),!0}restoreFgColor(R){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(R){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(R){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),!0}selectCharset(R){return R.length!==2?(this.selectDefaultCharset(),!0):(R[0]==="/"||this._charsetService.setgCharset(A[R[0]],m.CHARSETS[R[1]]||m.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const R=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,R,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(R){return this._charsetService.setgLevel(R),!0}screenAlignmentPattern(){const R=new a.CellData;R.content=4194373,R.fg=this._curAttrData.fg,R.bg=this._curAttrData.bg,this._setCursor(0,0);for(let O=0;O<this._bufferService.rows;++O){const M=this._activeBuffer.ybase+this._activeBuffer.y+O,F=this._activeBuffer.lines.get(M);F&&(F.fill(R),F.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(R,O){const M=this._bufferService.buffer,F=this._optionsService.rawOptions;return(Q=>(this._coreService.triggerDataEvent(`${u.C0.ESC}${Q}${u.C0.ESC}\\`),!0))(R==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:R==='"p'?'P1$r61;1"p':R==="r"?`P1$r${M.scrollTop+1};${M.scrollBottom+1}r`:R==="m"?"P1$r0m":R===" q"?`P1$r${{block:2,underline:4,bar:6}[F.cursorStyle]-(F.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(R,O){this._dirtyRowTracker.markRangeDirty(R,O)}}i.InputHandler=z;let J=class{constructor(V){this._bufferService=V,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(V){V<this.start?this.start=V:V>this.end&&(this.end=V)}markRangeDirty(V,R){V>R&&(W=V,V=R,R=W),V<this.start&&(this.start=V),R>this.end&&(this.end=R)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Y(V){return 0<=V&&V<256}J=f([d(0,C.IBufferService)],J)},844:(v,i)=>{function o(f){for(const d of f)d.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const d=this._disposables.indexOf(f);d!==-1&&this._disposables.splice(d,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){var d;this._isDisposed||f===this._value||((d=this._value)==null||d.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){var f;this._isDisposed=!0,(f=this._value)==null||f.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=o,i.getDisposeArrayDisposable=function(f){return{dispose:()=>o(f)}}},1505:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(d,u,m){this._data[d]||(this._data[d]={}),this._data[d][u]=m}get(d,u){return this._data[d]?this._data[d][u]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(f,d,u,m,S){this._data.get(f,d)||this._data.set(f,d,new o),this._data.get(f,d).set(u,m,S)}get(f,d,u,m){var S;return(S=this._data.get(f,d))==null?void 0:S.get(u,m)}clear(){this._data.clear()}}},6114:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const o=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;const d=o.match(/Version\/(\d+)/);return d===null||d.length<2?0:parseInt(d[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},6106:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let o=0;i.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(o=this._search(this._getKey(f)),this._array.splice(o,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const d=this._getKey(f);if(d===void 0||(o=this._search(d),o===-1)||this._getKey(this._array[o])!==d)return!1;do if(this._array[o]===f)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===d);return!1}*getKeyIterator(f){if(this._array.length!==0&&(o=this._search(f),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===f))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===f)}forEachByKey(f,d){if(this._array.length!==0&&(o=this._search(f),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===f))do d(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===f)}values(){return[...this._array].values()}_search(f){let d=0,u=this._array.length-1;for(;u>=d;){let m=d+u>>1;const S=this._getKey(this._array[m]);if(S>f)u=m-1;else{if(!(S<f)){for(;m>0&&this._getKey(this._array[m-1])===f;)m--;return m}d=m+1}}return d}}},7226:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=o(6114);class d{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let b=0,g=0,l=S.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(b=Date.now(),this._tasks[this._i]()||this._i++,b=Math.max(1,Date.now()-b),g=Math.max(b,g),h=S.timeRemaining(),1.5*g>h)return l-b<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(l-b))}ms`),void this._start();l=h}this.clear()}}class u extends d{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const b=Date.now()+S;return{timeRemaining:()=>Math.max(0,b-Date.now())}}}i.PriorityTaskQueue=u,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends d{_requestCallback(m){return requestIdleCallback(m)}_cancelCallback(m){cancelIdleCallback(m)}}:u,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(m){this._queue.clear(),this._queue.enqueue(m)}flush(){this._queue.flush()}}},9282:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const f=o(643);i.updateWindowsModeWrappedState=function(d){const u=d.buffer.lines.get(d.buffer.ybase+d.buffer.y-1),m=u==null?void 0:u.get(d.cols-1),S=d.buffer.lines.get(d.buffer.ybase+d.buffer.y);S&&m&&(S.isWrapped=m[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&m[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){const u=new o;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=o;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}get underlineVariantOffset(){const u=(3758096384&this._ext)>>29;return u<0?4294967288^u:u}set underlineVariantOffset(u){this._ext&=536870911,this._ext|=u<<29&3758096384}constructor(u=0,m=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=m}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},9092:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const f=o(6349),d=o(7226),u=o(3734),m=o(8437),S=o(4634),b=o(511),g=o(643),l=o(4863),h=o(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(n,a,p){this._hasScrollback=n,this._optionsService=a,this._bufferService=p,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=m.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=b.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=b.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new d.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(n){return n?(this._nullCell.fg=n.fg,this._nullCell.bg=n.bg,this._nullCell.extended=n.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new u.ExtendedAttrs),this._nullCell}getWhitespaceCell(n){return n?(this._whitespaceCell.fg=n.fg,this._whitespaceCell.bg=n.bg,this._whitespaceCell.extended=n.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new u.ExtendedAttrs),this._whitespaceCell}getBlankLine(n,a){return new m.BufferLine(this._bufferService.cols,this.getNullCell(n),a)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const n=this.ybase+this.y-this.ydisp;return n>=0&&n<this._rows}_getCorrectBufferLength(n){if(!this._hasScrollback)return n;const a=n+this._optionsService.rawOptions.scrollback;return a>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:a}fillViewportRows(n){if(this.lines.length===0){n===void 0&&(n=m.DEFAULT_ATTR_DATA);let a=this._rows;for(;a--;)this.lines.push(this.getBlankLine(n))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(n,a){const p=this.getNullCell(m.DEFAULT_ATTR_DATA);let C=0;const w=this._getCorrectBufferLength(a);if(w>this.lines.maxLength&&(this.lines.maxLength=w),this.lines.length>0){if(this._cols<n)for(let y=0;y<this.lines.length;y++)C+=+this.lines.get(y).resize(n,p);let E=0;if(this._rows<a)for(let y=this._rows;y<a;y++)this.lines.length<a+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new m.BufferLine(n,p)):this.ybase>0&&this.lines.length<=this.ybase+this.y+E+1?(this.ybase--,E++,this.ydisp>0&&this.ydisp--):this.lines.push(new m.BufferLine(n,p)));else for(let y=this._rows;y>a;y--)this.lines.length>a+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(w<this.lines.maxLength){const y=this.lines.length-w;y>0&&(this.lines.trimStart(y),this.ybase=Math.max(this.ybase-y,0),this.ydisp=Math.max(this.ydisp-y,0),this.savedY=Math.max(this.savedY-y,0)),this.lines.maxLength=w}this.x=Math.min(this.x,n-1),this.y=Math.min(this.y,a-1),E&&(this.y+=E),this.savedX=Math.min(this.savedX,n-1),this.scrollTop=0}if(this.scrollBottom=a-1,this._isReflowEnabled&&(this._reflow(n,a),this._cols>n))for(let E=0;E<this.lines.length;E++)C+=+this.lines.get(E).resize(n,p);this._cols=n,this._rows=a,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let n=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,n=!1);let a=0;for(;this._memoryCleanupPosition<this.lines.length;)if(a+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),a>100)return!0;return n}get _isReflowEnabled(){const n=this._optionsService.rawOptions.windowsPty;return n&&n.buildNumber?this._hasScrollback&&n.backend==="conpty"&&n.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(n,a){this._cols!==n&&(n>this._cols?this._reflowLarger(n,a):this._reflowSmaller(n,a))}_reflowLarger(n,a){const p=(0,S.reflowLargerGetLinesToRemove)(this.lines,this._cols,n,this.ybase+this.y,this.getNullCell(m.DEFAULT_ATTR_DATA));if(p.length>0){const C=(0,S.reflowLargerCreateNewLayout)(this.lines,p);(0,S.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(n,a,C.countRemoved)}}_reflowLargerAdjustViewport(n,a,p){const C=this.getNullCell(m.DEFAULT_ATTR_DATA);let w=p;for(;w-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<a&&this.lines.push(new m.BufferLine(n,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-p,0)}_reflowSmaller(n,a){const p=this.getNullCell(m.DEFAULT_ATTR_DATA),C=[];let w=0;for(let E=this.lines.length-1;E>=0;E--){let y=this.lines.get(E);if(!y||!y.isWrapped&&y.getTrimmedLength()<=n)continue;const x=[y];for(;y.isWrapped&&E>0;)y=this.lines.get(--E),x.unshift(y);const A=this.ybase+this.y;if(A>=E&&A<E+x.length)continue;const B=x[x.length-1].getTrimmedLength(),P=(0,S.reflowSmallerGetNewLineLengths)(x,this._cols,n),L=P.length-x.length;let W;W=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+L):Math.max(0,this.lines.length-this.lines.maxLength+L);const z=[];for(let M=0;M<L;M++){const F=this.getBlankLine(m.DEFAULT_ATTR_DATA,!0);z.push(F)}z.length>0&&(C.push({start:E+x.length+w,newLines:z}),w+=z.length),x.push(...z);let J=P.length-1,Y=P[J];Y===0&&(J--,Y=P[J]);let V=x.length-L-1,R=B;for(;V>=0;){const M=Math.min(R,Y);if(x[J]===void 0)break;if(x[J].copyCellsFrom(x[V],R-M,Y-M,M,!0),Y-=M,Y===0&&(J--,Y=P[J]),R-=M,R===0){V--;const F=Math.max(V,0);R=(0,S.getWrappedLineTrimmedLength)(x,F,this._cols)}}for(let M=0;M<x.length;M++)P[M]<n&&x[M].setCell(P[M],p);let O=L-W;for(;O-- >0;)this.ybase===0?this.y<a-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+w)-a&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+L,this.ybase+a-1)}if(C.length>0){const E=[],y=[];for(let J=0;J<this.lines.length;J++)y.push(this.lines.get(J));const x=this.lines.length;let A=x-1,B=0,P=C[B];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+w);let L=0;for(let J=Math.min(this.lines.maxLength-1,x+w-1);J>=0;J--)if(P&&P.start>A+L){for(let Y=P.newLines.length-1;Y>=0;Y--)this.lines.set(J--,P.newLines[Y]);J++,E.push({index:A+1,amount:P.newLines.length}),L+=P.newLines.length,P=C[++B]}else this.lines.set(J,y[A--]);let W=0;for(let J=E.length-1;J>=0;J--)E[J].index+=W,this.lines.onInsertEmitter.fire(E[J]),W+=E[J].amount;const z=Math.max(0,x+w-this.lines.maxLength);z>0&&this.lines.onTrimEmitter.fire(z)}}translateBufferLineToString(n,a,p=0,C){const w=this.lines.get(n);return w?w.translateToString(a,p,C):""}getWrappedRangeForLine(n){let a=n,p=n;for(;a>0&&this.lines.get(a).isWrapped;)a--;for(;p+1<this.lines.length&&this.lines.get(p+1).isWrapped;)p++;return{first:a,last:p}}setupTabStops(n){for(n!=null?this.tabs[n]||(n=this.prevStop(n)):(this.tabs={},n=0);n<this._cols;n+=this._optionsService.rawOptions.tabStopWidth)this.tabs[n]=!0}prevStop(n){for(n==null&&(n=this.x);!this.tabs[--n]&&n>0;);return n>=this._cols?this._cols-1:n<0?0:n}nextStop(n){for(n==null&&(n=this.x);!this.tabs[++n]&&n<this._cols;);return n>=this._cols?this._cols-1:n<0?0:n}clearMarkers(n){this._isClearing=!0;for(let a=0;a<this.markers.length;a++)this.markers[a].line===n&&(this.markers[a].dispose(),this.markers.splice(a--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let n=0;n<this.markers.length;n++)this.markers[n].dispose(),this.markers.splice(n--,1);this._isClearing=!1}addMarker(n){const a=new l.Marker(n);return this.markers.push(a),a.register(this.lines.onTrim(p=>{a.line-=p,a.line<0&&a.dispose()})),a.register(this.lines.onInsert(p=>{a.line>=p.index&&(a.line+=p.amount)})),a.register(this.lines.onDelete(p=>{a.line>=p.index&&a.line<p.index+p.amount&&a.dispose(),a.line>p.index&&(a.line-=p.amount)})),a.register(a.onDispose(()=>this._removeMarker(a))),a}_removeMarker(n){this._isClearing||this.markers.splice(this.markers.indexOf(n),1)}}},8437:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const f=o(3734),d=o(511),u=o(643),m=o(482);i.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let S=0;class b{constructor(l,h,n=!1){this.isWrapped=n,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*l);const a=h||d.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]);for(let p=0;p<l;++p)this.setCell(p,a);this.length=l}get(l){const h=this._data[3*l+0],n=2097151&h;return[this._data[3*l+1],2097152&h?this._combined[l]:n?(0,m.stringFromCodePoint)(n):"",h>>22,2097152&h?this._combined[l].charCodeAt(this._combined[l].length-1):n]}set(l,h){this._data[3*l+1]=h[u.CHAR_DATA_ATTR_INDEX],h[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[l]=h[1],this._data[3*l+0]=2097152|l|h[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*l+0]=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[u.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(l){return this._data[3*l+0]>>22}hasWidth(l){return 12582912&this._data[3*l+0]}getFg(l){return this._data[3*l+1]}getBg(l){return this._data[3*l+2]}hasContent(l){return 4194303&this._data[3*l+0]}getCodePoint(l){const h=this._data[3*l+0];return 2097152&h?this._combined[l].charCodeAt(this._combined[l].length-1):2097151&h}isCombined(l){return 2097152&this._data[3*l+0]}getString(l){const h=this._data[3*l+0];return 2097152&h?this._combined[l]:2097151&h?(0,m.stringFromCodePoint)(2097151&h):""}isProtected(l){return 536870912&this._data[3*l+2]}loadCell(l,h){return S=3*l,h.content=this._data[S+0],h.fg=this._data[S+1],h.bg=this._data[S+2],2097152&h.content&&(h.combinedData=this._combined[l]),268435456&h.bg&&(h.extended=this._extendedAttrs[l]),h}setCell(l,h){2097152&h.content&&(this._combined[l]=h.combinedData),268435456&h.bg&&(this._extendedAttrs[l]=h.extended),this._data[3*l+0]=h.content,this._data[3*l+1]=h.fg,this._data[3*l+2]=h.bg}setCellFromCodepoint(l,h,n,a){268435456&a.bg&&(this._extendedAttrs[l]=a.extended),this._data[3*l+0]=h|n<<22,this._data[3*l+1]=a.fg,this._data[3*l+2]=a.bg}addCodepointToCell(l,h,n){let a=this._data[3*l+0];2097152&a?this._combined[l]+=(0,m.stringFromCodePoint)(h):2097151&a?(this._combined[l]=(0,m.stringFromCodePoint)(2097151&a)+(0,m.stringFromCodePoint)(h),a&=-2097152,a|=2097152):a=h|4194304,n&&(a&=-12582913,a|=n<<22),this._data[3*l+0]=a}insertCells(l,h,n){if((l%=this.length)&&this.getWidth(l-1)===2&&this.setCellFromCodepoint(l-1,0,1,n),h<this.length-l){const a=new d.CellData;for(let p=this.length-l-h-1;p>=0;--p)this.setCell(l+h+p,this.loadCell(l+p,a));for(let p=0;p<h;++p)this.setCell(l+p,n)}else for(let a=l;a<this.length;++a)this.setCell(a,n);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,n)}deleteCells(l,h,n){if(l%=this.length,h<this.length-l){const a=new d.CellData;for(let p=0;p<this.length-l-h;++p)this.setCell(l+p,this.loadCell(l+h+p,a));for(let p=this.length-h;p<this.length;++p)this.setCell(p,n)}else for(let a=l;a<this.length;++a)this.setCell(a,n);l&&this.getWidth(l-1)===2&&this.setCellFromCodepoint(l-1,0,1,n),this.getWidth(l)!==0||this.hasContent(l)||this.setCellFromCodepoint(l,0,1,n)}replaceCells(l,h,n,a=!1){if(a)for(l&&this.getWidth(l-1)===2&&!this.isProtected(l-1)&&this.setCellFromCodepoint(l-1,0,1,n),h<this.length&&this.getWidth(h-1)===2&&!this.isProtected(h)&&this.setCellFromCodepoint(h,0,1,n);l<h&&l<this.length;)this.isProtected(l)||this.setCell(l,n),l++;else for(l&&this.getWidth(l-1)===2&&this.setCellFromCodepoint(l-1,0,1,n),h<this.length&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h,0,1,n);l<h&&l<this.length;)this.setCell(l++,n)}resize(l,h){if(l===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const n=3*l;if(l>this.length){if(this._data.buffer.byteLength>=4*n)this._data=new Uint32Array(this._data.buffer,0,n);else{const a=new Uint32Array(n);a.set(this._data),this._data=a}for(let a=this.length;a<l;++a)this.setCell(a,h)}else{this._data=this._data.subarray(0,n);const a=Object.keys(this._combined);for(let C=0;C<a.length;C++){const w=parseInt(a[C],10);w>=l&&delete this._combined[w]}const p=Object.keys(this._extendedAttrs);for(let C=0;C<p.length;C++){const w=parseInt(p[C],10);w>=l&&delete this._extendedAttrs[w]}}return this.length=l,4*n*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const l=new Uint32Array(this._data.length);return l.set(this._data),this._data=l,1}return 0}fill(l,h=!1){if(h)for(let n=0;n<this.length;++n)this.isProtected(n)||this.setCell(n,l);else{this._combined={},this._extendedAttrs={};for(let n=0;n<this.length;++n)this.setCell(n,l)}}copyFrom(l){this.length!==l.length?this._data=new Uint32Array(l._data):this._data.set(l._data),this.length=l.length,this._combined={};for(const h in l._combined)this._combined[h]=l._combined[h];this._extendedAttrs={};for(const h in l._extendedAttrs)this._extendedAttrs[h]=l._extendedAttrs[h];this.isWrapped=l.isWrapped}clone(){const l=new b(0);l._data=new Uint32Array(this._data),l.length=this.length;for(const h in this._combined)l._combined[h]=this._combined[h];for(const h in this._extendedAttrs)l._extendedAttrs[h]=this._extendedAttrs[h];return l.isWrapped=this.isWrapped,l}getTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0])return l+(this._data[3*l+0]>>22);return 0}getNoBgTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0]||50331648&this._data[3*l+2])return l+(this._data[3*l+0]>>22);return 0}copyCellsFrom(l,h,n,a,p){const C=l._data;if(p)for(let E=a-1;E>=0;E--){for(let y=0;y<3;y++)this._data[3*(n+E)+y]=C[3*(h+E)+y];268435456&C[3*(h+E)+2]&&(this._extendedAttrs[n+E]=l._extendedAttrs[h+E])}else for(let E=0;E<a;E++){for(let y=0;y<3;y++)this._data[3*(n+E)+y]=C[3*(h+E)+y];268435456&C[3*(h+E)+2]&&(this._extendedAttrs[n+E]=l._extendedAttrs[h+E])}const w=Object.keys(l._combined);for(let E=0;E<w.length;E++){const y=parseInt(w[E],10);y>=h&&(this._combined[y-h+n]=l._combined[y])}}translateToString(l,h,n,a){h=h??0,n=n??this.length,l&&(n=Math.min(n,this.getTrimmedLength())),a&&(a.length=0);let p="";for(;h<n;){const C=this._data[3*h+0],w=2097151&C,E=2097152&C?this._combined[h]:w?(0,m.stringFromCodePoint)(w):u.WHITESPACE_CELL_CHAR;if(p+=E,a)for(let y=0;y<E.length;++y)a.push(h);h+=C>>22||1}return a&&a.push(h),p}}i.BufferLine=b},4841:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(o,f){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return f*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(v,i)=>{function o(f,d,u){if(d===f.length-1)return f[d].getTrimmedLength();const m=!f[d].hasContent(u-1)&&f[d].getWidth(u-1)===1,S=f[d+1].getWidth(0)===2;return m&&S?u-1:u}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(f,d,u,m,S){const b=[];for(let g=0;g<f.length-1;g++){let l=g,h=f.get(++l);if(!h.isWrapped)continue;const n=[f.get(g)];for(;l<f.length&&h.isWrapped;)n.push(h),h=f.get(++l);if(m>=g&&m<l){g+=n.length-1;continue}let a=0,p=o(n,a,d),C=1,w=0;for(;C<n.length;){const y=o(n,C,d),x=y-w,A=u-p,B=Math.min(x,A);n[a].copyCellsFrom(n[C],w,p,B,!1),p+=B,p===u&&(a++,p=0),w+=B,w===y&&(C++,w=0),p===0&&a!==0&&n[a-1].getWidth(u-1)===2&&(n[a].copyCellsFrom(n[a-1],u-1,p++,1,!1),n[a-1].setCell(u-1,S))}n[a].replaceCells(p,u,S);let E=0;for(let y=n.length-1;y>0&&(y>a||n[y].getTrimmedLength()===0);y--)E++;E>0&&(b.push(g+n.length-E),b.push(E)),g+=n.length-1}return b},i.reflowLargerCreateNewLayout=function(f,d){const u=[];let m=0,S=d[m],b=0;for(let g=0;g<f.length;g++)if(S===g){const l=d[++m];f.onDeleteEmitter.fire({index:g-b,amount:l}),g+=l-1,b+=l,S=d[++m]}else u.push(g);return{layout:u,countRemoved:b}},i.reflowLargerApplyNewLayout=function(f,d){const u=[];for(let m=0;m<d.length;m++)u.push(f.get(d[m]));for(let m=0;m<u.length;m++)f.set(m,u[m]);f.length=d.length},i.reflowSmallerGetNewLineLengths=function(f,d,u){const m=[],S=f.map((h,n)=>o(f,n,d)).reduce((h,n)=>h+n);let b=0,g=0,l=0;for(;l<S;){if(S-l<u){m.push(S-l);break}b+=u;const h=o(f,g,d);b>h&&(b-=h,g++);const n=f[g].getWidth(b-1)===2;n&&b--;const a=n?u-1:u;m.push(a),l+=a}return m},i.getWrappedLineTrimmedLength=o},5295:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const f=o(8460),d=o(844),u=o(9092);class m extends d.Disposable{constructor(b,g){super(),this._optionsService=b,this._bufferService=g,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new u.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new u.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(b){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(b),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(b,g){this._normal.resize(b,g),this._alt.resize(b,g),this.setupTabStops(b)}setupTabStops(b){this._normal.setupTabStops(b),this._alt.setupTabStops(b)}}i.BufferSet=m},511:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=o(482),d=o(643),u=o(3734);class m extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(b){const g=new m;return g.setFromCharData(b),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(b){this.fg=b[d.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(b[d.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(b[d.CHAR_DATA_CHAR_INDEX].length===2){const l=b[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=l&&l<=56319){const h=b[d.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=h&&h<=57343?this.content=1024*(l-55296)+h-56320+65536|b[d.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=b[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|b[d.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=b[d.CHAR_DATA_CHAR_INDEX],this.content=2097152|b[d.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=m},643:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const f=o(8460),d=o(844);class u{get id(){return this._id}constructor(S){this.line=S,this.isDisposed=!1,this._disposables=[],this._id=u._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,d.disposeArray)(this._disposables),this._disposables.length=0)}register(S){return this._disposables.push(S),S}}i.Marker=u,u._nextId=1},7116:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},i.CHARSETS.A={"#":"£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},i.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},i.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},i.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},i.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},i.CHARSETS.H=i.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(v,i)=>{var o,f,d;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL=""}(o||(i.C0=o={})),function(u){u.PAD="",u.HOP="",u.BPH="",u.NBH="",u.IND="",u.NEL="",u.SSA="",u.ESA="",u.HTS="",u.HTJ="",u.VTS="",u.PLD="",u.PLU="",u.RI="",u.SS2="",u.SS3="",u.DCS="",u.PU1="",u.PU2="",u.STS="",u.CCH="",u.MW="",u.SPA="",u.EPA="",u.SOS="",u.SGCI="",u.SCI="",u.CSI="",u.ST="",u.OSC="",u.PM="",u.APC=""}(f||(i.C1=f={})),function(u){u.ST=`${o.ESC}\\`}(d||(i.C1_ESCAPED=d={}))},7399:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const f=o(2584),d={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(u,m,S,b){const g={type:0,cancel:!1,key:void 0},l=(u.shiftKey?1:0)|(u.altKey?2:0)|(u.ctrlKey?4:0)|(u.metaKey?8:0);switch(u.keyCode){case 0:u.key==="UIKeyInputUpArrow"?g.key=m?f.C0.ESC+"OA":f.C0.ESC+"[A":u.key==="UIKeyInputLeftArrow"?g.key=m?f.C0.ESC+"OD":f.C0.ESC+"[D":u.key==="UIKeyInputRightArrow"?g.key=m?f.C0.ESC+"OC":f.C0.ESC+"[C":u.key==="UIKeyInputDownArrow"&&(g.key=m?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:g.key=u.ctrlKey?"\b":f.C0.DEL,u.altKey&&(g.key=f.C0.ESC+g.key);break;case 9:if(u.shiftKey){g.key=f.C0.ESC+"[Z";break}g.key=f.C0.HT,g.cancel=!0;break;case 13:g.key=u.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,g.cancel=!0;break;case 27:g.key=f.C0.ESC,u.altKey&&(g.key=f.C0.ESC+f.C0.ESC),g.cancel=!0;break;case 37:if(u.metaKey)break;l?(g.key=f.C0.ESC+"[1;"+(l+1)+"D",g.key===f.C0.ESC+"[1;3D"&&(g.key=f.C0.ESC+(S?"b":"[1;5D"))):g.key=m?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(u.metaKey)break;l?(g.key=f.C0.ESC+"[1;"+(l+1)+"C",g.key===f.C0.ESC+"[1;3C"&&(g.key=f.C0.ESC+(S?"f":"[1;5C"))):g.key=m?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(u.metaKey)break;l?(g.key=f.C0.ESC+"[1;"+(l+1)+"A",S||g.key!==f.C0.ESC+"[1;3A"||(g.key=f.C0.ESC+"[1;5A")):g.key=m?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(u.metaKey)break;l?(g.key=f.C0.ESC+"[1;"+(l+1)+"B",S||g.key!==f.C0.ESC+"[1;3B"||(g.key=f.C0.ESC+"[1;5B")):g.key=m?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:u.shiftKey||u.ctrlKey||(g.key=f.C0.ESC+"[2~");break;case 46:g.key=l?f.C0.ESC+"[3;"+(l+1)+"~":f.C0.ESC+"[3~";break;case 36:g.key=l?f.C0.ESC+"[1;"+(l+1)+"H":m?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:g.key=l?f.C0.ESC+"[1;"+(l+1)+"F":m?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:u.shiftKey?g.type=2:u.ctrlKey?g.key=f.C0.ESC+"[5;"+(l+1)+"~":g.key=f.C0.ESC+"[5~";break;case 34:u.shiftKey?g.type=3:u.ctrlKey?g.key=f.C0.ESC+"[6;"+(l+1)+"~":g.key=f.C0.ESC+"[6~";break;case 112:g.key=l?f.C0.ESC+"[1;"+(l+1)+"P":f.C0.ESC+"OP";break;case 113:g.key=l?f.C0.ESC+"[1;"+(l+1)+"Q":f.C0.ESC+"OQ";break;case 114:g.key=l?f.C0.ESC+"[1;"+(l+1)+"R":f.C0.ESC+"OR";break;case 115:g.key=l?f.C0.ESC+"[1;"+(l+1)+"S":f.C0.ESC+"OS";break;case 116:g.key=l?f.C0.ESC+"[15;"+(l+1)+"~":f.C0.ESC+"[15~";break;case 117:g.key=l?f.C0.ESC+"[17;"+(l+1)+"~":f.C0.ESC+"[17~";break;case 118:g.key=l?f.C0.ESC+"[18;"+(l+1)+"~":f.C0.ESC+"[18~";break;case 119:g.key=l?f.C0.ESC+"[19;"+(l+1)+"~":f.C0.ESC+"[19~";break;case 120:g.key=l?f.C0.ESC+"[20;"+(l+1)+"~":f.C0.ESC+"[20~";break;case 121:g.key=l?f.C0.ESC+"[21;"+(l+1)+"~":f.C0.ESC+"[21~";break;case 122:g.key=l?f.C0.ESC+"[23;"+(l+1)+"~":f.C0.ESC+"[23~";break;case 123:g.key=l?f.C0.ESC+"[24;"+(l+1)+"~":f.C0.ESC+"[24~";break;default:if(!u.ctrlKey||u.shiftKey||u.altKey||u.metaKey)if(S&&!b||!u.altKey||u.metaKey)!S||u.altKey||u.ctrlKey||u.shiftKey||!u.metaKey?u.key&&!u.ctrlKey&&!u.altKey&&!u.metaKey&&u.keyCode>=48&&u.key.length===1?g.key=u.key:u.key&&u.ctrlKey&&(u.key==="_"&&(g.key=f.C0.US),u.key==="@"&&(g.key=f.C0.NUL)):u.keyCode===65&&(g.type=1);else{const h=d[u.keyCode],n=h==null?void 0:h[u.shiftKey?1:0];if(n)g.key=f.C0.ESC+n;else if(u.keyCode>=65&&u.keyCode<=90){const a=u.ctrlKey?u.keyCode-64:u.keyCode+32;let p=String.fromCharCode(a);u.shiftKey&&(p=p.toUpperCase()),g.key=f.C0.ESC+p}else if(u.keyCode===32)g.key=f.C0.ESC+(u.ctrlKey?f.C0.NUL:" ");else if(u.key==="Dead"&&u.code.startsWith("Key")){let a=u.code.slice(3,4);u.shiftKey||(a=a.toLowerCase()),g.key=f.C0.ESC+a,g.cancel=!0}}else u.keyCode>=65&&u.keyCode<=90?g.key=String.fromCharCode(u.keyCode-64):u.keyCode===32?g.key=f.C0.NUL:u.keyCode>=51&&u.keyCode<=55?g.key=String.fromCharCode(u.keyCode-51+27):u.keyCode===56?g.key=f.C0.DEL:u.keyCode===219?g.key=f.C0.ESC:u.keyCode===220?g.key=f.C0.FS:u.keyCode===221&&(g.key=f.C0.GS)}return g}},482:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,f=0,d=o.length){let u="";for(let m=f;m<d;++m){let S=o[m];S>65535?(S-=65536,u+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):u+=String.fromCharCode(S)}return u},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,f){const d=o.length;if(!d)return 0;let u=0,m=0;if(this._interim){const S=o.charCodeAt(m++);56320<=S&&S<=57343?f[u++]=1024*(this._interim-55296)+S-56320+65536:(f[u++]=this._interim,f[u++]=S),this._interim=0}for(let S=m;S<d;++S){const b=o.charCodeAt(S);if(55296<=b&&b<=56319){if(++S>=d)return this._interim=b,u;const g=o.charCodeAt(S);56320<=g&&g<=57343?f[u++]=1024*(b-55296)+g-56320+65536:(f[u++]=b,f[u++]=g)}else b!==65279&&(f[u++]=b)}return u}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,f){const d=o.length;if(!d)return 0;let u,m,S,b,g=0,l=0,h=0;if(this.interim[0]){let p=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let w,E=0;for(;(w=63&this.interim[++E])&&E<4;)C<<=6,C|=w;const y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,x=y-E;for(;h<x;){if(h>=d)return 0;if(w=o[h++],(192&w)!=128){h--,p=!0;break}this.interim[E++]=w,C<<=6,C|=63&w}p||(y===2?C<128?h--:f[g++]=C:y===3?C<2048||C>=55296&&C<=57343||C===65279||(f[g++]=C):C<65536||C>1114111||(f[g++]=C)),this.interim.fill(0)}const n=d-4;let a=h;for(;a<d;){for(;!(!(a<n)||128&(u=o[a])||128&(m=o[a+1])||128&(S=o[a+2])||128&(b=o[a+3]));)f[g++]=u,f[g++]=m,f[g++]=S,f[g++]=b,a+=4;if(u=o[a++],u<128)f[g++]=u;else if((224&u)==192){if(a>=d)return this.interim[0]=u,g;if(m=o[a++],(192&m)!=128){a--;continue}if(l=(31&u)<<6|63&m,l<128){a--;continue}f[g++]=l}else if((240&u)==224){if(a>=d)return this.interim[0]=u,g;if(m=o[a++],(192&m)!=128){a--;continue}if(a>=d)return this.interim[0]=u,this.interim[1]=m,g;if(S=o[a++],(192&S)!=128){a--;continue}if(l=(15&u)<<12|(63&m)<<6|63&S,l<2048||l>=55296&&l<=57343||l===65279)continue;f[g++]=l}else if((248&u)==240){if(a>=d)return this.interim[0]=u,g;if(m=o[a++],(192&m)!=128){a--;continue}if(a>=d)return this.interim[0]=u,this.interim[1]=m,g;if(S=o[a++],(192&S)!=128){a--;continue}if(a>=d)return this.interim[0]=u,this.interim[1]=m,this.interim[2]=S,g;if(b=o[a++],(192&b)!=128){a--;continue}if(l=(7&u)<<18|(63&m)<<12|(63&S)<<6|63&b,l<65536||l>1114111)continue;f[g++]=l}}return g}}},225:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const f=o(1480),d=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],u=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let m;i.UnicodeV6=class{constructor(){if(this.version="6",!m){m=new Uint8Array(65536),m.fill(1),m[0]=0,m.fill(0,1,32),m.fill(0,127,160),m.fill(2,4352,4448),m[9001]=2,m[9002]=2,m.fill(2,11904,42192),m[12351]=1,m.fill(2,44032,55204),m.fill(2,63744,64256),m.fill(2,65040,65050),m.fill(2,65072,65136),m.fill(2,65280,65377),m.fill(2,65504,65511);for(let S=0;S<d.length;++S)m.fill(0,d[S][0],d[S][1]+1)}}wcwidth(S){return S<32?0:S<127?1:S<65536?m[S]:function(b,g){let l,h=0,n=g.length-1;if(b<g[0][0]||b>g[n][1])return!1;for(;n>=h;)if(l=h+n>>1,b>g[l][1])h=l+1;else{if(!(b<g[l][0]))return!0;n=l-1}return!1}(S,u)?0:S>=131072&&S<=196605||S>=196608&&S<=262141?2:1}charProperties(S,b){let g=this.wcwidth(S),l=g===0&&b!==0;if(l){const h=f.UnicodeService.extractWidth(b);h===0?l=!1:h>g&&(g=h)}return f.UnicodeService.createPropertyValue(0,g,l)}}},5981:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const f=o(8460),d=o(844);class u extends d.Disposable{constructor(S){super(),this._action=S,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(S,b){if(b!==void 0&&this._syncCalls>b)return void(this._syncCalls=0);if(this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);const l=this._callbacks.shift();l&&l()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(S,b){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(b),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(b)}_innerWrite(S=0,b=!0){const g=S||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const l=this._writeBuffer[this._bufferOffset],h=this._action(l,b);if(h){const a=p=>Date.now()-g>=12?setTimeout(()=>this._innerWrite(0,p)):this._innerWrite(g,p);return void h.catch(p=>(queueMicrotask(()=>{throw p}),Promise.resolve(!1))).then(a)}const n=this._callbacks[this._bufferOffset];if(n&&n(),this._bufferOffset++,this._pendingData-=l.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=u},5941:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function d(u,m){const S=u.toString(16),b=S.length<2?"0"+S:S;switch(m){case 4:return S[0];case 8:return b;case 12:return(b+b).slice(0,3);default:return b+b}}i.parseColor=function(u){if(!u)return;let m=u.toLowerCase();if(m.indexOf("rgb:")===0){m=m.slice(4);const S=o.exec(m);if(S){const b=S[1]?15:S[4]?255:S[7]?4095:65535;return[Math.round(parseInt(S[1]||S[4]||S[7]||S[10],16)/b*255),Math.round(parseInt(S[2]||S[5]||S[8]||S[11],16)/b*255),Math.round(parseInt(S[3]||S[6]||S[9]||S[12],16)/b*255)]}}else if(m.indexOf("#")===0&&(m=m.slice(1),f.exec(m)&&[3,6,9,12].includes(m.length))){const S=m.length/3,b=[0,0,0];for(let g=0;g<3;++g){const l=parseInt(m.slice(S*g,S*g+S),16);b[g]=S===1?l<<4:S===2?l:S===3?l>>4:l>>8}return b}},i.toRgbString=function(u,m=16){const[S,b,g]=u;return`rgb:${d(S,m)}/${d(b,m)}/${d(g,m)}`}},5770:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const f=o(482),d=o(8742),u=o(5770),m=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=m,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=m}registerHandler(b,g){this._handlers[b]===void 0&&(this._handlers[b]=[]);const l=this._handlers[b];return l.push(g),{dispose:()=>{const h=l.indexOf(g);h!==-1&&l.splice(h,1)}}}clearHandler(b){this._handlers[b]&&delete this._handlers[b]}setHandlerFallback(b){this._handlerFb=b}reset(){if(this._active.length)for(let b=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;b>=0;--b)this._active[b].unhook(!1);this._stack.paused=!1,this._active=m,this._ident=0}hook(b,g){if(this.reset(),this._ident=b,this._active=this._handlers[b]||m,this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(b,g,l){if(this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].put(b,g,l);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(b,g,l))}unhook(b,g=!0){if(this._active.length){let l=!1,h=this._active.length-1,n=!1;if(this._stack.paused&&(h=this._stack.loopPosition-1,l=g,n=this._stack.fallThrough,this._stack.paused=!1),!n&&l===!1){for(;h>=0&&(l=this._active[h].unhook(b),l!==!0);h--)if(l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!1,l;h--}for(;h>=0;h--)if(l=this._active[h].unhook(!1),l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!0,l}else this._handlerFb(this._ident,"UNHOOK",b);this._active=m,this._ident=0}};const S=new d.Params;S.addParam(0),i.DcsHandler=class{constructor(b){this._handler=b,this._data="",this._params=S,this._hitLimit=!1}hook(b){this._params=b.length>1||b.params[0]?b.clone():S,this._data="",this._hitLimit=!1}put(b,g,l){this._hitLimit||(this._data+=(0,f.utf32ToString)(b,g,l),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(b){let g=!1;if(this._hitLimit)g=!1;else if(b&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then(l=>(this._params=S,this._data="",this._hitLimit=!1,l));return this._params=S,this._data="",this._hitLimit=!1,g}}},2015:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const f=o(844),d=o(8742),u=o(6242),m=o(6351);class S{constructor(h){this.table=new Uint8Array(h)}setDefault(h,n){this.table.fill(h<<4|n)}add(h,n,a,p){this.table[n<<8|h]=a<<4|p}addMany(h,n,a,p){for(let C=0;C<h.length;C++)this.table[n<<8|h[C]]=a<<4|p}}i.TransitionTable=S;const b=160;i.VT500_TRANSITION_TABLE=function(){const l=new S(4095),h=Array.apply(null,Array(256)).map((E,y)=>y),n=(E,y)=>h.slice(E,y),a=n(32,127),p=n(0,24);p.push(25),p.push.apply(p,n(28,32));const C=n(0,14);let w;for(w in l.setDefault(1,0),l.addMany(a,0,2,0),C)l.addMany([24,26,153,154],w,3,0),l.addMany(n(128,144),w,3,0),l.addMany(n(144,152),w,3,0),l.add(156,w,0,0),l.add(27,w,11,1),l.add(157,w,4,8),l.addMany([152,158,159],w,0,7),l.add(155,w,11,3),l.add(144,w,11,9);return l.addMany(p,0,3,0),l.addMany(p,1,3,1),l.add(127,1,0,1),l.addMany(p,8,0,8),l.addMany(p,3,3,3),l.add(127,3,0,3),l.addMany(p,4,3,4),l.add(127,4,0,4),l.addMany(p,6,3,6),l.addMany(p,5,3,5),l.add(127,5,0,5),l.addMany(p,2,3,2),l.add(127,2,0,2),l.add(93,1,4,8),l.addMany(a,8,5,8),l.add(127,8,5,8),l.addMany([156,27,24,26,7],8,6,0),l.addMany(n(28,32),8,0,8),l.addMany([88,94,95],1,0,7),l.addMany(a,7,0,7),l.addMany(p,7,0,7),l.add(156,7,0,0),l.add(127,7,0,7),l.add(91,1,11,3),l.addMany(n(64,127),3,7,0),l.addMany(n(48,60),3,8,4),l.addMany([60,61,62,63],3,9,4),l.addMany(n(48,60),4,8,4),l.addMany(n(64,127),4,7,0),l.addMany([60,61,62,63],4,0,6),l.addMany(n(32,64),6,0,6),l.add(127,6,0,6),l.addMany(n(64,127),6,0,0),l.addMany(n(32,48),3,9,5),l.addMany(n(32,48),5,9,5),l.addMany(n(48,64),5,0,6),l.addMany(n(64,127),5,7,0),l.addMany(n(32,48),4,9,5),l.addMany(n(32,48),1,9,2),l.addMany(n(32,48),2,9,2),l.addMany(n(48,127),2,10,0),l.addMany(n(48,80),1,10,0),l.addMany(n(81,88),1,10,0),l.addMany([89,90,92],1,10,0),l.addMany(n(96,127),1,10,0),l.add(80,1,11,9),l.addMany(p,9,0,9),l.add(127,9,0,9),l.addMany(n(28,32),9,0,9),l.addMany(n(32,48),9,9,12),l.addMany(n(48,60),9,8,10),l.addMany([60,61,62,63],9,9,10),l.addMany(p,11,0,11),l.addMany(n(32,128),11,0,11),l.addMany(n(28,32),11,0,11),l.addMany(p,10,0,10),l.add(127,10,0,10),l.addMany(n(28,32),10,0,10),l.addMany(n(48,60),10,8,10),l.addMany([60,61,62,63],10,0,11),l.addMany(n(32,48),10,9,12),l.addMany(p,12,0,12),l.add(127,12,0,12),l.addMany(n(28,32),12,0,12),l.addMany(n(32,48),12,9,12),l.addMany(n(48,64),12,0,11),l.addMany(n(64,127),12,12,13),l.addMany(n(64,127),10,12,13),l.addMany(n(64,127),9,12,13),l.addMany(p,13,13,13),l.addMany(a,13,13,13),l.add(127,13,0,13),l.addMany([27,156,24,26],13,14,0),l.add(b,0,2,0),l.add(b,8,5,8),l.add(b,6,0,6),l.add(b,11,0,11),l.add(b,13,13,13),l}();class g extends f.Disposable{constructor(h=i.VT500_TRANSITION_TABLE){super(),this._transitions=h,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new d.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(n,a,p)=>{},this._executeHandlerFb=n=>{},this._csiHandlerFb=(n,a)=>{},this._escHandlerFb=n=>{},this._errorHandlerFb=n=>n,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new u.OscParser),this._dcsParser=this.register(new m.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(h,n=[64,126]){let a=0;if(h.prefix){if(h.prefix.length>1)throw new Error("only one byte as prefix supported");if(a=h.prefix.charCodeAt(0),a&&60>a||a>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(h.intermediates){if(h.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<h.intermediates.length;++C){const w=h.intermediates.charCodeAt(C);if(32>w||w>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");a<<=8,a|=w}}if(h.final.length!==1)throw new Error("final must be a single byte");const p=h.final.charCodeAt(0);if(n[0]>p||p>n[1])throw new Error(`final must be in range ${n[0]} .. ${n[1]}`);return a<<=8,a|=p,a}identToString(h){const n=[];for(;h;)n.push(String.fromCharCode(255&h)),h>>=8;return n.reverse().join("")}setPrintHandler(h){this._printHandler=h}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(h,n){const a=this._identifier(h,[48,126]);this._escHandlers[a]===void 0&&(this._escHandlers[a]=[]);const p=this._escHandlers[a];return p.push(n),{dispose:()=>{const C=p.indexOf(n);C!==-1&&p.splice(C,1)}}}clearEscHandler(h){this._escHandlers[this._identifier(h,[48,126])]&&delete this._escHandlers[this._identifier(h,[48,126])]}setEscHandlerFallback(h){this._escHandlerFb=h}setExecuteHandler(h,n){this._executeHandlers[h.charCodeAt(0)]=n}clearExecuteHandler(h){this._executeHandlers[h.charCodeAt(0)]&&delete this._executeHandlers[h.charCodeAt(0)]}setExecuteHandlerFallback(h){this._executeHandlerFb=h}registerCsiHandler(h,n){const a=this._identifier(h);this._csiHandlers[a]===void 0&&(this._csiHandlers[a]=[]);const p=this._csiHandlers[a];return p.push(n),{dispose:()=>{const C=p.indexOf(n);C!==-1&&p.splice(C,1)}}}clearCsiHandler(h){this._csiHandlers[this._identifier(h)]&&delete this._csiHandlers[this._identifier(h)]}setCsiHandlerFallback(h){this._csiHandlerFb=h}registerDcsHandler(h,n){return this._dcsParser.registerHandler(this._identifier(h),n)}clearDcsHandler(h){this._dcsParser.clearHandler(this._identifier(h))}setDcsHandlerFallback(h){this._dcsParser.setHandlerFallback(h)}registerOscHandler(h,n){return this._oscParser.registerHandler(h,n)}clearOscHandler(h){this._oscParser.clearHandler(h)}setOscHandlerFallback(h){this._oscParser.setHandlerFallback(h)}setErrorHandler(h){this._errorHandler=h}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(h,n,a,p,C){this._parseStack.state=h,this._parseStack.handlers=n,this._parseStack.handlerPos=a,this._parseStack.transition=p,this._parseStack.chunkPos=C}parse(h,n,a){let p,C=0,w=0,E=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,E=this._parseStack.chunkPos+1;else{if(a===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const y=this._parseStack.handlers;let x=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(a===!1&&x>-1){for(;x>=0&&(p=y[x](this._params),p!==!0);x--)if(p instanceof Promise)return this._parseStack.handlerPos=x,p}this._parseStack.handlers=[];break;case 4:if(a===!1&&x>-1){for(;x>=0&&(p=y[x](),p!==!0);x--)if(p instanceof Promise)return this._parseStack.handlerPos=x,p}this._parseStack.handlers=[];break;case 6:if(C=h[this._parseStack.chunkPos],p=this._dcsParser.unhook(C!==24&&C!==26,a),p)return p;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=h[this._parseStack.chunkPos],p=this._oscParser.end(C!==24&&C!==26,a),p)return p;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,E=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let y=E;y<n;++y){switch(C=h[y],w=this._transitions.table[this.currentState<<8|(C<160?C:b)],w>>4){case 2:for(let L=y+1;;++L){if(L>=n||(C=h[L])<32||C>126&&C<b){this._printHandler(h,y,L),y=L-1;break}if(++L>=n||(C=h[L])<32||C>126&&C<b){this._printHandler(h,y,L),y=L-1;break}if(++L>=n||(C=h[L])<32||C>126&&C<b){this._printHandler(h,y,L),y=L-1;break}if(++L>=n||(C=h[L])<32||C>126&&C<b){this._printHandler(h,y,L),y=L-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:y,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const x=this._csiHandlers[this._collect<<8|C];let A=x?x.length-1:-1;for(;A>=0&&(p=x[A](this._params),p!==!0);A--)if(p instanceof Promise)return this._preserveStack(3,x,A,w,y),p;A<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingJoinState=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++y<n&&(C=h[y])>47&&C<60);y--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:const B=this._escHandlers[this._collect<<8|C];let P=B?B.length-1:-1;for(;P>=0&&(p=B[P](),p!==!0);P--)if(p instanceof Promise)return this._preserveStack(4,B,P,w,y),p;P<0&&this._escHandlerFb(this._collect<<8|C),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let L=y+1;;++L)if(L>=n||(C=h[L])===24||C===26||C===27||C>127&&C<b){this._dcsParser.put(h,y,L),y=L-1;break}break;case 14:if(p=this._dcsParser.unhook(C!==24&&C!==26),p)return this._preserveStack(6,[],0,w,y),p;C===27&&(w|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let L=y+1;;L++)if(L>=n||(C=h[L])<32||C>127&&C<b){this._oscParser.put(h,y,L),y=L-1;break}break;case 6:if(p=this._oscParser.end(C!==24&&C!==26),p)return this._preserveStack(5,[],0,w,y),p;C===27&&(w|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&w}}}i.EscapeSequenceParser=g},6242:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const f=o(5770),d=o(482),u=[];i.OscParser=class{constructor(){this._state=0,this._active=u,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(m,S){this._handlers[m]===void 0&&(this._handlers[m]=[]);const b=this._handlers[m];return b.push(S),{dispose:()=>{const g=b.indexOf(S);g!==-1&&b.splice(g,1)}}}clearHandler(m){this._handlers[m]&&delete this._handlers[m]}setHandlerFallback(m){this._handlerFb=m}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=u}reset(){if(this._state===2)for(let m=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;m>=0;--m)this._active[m].end(!1);this._stack.paused=!1,this._active=u,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||u,this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].start();else this._handlerFb(this._id,"START")}_put(m,S,b){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(m,S,b);else this._handlerFb(this._id,"PUT",(0,d.utf32ToString)(m,S,b))}start(){this.reset(),this._state=1}put(m,S,b){if(this._state!==3){if(this._state===1)for(;S<b;){const g=m[S++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&b-S>0&&this._put(m,S,b)}}end(m,S=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let b=!1,g=this._active.length-1,l=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,b=S,l=this._stack.fallThrough,this._stack.paused=!1),!l&&b===!1){for(;g>=0&&(b=this._active[g].end(m),b!==!0);g--)if(b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,b;g--}for(;g>=0;g--)if(b=this._active[g].end(!1),b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,b}else this._handlerFb(this._id,"END",m);this._active=u,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(m){this._handler=m,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(m,S,b){this._hitLimit||(this._data+=(0,d.utf32ToString)(m,S,b),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(m){let S=!1;if(this._hitLimit)S=!1;else if(m&&(S=this._handler(this._data),S instanceof Promise))return S.then(b=>(this._data="",this._hitLimit=!1,b));return this._data="",this._hitLimit=!1,S}}},8742:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const o=2147483647;class f{static fromArray(u){const m=new f;if(!u.length)return m;for(let S=Array.isArray(u[0])?1:0;S<u.length;++S){const b=u[S];if(Array.isArray(b))for(let g=0;g<b.length;++g)m.addSubParam(b[g]);else m.addParam(b)}return m}constructor(u=32,m=32){if(this.maxLength=u,this.maxSubParamsLength=m,m>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(u),this.length=0,this._subParams=new Int32Array(m),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(u),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const u=new f(this.maxLength,this.maxSubParamsLength);return u.params.set(this.params),u.length=this.length,u._subParams.set(this._subParams),u._subParamsLength=this._subParamsLength,u._subParamsIdx.set(this._subParamsIdx),u._rejectDigits=this._rejectDigits,u._rejectSubDigits=this._rejectSubDigits,u._digitIsSub=this._digitIsSub,u}toArray(){const u=[];for(let m=0;m<this.length;++m){u.push(this.params[m]);const S=this._subParamsIdx[m]>>8,b=255&this._subParamsIdx[m];b-S>0&&u.push(Array.prototype.slice.call(this._subParams,S,b))}return u}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(u){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=u>o?o:u}}addSubParam(u){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=u>o?o:u,this._subParamsIdx[this.length-1]++}}hasSubParams(u){return(255&this._subParamsIdx[u])-(this._subParamsIdx[u]>>8)>0}getSubParams(u){const m=this._subParamsIdx[u]>>8,S=255&this._subParamsIdx[u];return S-m>0?this._subParams.subarray(m,S):null}getSubParamsAll(){const u={};for(let m=0;m<this.length;++m){const S=this._subParamsIdx[m]>>8,b=255&this._subParamsIdx[m];b-S>0&&(u[m]=this._subParams.slice(S,b))}return u}addDigit(u){let m;if(this._rejectDigits||!(m=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const S=this._digitIsSub?this._subParams:this.params,b=S[m-1];S[m-1]=~b?Math.min(10*b+u,o):u}}i.Params=f},5741:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,f){const d={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(d),f.dispose=()=>this._wrappedAddonDispose(d),f.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let f=-1;for(let d=0;d<this._addons.length;d++)if(this._addons[d]===o){f=d;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(f,1)}}},8771:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const f=o(3785),d=o(511);i.BufferApiView=class{constructor(u,m){this._buffer=u,this.type=m}init(u){return this._buffer=u,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(u){const m=this._buffer.lines.get(u);if(m)return new f.BufferLineApiView(m)}getNullCell(){return new d.CellData}}},3785:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const f=o(511);i.BufferLineApiView=class{constructor(d){this._line=d}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(d,u){if(!(d<0||d>=this._line.length))return u?(this._line.loadCell(d,u),u):this._line.loadCell(d,new f.CellData)}translateToString(d,u,m){return this._line.translateToString(d,u,m)}}},8285:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const f=o(8771),d=o(8460),u=o(844);class m extends u.Disposable{constructor(b){super(),this._core=b,this._onBufferChange=this.register(new d.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=m},7975:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,f){return this._core.registerCsiHandler(o,d=>f(d.toArray()))}addCsiHandler(o,f){return this.registerCsiHandler(o,f)}registerDcsHandler(o,f){return this._core.registerDcsHandler(o,(d,u)=>f(d,u.toArray()))}addDcsHandler(o,f){return this.registerDcsHandler(o,f)}registerEscHandler(o,f){return this._core.registerEscHandler(o,f)}addEscHandler(o,f){return this.registerEscHandler(o,f)}registerOscHandler(o,f){return this._core.registerOscHandler(o,f)}addOscHandler(o,f){return this.registerOscHandler(o,f)}}},7090:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(v,i,o){var f=this&&this.__decorate||function(l,h,n,a){var p,C=arguments.length,w=C<3?h:a===null?a=Object.getOwnPropertyDescriptor(h,n):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(l,h,n,a);else for(var E=l.length-1;E>=0;E--)(p=l[E])&&(w=(C<3?p(w):C>3?p(h,n,w):p(h,n))||w);return C>3&&w&&Object.defineProperty(h,n,w),w},d=this&&this.__param||function(l,h){return function(n,a){h(n,a,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const u=o(8460),m=o(844),S=o(5295),b=o(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let g=i.BufferService=class extends m.Disposable{get buffer(){return this.buffers.active}constructor(l){super(),this.isUserScrolling=!1,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(l.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(l.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new S.BufferSet(l,this))}resize(l,h){this.cols=l,this.rows=h,this.buffers.resize(l,h),this._onResize.fire({cols:l,rows:h})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(l,h=!1){const n=this.buffer;let a;a=this._cachedBlankLine,a&&a.length===this.cols&&a.getFg(0)===l.fg&&a.getBg(0)===l.bg||(a=n.getBlankLine(l,h),this._cachedBlankLine=a),a.isWrapped=h;const p=n.ybase+n.scrollTop,C=n.ybase+n.scrollBottom;if(n.scrollTop===0){const w=n.lines.isFull;C===n.lines.length-1?w?n.lines.recycle().copyFrom(a):n.lines.push(a.clone()):n.lines.splice(C+1,0,a.clone()),w?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{const w=C-p+1;n.lines.shiftElements(p+1,w-1,-1),n.lines.set(C,a.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)}scrollLines(l,h,n){const a=this.buffer;if(l<0){if(a.ydisp===0)return;this.isUserScrolling=!0}else l+a.ydisp>=a.ybase&&(this.isUserScrolling=!1);const p=a.ydisp;a.ydisp=Math.max(Math.min(a.ydisp+l,a.ybase),0),p!==a.ydisp&&(h||this._onScroll.fire(a.ydisp))}};i.BufferService=g=f([d(0,b.IOptionsService)],g)},7994:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,f){this._charsets[o]=f,this.glevel===o&&(this.charset=f)}}},1753:function(v,i,o){var f=this&&this.__decorate||function(a,p,C,w){var E,y=arguments.length,x=y<3?p:w===null?w=Object.getOwnPropertyDescriptor(p,C):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(a,p,C,w);else for(var A=a.length-1;A>=0;A--)(E=a[A])&&(x=(y<3?E(x):y>3?E(p,C,x):E(p,C))||x);return y>3&&x&&Object.defineProperty(p,C,x),x},d=this&&this.__param||function(a,p){return function(C,w){p(C,w,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const u=o(2585),m=o(8460),S=o(844),b={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:a=>a.button!==4&&a.action===1&&(a.ctrl=!1,a.alt=!1,a.shift=!1,!0)},VT200:{events:19,restrict:a=>a.action!==32},DRAG:{events:23,restrict:a=>a.action!==32||a.button!==3},ANY:{events:31,restrict:a=>!0}};function g(a,p){let C=(a.ctrl?16:0)|(a.shift?4:0)|(a.alt?8:0);return a.button===4?(C|=64,C|=a.action):(C|=3&a.button,4&a.button&&(C|=64),8&a.button&&(C|=128),a.action===32?C|=32:a.action!==0||p||(C|=3)),C}const l=String.fromCharCode,h={DEFAULT:a=>{const p=[g(a,!1)+32,a.col+32,a.row+32];return p[0]>255||p[1]>255||p[2]>255?"":`\x1B[M${l(p[0])}${l(p[1])}${l(p[2])}`},SGR:a=>{const p=a.action===0&&a.button!==4?"m":"M";return`\x1B[<${g(a,!0)};${a.col};${a.row}${p}`},SGR_PIXELS:a=>{const p=a.action===0&&a.button!==4?"m":"M";return`\x1B[<${g(a,!0)};${a.x};${a.y}${p}`}};let n=i.CoreMouseService=class extends S.Disposable{constructor(a,p){super(),this._bufferService=a,this._coreService=p,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new m.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const C of Object.keys(b))this.addProtocol(C,b[C]);for(const C of Object.keys(h))this.addEncoding(C,h[C]);this.reset()}addProtocol(a,p){this._protocols[a]=p}addEncoding(a,p){this._encodings[a]=p}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(a){if(!this._protocols[a])throw new Error(`unknown protocol "${a}"`);this._activeProtocol=a,this._onProtocolChange.fire(this._protocols[a].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(a){if(!this._encodings[a])throw new Error(`unknown encoding "${a}"`);this._activeEncoding=a}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(a){if(a.col<0||a.col>=this._bufferService.cols||a.row<0||a.row>=this._bufferService.rows||a.button===4&&a.action===32||a.button===3&&a.action!==32||a.button!==4&&(a.action===2||a.action===3)||(a.col++,a.row++,a.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,a,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(a))return!1;const p=this._encodings[this._activeEncoding](a);return p&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(p):this._coreService.triggerDataEvent(p,!0)),this._lastEvent=a,!0}explainEvents(a){return{down:!!(1&a),up:!!(2&a),drag:!!(4&a),move:!!(8&a),wheel:!!(16&a)}}_equalEvents(a,p,C){if(C){if(a.x!==p.x||a.y!==p.y)return!1}else if(a.col!==p.col||a.row!==p.row)return!1;return a.button===p.button&&a.action===p.action&&a.ctrl===p.ctrl&&a.alt===p.alt&&a.shift===p.shift}};i.CoreMouseService=n=f([d(0,u.IBufferService),d(1,u.ICoreService)],n)},6975:function(v,i,o){var f=this&&this.__decorate||function(n,a,p,C){var w,E=arguments.length,y=E<3?a:C===null?C=Object.getOwnPropertyDescriptor(a,p):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(n,a,p,C);else for(var x=n.length-1;x>=0;x--)(w=n[x])&&(y=(E<3?w(y):E>3?w(a,p,y):w(a,p))||y);return E>3&&y&&Object.defineProperty(a,p,y),y},d=this&&this.__param||function(n,a){return function(p,C){a(p,C,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const u=o(1439),m=o(8460),S=o(844),b=o(2585),g=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let h=i.CoreService=class extends S.Disposable{constructor(n,a,p){super(),this._bufferService=n,this._logService=a,this._optionsService=p,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new m.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new m.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new m.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new m.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,u.clone)(g),this.decPrivateModes=(0,u.clone)(l)}reset(){this.modes=(0,u.clone)(g),this.decPrivateModes=(0,u.clone)(l)}triggerDataEvent(n,a=!1){if(this._optionsService.rawOptions.disableStdin)return;const p=this._bufferService.buffer;a&&this._optionsService.rawOptions.scrollOnUserInput&&p.ybase!==p.ydisp&&this._onRequestScrollToBottom.fire(),a&&this._onUserInput.fire(),this._logService.debug(`sending data "${n}"`,()=>n.split("").map(C=>C.charCodeAt(0))),this._onData.fire(n)}triggerBinaryEvent(n){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${n}"`,()=>n.split("").map(a=>a.charCodeAt(0))),this._onBinary.fire(n))}};i.CoreService=h=f([d(0,b.IBufferService),d(1,b.ILogService),d(2,b.IOptionsService)],h)},9074:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const f=o(8055),d=o(8460),u=o(844),m=o(6106);let S=0,b=0;class g extends u.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new m.SortedList(n=>n==null?void 0:n.marker.line),this._onDecorationRegistered=this.register(new d.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new d.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,u.toDisposable)(()=>this.reset()))}registerDecoration(n){if(n.marker.isDisposed)return;const a=new l(n);if(a){const p=a.marker.onDispose(()=>a.dispose());a.onDispose(()=>{a&&(this._decorations.delete(a)&&this._onDecorationRemoved.fire(a),p.dispose())}),this._decorations.insert(a),this._onDecorationRegistered.fire(a)}return a}reset(){for(const n of this._decorations.values())n.dispose();this._decorations.clear()}*getDecorationsAtCell(n,a,p){let C=0,w=0;for(const E of this._decorations.getKeyIterator(a))C=E.options.x??0,w=C+(E.options.width??1),n>=C&&n<w&&(!p||(E.options.layer??"bottom")===p)&&(yield E)}forEachDecorationAtCell(n,a,p,C){this._decorations.forEachByKey(a,w=>{S=w.options.x??0,b=S+(w.options.width??1),n>=S&&n<b&&(!p||(w.options.layer??"bottom")===p)&&C(w)})}}i.DecorationService=g;class l extends u.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(n){super(),this.options=n,this.onRenderEmitter=this.register(new d.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=n.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const f=o(2585),d=o(8343);class u{constructor(...S){this._entries=new Map;for(const[b,g]of S)this.set(b,g)}set(S,b){const g=this._entries.get(S);return this._entries.set(S,b),g}forEach(S){for(const[b,g]of this._entries.entries())S(b,g)}has(S){return this._entries.has(S)}get(S){return this._entries.get(S)}}i.ServiceCollection=u,i.InstantiationService=class{constructor(){this._services=new u,this._services.set(f.IInstantiationService,this)}setService(m,S){this._services.set(m,S)}getService(m){return this._services.get(m)}createInstance(m,...S){const b=(0,d.getServiceDependencies)(m).sort((h,n)=>h.index-n.index),g=[];for(const h of b){const n=this._services.get(h.id);if(!n)throw new Error(`[createInstance] ${m.name} depends on UNKNOWN service ${h.id}.`);g.push(n)}const l=b.length>0?b[0].index:S.length;if(S.length!==l)throw new Error(`[createInstance] First service dependency of ${m.name} at position ${l+1} conflicts with ${S.length} static arguments`);return new m(...S,...g)}}},7866:function(v,i,o){var f=this&&this.__decorate||function(l,h,n,a){var p,C=arguments.length,w=C<3?h:a===null?a=Object.getOwnPropertyDescriptor(h,n):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(l,h,n,a);else for(var E=l.length-1;E>=0;E--)(p=l[E])&&(w=(C<3?p(w):C>3?p(h,n,w):p(h,n))||w);return C>3&&w&&Object.defineProperty(h,n,w),w},d=this&&this.__param||function(l,h){return function(n,a){h(n,a,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const u=o(844),m=o(2585),S={trace:m.LogLevelEnum.TRACE,debug:m.LogLevelEnum.DEBUG,info:m.LogLevelEnum.INFO,warn:m.LogLevelEnum.WARN,error:m.LogLevelEnum.ERROR,off:m.LogLevelEnum.OFF};let b,g=i.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(l){super(),this._optionsService=l,this._logLevel=m.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),b=this}_updateLogLevel(){this._logLevel=S[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(l){for(let h=0;h<l.length;h++)typeof l[h]=="function"&&(l[h]=l[h]())}_log(l,h,n){this._evalLazyOptionalParams(n),l.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+h,...n)}trace(l,...h){var n;this._logLevel<=m.LogLevelEnum.TRACE&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.trace.bind(this._optionsService.options.logger))??console.log,l,h)}debug(l,...h){var n;this._logLevel<=m.LogLevelEnum.DEBUG&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.debug.bind(this._optionsService.options.logger))??console.log,l,h)}info(l,...h){var n;this._logLevel<=m.LogLevelEnum.INFO&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.info.bind(this._optionsService.options.logger))??console.info,l,h)}warn(l,...h){var n;this._logLevel<=m.LogLevelEnum.WARN&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.warn.bind(this._optionsService.options.logger))??console.warn,l,h)}error(l,...h){var n;this._logLevel<=m.LogLevelEnum.ERROR&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.error.bind(this._optionsService.options.logger))??console.error,l,h)}};i.LogService=g=f([d(0,m.IOptionsService)],g),i.setTraceLogger=function(l){b=l},i.traceCall=function(l,h,n){if(typeof n.value!="function")throw new Error("not supported");const a=n.value;n.value=function(...p){if(b.logLevel!==m.LogLevelEnum.TRACE)return a.apply(this,p);b.trace(`GlyphRenderer#${a.name}(${p.map(w=>JSON.stringify(w)).join(", ")})`);const C=a.apply(this,p);return b.trace(`GlyphRenderer#${a.name} return`,C),C}}},7302:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const f=o(8460),d=o(844),u=o(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:u.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const m=["normal","bold","100","200","300","400","500","600","700","800","900"];class S extends d.Disposable{constructor(g){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const l={...i.DEFAULT_OPTIONS};for(const h in g)if(h in l)try{const n=g[h];l[h]=this._sanitizeAndValidateOption(h,n)}catch(n){console.error(n)}this.rawOptions=l,this.options={...l},this._setupOptions(),this.register((0,d.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(g,l){return this.onOptionChange(h=>{h===g&&l(this.rawOptions[g])})}onMultipleOptionChange(g,l){return this.onOptionChange(h=>{g.indexOf(h)!==-1&&l()})}_setupOptions(){const g=h=>{if(!(h in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);return this.rawOptions[h]},l=(h,n)=>{if(!(h in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);n=this._sanitizeAndValidateOption(h,n),this.rawOptions[h]!==n&&(this.rawOptions[h]=n,this._onOptionChange.fire(h))};for(const h in this.rawOptions){const n={get:g.bind(this,h),set:l.bind(this,h)};Object.defineProperty(this.options,h,n)}}_sanitizeAndValidateOption(g,l){switch(g){case"cursorStyle":if(l||(l=i.DEFAULT_OPTIONS[g]),!function(h){return h==="block"||h==="underline"||h==="bar"}(l))throw new Error(`"${l}" is not a valid value for ${g}`);break;case"wordSeparator":l||(l=i.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof l=="number"&&1<=l&&l<=1e3)break;l=m.includes(l)?l:i.DEFAULT_OPTIONS[g];break;case"cursorWidth":l=Math.floor(l);case"lineHeight":case"tabStopWidth":if(l<1)throw new Error(`${g} cannot be less than 1, value: ${l}`);break;case"minimumContrastRatio":l=Math.max(1,Math.min(21,Math.round(10*l)/10));break;case"scrollback":if((l=Math.min(l,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${l}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(l<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${l}`);break;case"rows":case"cols":if(!l&&l!==0)throw new Error(`${g} must be numeric, value: ${l}`);break;case"windowsPty":l=l??{}}return l}}i.OptionsService=S},2660:function(v,i,o){var f=this&&this.__decorate||function(S,b,g,l){var h,n=arguments.length,a=n<3?b:l===null?l=Object.getOwnPropertyDescriptor(b,g):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(S,b,g,l);else for(var p=S.length-1;p>=0;p--)(h=S[p])&&(a=(n<3?h(a):n>3?h(b,g,a):h(b,g))||a);return n>3&&a&&Object.defineProperty(b,g,a),a},d=this&&this.__param||function(S,b){return function(g,l){b(g,l,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const u=o(2585);let m=i.OscLinkService=class{constructor(S){this._bufferService=S,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(S){const b=this._bufferService.buffer;if(S.id===void 0){const p=b.addMarker(b.ybase+b.y),C={data:S,id:this._nextId++,lines:[p]};return p.onDispose(()=>this._removeMarkerFromLink(C,p)),this._dataByLinkId.set(C.id,C),C.id}const g=S,l=this._getEntryIdKey(g),h=this._entriesWithId.get(l);if(h)return this.addLineToLink(h.id,b.ybase+b.y),h.id;const n=b.addMarker(b.ybase+b.y),a={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[n]};return n.onDispose(()=>this._removeMarkerFromLink(a,n)),this._entriesWithId.set(a.key,a),this._dataByLinkId.set(a.id,a),a.id}addLineToLink(S,b){const g=this._dataByLinkId.get(S);if(g&&g.lines.every(l=>l.line!==b)){const l=this._bufferService.buffer.addMarker(b);g.lines.push(l),l.onDispose(()=>this._removeMarkerFromLink(g,l))}}getLinkData(S){var b;return(b=this._dataByLinkId.get(S))==null?void 0:b.data}_getEntryIdKey(S){return`${S.id};;${S.uri}`}_removeMarkerFromLink(S,b){const g=S.lines.indexOf(b);g!==-1&&(S.lines.splice(g,1),S.lines.length===0&&(S.data.id!==void 0&&this._entriesWithId.delete(S.key),this._dataByLinkId.delete(S.id)))}};i.OscLinkService=m=f([d(0,u.IBufferService)],m)},8343:(v,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const o="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(d){return d[f]||[]},i.createDecorator=function(d){if(i.serviceRegistry.has(d))return i.serviceRegistry.get(d);const u=function(m,S,b){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,l,h){l[o]===l?l[f].push({id:g,index:h}):(l[f]=[{id:g,index:h}],l[o]=l)})(u,m,b)};return u.toString=()=>d,i.serviceRegistry.set(d,u),u}},2585:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=o(8343);var d;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(d||(i.LogLevelEnum=d={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(v,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const f=o(8460),d=o(225);class u{static extractShouldJoin(S){return(1&S)!=0}static extractWidth(S){return S>>1&3}static extractCharKind(S){return S>>3}static createPropertyValue(S,b,g=!1){return(16777215&S)<<3|(3&b)<<1|(g?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const S=new d.UnicodeV6;this.register(S),this._active=S.version,this._activeProvider=S}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(S){if(!this._providers[S])throw new Error(`unknown Unicode version "${S}"`);this._active=S,this._activeProvider=this._providers[S],this._onChange.fire(S)}register(S){this._providers[S.version]=S}wcwidth(S){return this._activeProvider.wcwidth(S)}getStringCellWidth(S){let b=0,g=0;const l=S.length;for(let h=0;h<l;++h){let n=S.charCodeAt(h);if(55296<=n&&n<=56319){if(++h>=l)return b+this.wcwidth(n);const C=S.charCodeAt(h);56320<=C&&C<=57343?n=1024*(n-55296)+C-56320+65536:b+=this.wcwidth(C)}const a=this.charProperties(n,g);let p=u.extractWidth(a);u.extractShouldJoin(a)&&(p-=u.extractWidth(g)),b+=p,g=a}return b}charProperties(S,b){return this._activeProvider.charProperties(S,b)}}i.UnicodeService=u}},r={};function c(v){var i=r[v];if(i!==void 0)return i.exports;var o=r[v]={exports:{}};return s[v].call(o.exports,o,o.exports,c),o.exports}var _={};return(()=>{var v=_;Object.defineProperty(v,"__esModule",{value:!0}),v.Terminal=void 0;const i=c(9042),o=c(3236),f=c(844),d=c(5741),u=c(8285),m=c(7975),S=c(7090),b=["cols","rows"];class g extends f.Disposable{constructor(h){super(),this._core=this.register(new o.Terminal(h)),this._addonManager=this.register(new d.AddonManager),this._publicOptions={...this._core.options};const n=p=>this._core.options[p],a=(p,C)=>{this._checkReadonlyOptions(p),this._core.options[p]=C};for(const p in this._core.options){const C={get:n.bind(this,p),set:a.bind(this,p)};Object.defineProperty(this._publicOptions,p,C)}}_checkReadonlyOptions(h){if(b.includes(h))throw new Error(`Option "${h}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new m.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new S.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new u.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const h=this._core.coreService.decPrivateModes;let n="none";switch(this._core.coreMouseService.activeProtocol){case"X10":n="x10";break;case"VT200":n="vt200";break;case"DRAG":n="drag";break;case"ANY":n="any"}return{applicationCursorKeysMode:h.applicationCursorKeys,applicationKeypadMode:h.applicationKeypad,bracketedPasteMode:h.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:n,originMode:h.origin,reverseWraparoundMode:h.reverseWraparound,sendFocusMode:h.sendFocus,wraparoundMode:h.wraparound}}get options(){return this._publicOptions}set options(h){for(const n in h)this._publicOptions[n]=h[n]}blur(){this._core.blur()}focus(){this._core.focus()}input(h,n=!0){this._core.input(h,n)}resize(h,n){this._verifyIntegers(h,n),this._core.resize(h,n)}open(h){this._core.open(h)}attachCustomKeyEventHandler(h){this._core.attachCustomKeyEventHandler(h)}attachCustomWheelEventHandler(h){this._core.attachCustomWheelEventHandler(h)}registerLinkProvider(h){return this._core.registerLinkProvider(h)}registerCharacterJoiner(h){return this._checkProposedApi(),this._core.registerCharacterJoiner(h)}deregisterCharacterJoiner(h){this._checkProposedApi(),this._core.deregisterCharacterJoiner(h)}registerMarker(h=0){return this._verifyIntegers(h),this._core.registerMarker(h)}registerDecoration(h){return this._checkProposedApi(),this._verifyPositiveIntegers(h.x??0,h.width??0,h.height??0),this._core.registerDecoration(h)}hasSelection(){return this._core.hasSelection()}select(h,n,a){this._verifyIntegers(h,n,a),this._core.select(h,n,a)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(h,n){this._verifyIntegers(h,n),this._core.selectLines(h,n)}dispose(){super.dispose()}scrollLines(h){this._verifyIntegers(h),this._core.scrollLines(h)}scrollPages(h){this._verifyIntegers(h),this._core.scrollPages(h)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(h){this._verifyIntegers(h),this._core.scrollToLine(h)}clear(){this._core.clear()}write(h,n){this._core.write(h,n)}writeln(h,n){this._core.write(h),this._core.write(`\r
`,n)}paste(h){this._core.paste(h)}refresh(h,n){this._verifyIntegers(h,n),this._core.refresh(h,n)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(h){this._addonManager.loadAddon(this,h)}static get strings(){return i}_verifyIntegers(...h){for(const n of h)if(n===1/0||isNaN(n)||n%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...h){for(const n of h)if(n&&(n===1/0||isNaN(n)||n%1!=0||n<0))throw new Error("This API only accepts positive integers")}}v.Terminal=g})(),_})())})(Il);var Qd=Il.exports,Hl={exports:{}};(function(e,t){(function(s,r){e.exports=r()})(self,()=>(()=>{var s={};return(()=>{var r=s;Object.defineProperty(r,"__esModule",{value:!0}),r.FitAddon=void 0,r.FitAddon=class{activate(c){this._terminal=c}dispose(){}fit(){const c=this.proposeDimensions();if(!c||!this._terminal||isNaN(c.cols)||isNaN(c.rows))return;const _=this._terminal._core;this._terminal.rows===c.rows&&this._terminal.cols===c.cols||(_._renderService.clear(),this._terminal.resize(c.cols,c.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const c=this._terminal._core,_=c._renderService.dimensions;if(_.css.cell.width===0||_.css.cell.height===0)return;const v=this._terminal.options.scrollback===0?0:c.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue("height")),f=Math.max(0,parseInt(i.getPropertyValue("width"))),d=window.getComputedStyle(this._terminal.element),u=o-(parseInt(d.getPropertyValue("padding-top"))+parseInt(d.getPropertyValue("padding-bottom"))),m=f-(parseInt(d.getPropertyValue("padding-right"))+parseInt(d.getPropertyValue("padding-left")))-v;return{cols:Math.max(2,Math.floor(m/_.css.cell.width)),rows:Math.max(1,Math.floor(u/_.css.cell.height))}}}})(),s})())})(Hl);var Gd=Hl.exports;const Jd={class:"h-full flex flex-col"},Xd={class:"px-3 py-2 flex-shrink-0 border-b",style:{background:"var(--bg-secondary)","border-color":"var(--border-primary)"}},Yd={class:"flex items-center justify-between"},Zd={class:"flex items-center space-x-3 text-xs"},e_={style:{color:"var(--text-primary)"},class:"font-medium"},t_={class:"text-xs",style:{color:"var(--text-tertiary)"}},s_={__name:"TerminalView",props:{session:{type:String,required:!0},ws:{type:Object,required:!0}},setup(e){const t=e,s=Fe(null);let r=null,c=null;const _=Fe({cols:80,rows:24});mr(()=>{r=new Qd.Terminal({cursorBlink:!0,fontSize:13,fontFamily:"JetBrains Mono, SF Mono, Monaco, Inconsolata, Fira Code, monospace",theme:{background:"#000000",foreground:"#c9d1d9",cursor:"#c9d1d9",cursorAccent:"#000000",selection:"rgba(88, 166, 255, 0.3)",black:"#000000",red:"#ff7b72",green:"#7ee787",yellow:"#ffa657",blue:"#79c0ff",magenta:"#d2a8ff",cyan:"#a5d6ff",white:"#c9d1d9",brightBlack:"#6e7681",brightRed:"#ffa198",brightGreen:"#56d364",brightYellow:"#ffdf5d",brightBlue:"#79c0ff",brightMagenta:"#d2a8ff",brightCyan:"#a5d6ff",brightWhite:"#ffffff"},scrollback:1e4,tabStopWidth:8,bellStyle:"none",drawBoldTextInBrightColors:!0,lineHeight:1.2}),c=new Gd.FitAddon,r.loadAddon(c),r.open(s.value),setTimeout(()=>{c.fit(),r.focus()},100),r.onData(u=>{t.ws.send({type:"input",data:u})}),r.onResize(u=>{_.value={cols:u.cols,rows:u.rows},t.ws.isConnected.value&&t.ws.send({type:"resize",cols:u.cols,rows:u.rows})}),t.ws.onMessage("output",u=>{r.write(u.data)}),t.ws.onMessage("disconnected",()=>{r.write(`\r
\r
[Session disconnected]\r
`)}),t.ws.onMessage("attached",()=>{r.focus(),i()}),s.value.addEventListener("click",()=>{r.focus()}),v(),window.addEventListener("resize",f),new ResizeObserver(f).observe(s.value)}),Sr(()=>{r&&r.dispose(),t.ws.offMessage("output"),t.ws.offMessage("disconnected"),t.ws.offMessage("attached"),window.removeEventListener("resize",f),clearTimeout(o)}),zt(()=>t.session,()=>{r&&r.clear(),v()});const v=()=>{let d=120,u=40;if(c){const m=c.proposeDimensions();m&&(d=m.cols,u=m.rows)}t.ws.send({type:"attach-session",sessionName:t.session,cols:d,rows:u})},i=()=>{if(c&&r)try{c.fit();const d=c.proposeDimensions();d&&(_.value={cols:d.cols,rows:d.rows},t.ws.isConnected.value&&t.ws.send({type:"resize",cols:d.cols,rows:d.rows}))}catch(d){console.error("Error resizing terminal:",d)}};let o=null;const f=()=>{clearTimeout(o),o=setTimeout(i,100)};return(d,u)=>(Ae(),Me("div",Jd,[ie("div",Xd,[ie("div",Yd,[ie("div",Zd,[u[0]||(u[0]=ie("span",{style:{color:"var(--text-tertiary)"}},"Session:",-1)),ie("span",e_,Be(e.session),1)]),ie("div",t_,[ie("span",null,Be(_.value.cols)+"×"+Be(_.value.rows),1)])])]),ie("div",{ref_key:"terminalContainer",ref:s,class:"flex-1 overflow-hidden",tabindex:"0",style:{background:"#000"}},null,512)]))}},r_={class:"min-h-screen",style:{background:"var(--bg-primary)"}},i_={class:"border-b",style:{background:"var(--bg-secondary)","border-color":"var(--border-primary)"}},n_={class:"px-4"},o_={class:"flex items-center justify-between h-12"},a_={class:"flex items-center space-x-6"},l_={class:"flex items-center space-x-4 text-xs",style:{color:"var(--text-secondary)"}},c_={class:"flex items-center space-x-6 text-xs"},h_={class:"flex items-center space-x-4"},u_={class:"flex items-center space-x-2"},f_={class:"stat-badge"},d_={class:"flex items-center space-x-2"},__={class:"stat-badge"},p_={style:{color:"var(--text-tertiary)"}},g_={class:"flex items-center space-x-2"},v_={class:"stat-badge"},m_={class:"text-xs",style:{color:"var(--text-tertiary)"}},S_={class:"flex h-[calc(100vh-3rem)]"},y_={class:"flex-1 overflow-hidden",style:{background:"var(--bg-primary)"}},b_={key:1,class:"flex items-center justify-center h-full"},C_={__name:"App",setup(e){const t=hl(),s=Fe(null),r=$u(),c=Fe(""),_=Fe({cpu:{loadAvg:[0,0,0]},memory:{total:0,used:0,percent:"0"},uptime:0,hostname:"",platform:"",arch:""}),v=async()=>{try{const h=await fetch("/api/stats");_.value=await h.json()}catch(h){console.error("Failed to fetch stats:",h)}};let i;mr(()=>{v(),i=setInterval(()=>{c.value=new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),v()},1e3)}),Sr(()=>{i&&clearInterval(i)});const o=h=>{if(!h)return"0B";const n=["B","KB","MB","GB","TB"],a=Math.floor(Math.log(h)/Math.log(1024));return`${(h/Math.pow(1024,a)).toFixed(1)}${n[a]}`},f=h=>{if(!h)return"0s";const n=Math.floor(h/86400),a=Math.floor(h%86400/3600),p=Math.floor(h%3600/60);return n>0?`${n}d ${a}h`:a>0?`${a}h ${p}m`:`${p}m`},{data:d=[],refetch:u}=Uu({queryKey:["sessions"],queryFn:Vt.getSessions,refetchInterval:5e3}),m=h=>{s.value=h},S=async h=>{try{const n=await Vt.createSession(h);t.invalidateQueries(["sessions"]),s.value=n.sessionName}catch(n){console.error("Failed to create session:",n),alert("Failed to create session. It may already exist.")}},b=async h=>{try{await Vt.killSession(h),s.value===h&&(s.value=null),t.invalidateQueries(["sessions"])}catch(n){console.error("Failed to kill session:",n)}},g=async(h,n)=>{try{await Vt.renameSession(h,n),s.value===h&&(s.value=n),t.invalidateQueries(["sessions"])}catch(a){console.error("Failed to rename session:",a),alert("Failed to rename session. The name may already be in use.")}},l=(h,n)=>{console.log("Selecting window:",n.index,"in session:",h),s.value!==h&&(s.value=h),r.isConnected.value&&r.send({type:"select-window",sessionName:h,windowIndex:n.index})};return r.onMessage("sessions-list",h=>{t.setQueryData(["sessions"],h.sessions)}),r.onMessage("window-selected",h=>{h.success?console.log("Window selected successfully:",h.windowIndex):console.error("Failed to select window:",h.error)}),(h,n)=>{var a,p;return Ae(),Me("div",r_,[ie("header",i_,[ie("div",n_,[ie("div",o_,[ie("div",a_,[n[0]||(n[0]=ie("h1",{class:"text-sm font-medium"},"webmux",-1)),ie("div",l_,[ie("span",null,Be(_.value.hostname),1),ie("span",null,Be(_.value.platform)+"/"+Be(_.value.arch),1)])]),ie("div",c_,[ie("div",h_,[ie("div",u_,[n[1]||(n[1]=ie("span",{style:{color:"var(--text-tertiary)"}},"CPU",-1)),ie("span",f_,Be(((p=(a=_.value.cpu.loadAvg)==null?void 0:a[0])==null?void 0:p.toFixed(2))||"0.00"),1)]),ie("div",d_,[n[2]||(n[2]=ie("span",{style:{color:"var(--text-tertiary)"}},"MEM",-1)),ie("span",__,Be(o(_.value.memory.used))+" / "+Be(o(_.value.memory.total)),1),ie("span",p_,"("+Be(_.value.memory.percent)+"%)",1)]),ie("div",g_,[n[3]||(n[3]=ie("span",{style:{color:"var(--text-tertiary)"}},"UP",-1)),ie("span",v_,Be(f(_.value.uptime)),1)])]),ie("div",m_,Be(c.value),1)])])])]),ie("div",S_,[wt(Vd,{sessions:Ys(d),currentSession:s.value,onSelect:m,onRefresh:Ys(u),onCreate:S,onKill:b,onRename:g,onSelectWindow:l},null,8,["sessions","currentSession","onRefresh"]),ie("main",y_,[s.value?(Ae(),oi(s_,{key:0,session:s.value,ws:Ys(r),class:"h-full"},null,8,["session","ws"])):(Ae(),Me("div",b_,n[4]||(n[4]=[ie("div",{class:"text-center"},[ie("p",{class:"text-sm mb-2",style:{color:"var(--text-secondary)"}},"No active session"),ie("p",{class:"text-xs",style:{color:"var(--text-tertiary)"}},"Select or create a tmux session")],-1)])))])])])}}},Nl=hu(C_);Nl.use(Hu);Nl.mount("#app");
